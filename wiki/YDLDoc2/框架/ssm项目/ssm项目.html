
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0" theme-name="Stellar" theme-version="1.25.0">
  
  <meta name="generator" content="Hexo 7.1.1">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>YDLDoc2ï¼šssmé¡¹ç›® - é‚£ä¸ªç å†œ</title>

  
    <meta name="description" content="# SSMåŸºç¡€é¡¹ç›®ä»é›¶æ­å»ºæç¤ºè¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1e34y1k7V6open in new window# ä¸€ã€åˆ›å»ºç äº‘ä»“åº“1ã€ç™»é™†ç äº‘ï¼Œé€‰æ‹©å³ä¸Šè§’çš„â€œ+â€æŒ‰é’®ï¼Œé€‰æ‹©æ–°å»ºä»“åº“ï¼šimage-202201191836239742ã€æ–°å»ºä»“åº“çš„å…·ä½“ä¿¡æ¯ï¼šimage-202201191840297173ã€ä½¿ç”¨gitå‘½ä»¤å…‹éš†æˆ‘ä»¬çš„ä»“åº“è‡³æœ¬åœ°ï¼ši">
<meta property="og:type" content="website">
<meta property="og:title" content="ssmé¡¹ç›®">
<meta property="og:url" content="https://blog.thatcoder.cn/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/ssm%E9%A1%B9%E7%9B%AE.html">
<meta property="og:site_name" content="é‚£ä¸ªç å†œ">
<meta property="og:description" content="# SSMåŸºç¡€é¡¹ç›®ä»é›¶æ­å»ºæç¤ºè¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1e34y1k7V6open in new window# ä¸€ã€åˆ›å»ºç äº‘ä»“åº“1ã€ç™»é™†ç äº‘ï¼Œé€‰æ‹©å³ä¸Šè§’çš„â€œ+â€æŒ‰é’®ï¼Œé€‰æ‹©æ–°å»ºä»“åº“ï¼šimage-202201191836239742ã€æ–°å»ºä»“åº“çš„å…·ä½“ä¿¡æ¯ï¼šimage-202201191840297173ã€ä½¿ç”¨gitå‘½ä»¤å…‹éš†æˆ‘ä»¬çš„ä»“åº“è‡³æœ¬åœ°ï¼ši">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119183623974-4020a0f0.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184029717-d791009d.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184130735-f8dbdc03.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184559911-22db70df.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120104527841-f686373d.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120111557385-c2c45e7e.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/UkYiIiFd.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119190222325-ac8428c7.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119190449118-4aa64251.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132636690-2f2f655f.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132719105-ce6ac706.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132303260-c2ce361e.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120133909069-d49b2319.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120135041384-2dc5f319.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120135214717-ccb28ed9.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220215142433095-8a587e63.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220121163451108-77682ae2.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220215154322742-cb23e806.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/rbacrole-based-access-control-1-cf627d72.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/rbac-demo-e1a34431.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220303150043345-4db288fe.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221163325047-d029903e.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221102631555-8367ac95.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221132911696-3472019b.png">
<meta property="article:published_time" content="2023-12-16T19:23:12.420Z">
<meta property="article:modified_time" content="2023-12-16T19:23:12.420Z">
<meta property="article:author" content="é’Ÿæ„">
<meta property="article:tag" content="é‚£ä¸ªç å†œ">
<meta property="article:tag" content="ç å†œé’Ÿæ„">
<meta property="article:tag" content="é’Ÿæ„çš„åšå®¢">
<meta property="article:tag" content="é’Ÿæ„åšå®¢">
<meta property="article:tag" content="That Coder">
<meta property="article:tag" content="thatcoder">
<meta property="article:tag" content="æºæŸ’æ‹¾æŸ’é›…èˆ">
<meta property="article:tag" content="æºWebGary">
<meta property="article:tag" content="giligili.work">
<meta property="article:tag" content="seclusion.work">
<meta property="article:tag" content="GalGame">
<meta property="article:tag" content="Hexo Stellar">
<meta property="article:tag" content="æ±Ÿè¥¿æœ¨æ‘æ‹“å“‰">
<meta property="article:tag" content="æ±Ÿè¥¿å´å½¦ç¥–">
<meta property="article:tag" content="æ±Ÿè¥¿èƒ¡æ­Œ">
<meta property="article:tag" content="é¾™å—æœ¨æ‘æ‹“å“‰">
<meta property="article:tag" content="é¾™å—å´å½¦ç¥–">
<meta property="article:tag" content="é¾™å—èƒ¡æ­Œ">
<meta property="article:tag" content="ä¹æ±ŸèŒä¸šæŠ€æœ¯å­¦é™¢">
<meta property="article:tag" content="å—æ˜Œäº¤é€šå­¦é™¢">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119183623974-4020a0f0.png">
  
  
  
  <meta name="keywords" content="é‚£ä¸ªç å†œ,ç å†œé’Ÿæ„,é’Ÿæ„çš„åšå®¢,é’Ÿæ„åšå®¢,That Coder,thatcoder,æºæŸ’æ‹¾æŸ’é›…èˆ,æºWebGary,giligili.work,seclusion.work,GalGame,Hexo Stellar,æ±Ÿè¥¿æœ¨æ‘æ‹“å“‰,æ±Ÿè¥¿å´å½¦ç¥–,æ±Ÿè¥¿èƒ¡æ­Œ,é¾™å—æœ¨æ‘æ‹“å“‰,é¾™å—å´å½¦ç¥–,é¾™å—èƒ¡æ­Œ,ä¹æ±ŸèŒä¸šæŠ€æœ¯å­¦é™¢,å—æ˜Œäº¤é€šå­¦é™¢">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="é‚£ä¸ªç å†œ" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://upyun.thatcdn.cn/hexo/stellar/image/favicon.webp">
  

  
    
<link rel="stylesheet" href="/custom/css/ZYCode.css">

  

  
  <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon" /><link rel="stylesheet" href="https://upyun.thatcdn.cn/public/font/lxgw/result.css" /><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="/custom/css/ZYTimetmpl.css" /><meta itemprop="name" content="é’Ÿæ„åšå®¢"><meta itemprop="description" content="ç¬”åé’Ÿæ„, è®°å½•ä»£ç ä¸ç”Ÿæ´»."><meta itemprop="image" content="https://upyun.thatcdn.cn/hexo/stellar/image/shot.webp"><link rel="stylesheet" href="/custom/css/ZYGlobal.css"><link rel="stylesheet" href="/custom/css/ZYDark.css"><script type="text/javascript" src="/custom/js/header.js"></script><!-- Clarity tracking code for https://blog.thatcoder.cn/ -->
<script>    (function(c,l,a,r,i,t,y){        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);    })(window, document, "clarity", "script", "fi1zg7i5q5");</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H6GM3XZWV7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-H6GM3XZWV7');
</script>
<!-- BaiDu-ZhanZhang
<meta name="baidu-site-verification" content="codeva-8tnFVr706d" />
<!-- BaiDu-Tongji -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?233765a020502d5d6a92d4fe306d36c2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>



<div class="l_body content tech" id="start" layout="wiki" ><aside class="l_left"><div class="sidebar-container">


<header class="header"><div class="logo-wrap"><div class="icon"><img no-lazy class="icon" src="/custom/img/ydl.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></div><a class="title" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/SpringSecurity/SpringSecurity.html"><div class="main" ff="title">YDLDoc2</div><div class="sub normal cap">å…³äºYDLDocçš„ç¬”è®°</div><div class="sub hover cap" style="opacity:0"> ä¸å¯¹ä¹‹å¤„è¯·æŒ‡å‡º</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" class="icon search-icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" data-filter="/wiki/YDLDoc2/" placeholder="åœ¨ /wiki/YDLDoc2/ ä¸­æœç´¢"></form><div id="search-result"></div><div class="search-no-result">æ²¡æœ‰æ‰¾åˆ°å†…å®¹ï¼</div></div>


<nav class="menu dis-select"><a class="nav-item" title="åšå®¢" href="/"><span>åšå®¢</span></a><a class="nav-item active" title="ç¬”è®°" href="/wiki/"><span>ç¬”è®°</span></a><a class="nav-item" title="ä¾¿ç­¾" href="/notes/"><span>ä¾¿ç­¾</span></a><a class="nav-item" title="ç¤¾äº¤" href="/links/"><span>ç¤¾äº¤</span></a></nav>
</div>
<div class="widgets">



<widget class="widget-wrapper toc multi" id="data-toc" collapse="auto"><div class="widget-body fs14"><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/SpringSecurity/SpringSecurity.html#start"><span class="toc-text">SpringSecurity</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/SpringBoot/SpringBoot.html"><span class="toc-text">SpringBoot</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/jpa/jpa.html"><span class="toc-text">jpa</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/mybatisplus/mybatisplus.html"><span class="toc-text">mybatisplus</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/redis/redis.html"><span class="toc-text">redis</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/mybatis/mybatis.html"><span class="toc-text">mybatis</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/springmvc/springmvc.html"><span class="toc-text">springmvc</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/spring/spring.html"><span class="toc-text">spring</span></a></div><div class="doc-tree active"><a class="doc-tree-link active" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/ssm%E9%A1%B9%E7%9B%AE.html"><span class="toc-text">ssmé¡¹ç›®</span><svg t="1705415018387" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14793" width="200" height="200"><path d="M256 896a42.666667 42.666667 0 0 1-20.906667-5.546667A42.666667 42.666667 0 0 1 213.333333 853.333333V227.413333A97.28 97.28 0 0 1 307.2 128h409.6A97.28 97.28 0 0 1 810.666667 227.413333V853.333333a42.666667 42.666667 0 0 1-21.333334 36.693334 42.666667 42.666667 0 0 1-42.666666 0l-241.92-136.96-227.413334 136.533333A42.666667 42.666667 0 0 1 256 896z" p-id="14794"></path></svg></a><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E7%A0%81%E4%BA%91%E4%BB%93%E5%BA%93"><span class="toc-text"> ä¸€ã€åˆ›å»ºç äº‘ä»“åº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-text"> äºŒã€åˆ›å»ºå‰ç«¯é¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E5%88%9B%E5%BB%BAvue3-0%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E7%A8%8B"><span class="toc-text"> 1ã€åˆ›å»ºvue3.0è„šæ‰‹æ¶å·¥ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E9%85%8D%E7%BD%AEvue-router"><span class="toc-text"> 2ã€é…ç½®vue-router</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-text"> ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E5%88%9B%E5%BB%BArouter%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text"> ï¼ˆ2ï¼‰åˆ›å»ºrouterç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85"><span class="toc-text"> ï¼ˆ3ï¼‰å…¨å±€å®‰è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E9%85%8D%E7%BD%AEvuex"><span class="toc-text"> 3ã€é…ç½®vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-1"><span class="toc-text"> ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text"> ï¼ˆ2ï¼‰åˆ›å»ºç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E5%85%A8%E5%B1%80%E5%BC%95%E5%85%A5"><span class="toc-text"> ï¼ˆ3ï¼‰å…¨å±€å¼•å…¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81%E9%85%8D%E7%BD%AEaxios"><span class="toc-text"> 4ã€é…ç½®axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_5%E3%80%81%E5%AE%89%E8%A3%85ui%E7%BB%84%E4%BB%B6"><span class="toc-text"> 5ã€å®‰è£…uiç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E5%90%8E%E7%AB%AF%E9%A1%B9%E7%9B%AE"><span class="toc-text"> ä¸‰ã€åˆ›å»ºåç«¯é¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E6%90%AD%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-text"> 1ã€æ­å»ºmavenå·¥ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E8%B0%83%E6%95%B4%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-text"> 2ã€è°ƒæ•´å·¥ç¨‹ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E9%85%8D%E7%BD%AEtomcat"><span class="toc-text"> 3ã€é…ç½®tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81%E5%8A%A0%E5%85%A5%E4%BB%A5%E4%B8%8B%E4%BE%9D%E8%B5%96"><span class="toc-text"> 4ã€åŠ å…¥ä»¥ä¸‹ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_5%E3%80%81%E6%9E%84%E5%BB%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%B9%B6%E6%B5%8B%E8%AF%95"><span class="toc-text"> 5ã€æ„å»ºç›®å½•ç»“æ„å¹¶æµ‹è¯•ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%89%8D%E5%90%8E%E7%AB%AF%E8%81%94%E8%B0%83"><span class="toc-text"> å››ã€å‰åç«¯è”è°ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-text"> 1ã€è·¨åŸŸé—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F"><span class="toc-text"> 2ã€æœåŠ¡ç«¯è§£å†³è·¨åŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E5%89%8D%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-text"> 3ã€å‰ç«¯é…ç½®ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E4%BF%AE%E6%94%B9vue%E7%9A%84%E7%AB%AF%E5%8F%A3-%E5%B9%B6%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-text"> ï¼ˆ1ï¼‰ä¿®æ”¹vueçš„ç«¯å£ï¼Œå¹¶é…ç½®ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E4%BF%AE%E6%94%B9axios%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text"> ï¼ˆ2ï¼‰ä¿®æ”¹axiosçš„é…ç½®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%85%B3%E4%BA%8E%E8%AE%A4%E8%AF%81%E7%9A%84%E6%96%B0%E8%AE%A8%E8%AE%BA"><span class="toc-text"> äº”ã€å…³äºè®¤è¯çš„æ–°è®¨è®º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E5%AE%8C%E6%88%90%E7%9A%84%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2"><span class="toc-text"> 1ã€å®Œæˆçš„ç™»é™†é¡µé¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E4%BC%A0%E7%BB%9F%E7%9A%84%E7%99%BB%E9%99%86%E9%80%BB%E8%BE%91"><span class="toc-text"> 2ã€ä¼ ç»Ÿçš„ç™»é™†é€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E6%A8%A1%E6%8B%9F%E5%8D%87%E7%BA%A7"><span class="toc-text"> 3ã€æ¨¡æ‹Ÿå‡çº§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81rbac%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F"><span class="toc-text"> å…­ã€RBACæƒé™ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-text"> 1ã€æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-rbac%E6%A8%A1%E5%9E%8B%E6%A6%82%E8%BF%B0"><span class="toc-text"> ï¼ˆ1ï¼‰RBACæ¨¡å‹æ¦‚è¿°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-rbac%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text"> ï¼ˆ2ï¼‰RBACçš„ç»„æˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E8%AE%A4%E8%AF%81"><span class="toc-text"> 2ã€è®¤è¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-redis%E7%9A%84%E6%90%AD%E5%BB%BA"><span class="toc-text"> ï¼ˆ1ï¼‰redisçš„æ­å»º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E5%90%8E%E7%AB%AF%E7%9A%84%E7%99%BB%E9%99%86%E9%80%BB%E8%BE%91"><span class="toc-text"> ï¼ˆ2ï¼‰åç«¯çš„ç™»é™†é€»è¾‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E5%89%8D%E7%AB%AFstore%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text"> ï¼ˆ3ï¼‰å‰ç«¯storeçš„å¤„ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-text"> ï¼ˆ4ï¼‰æ•°æ®æ ¡éªŒ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E9%89%B4%E6%9D%83"><span class="toc-text"> 3ã€é‰´æƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%E9%89%B4%E6%9D%83"><span class="toc-text"> ï¼ˆ1ï¼‰åç«¯å¤„ç†é‰´æƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E5%89%8D%E7%AB%AF%E5%A4%84%E7%90%86%E9%89%B4%E6%9D%83"><span class="toc-text"> ï¼ˆ2ï¼‰å‰ç«¯å¤„ç†é‰´æƒ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%97%A5%E5%BF%97%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text"> ä¸ƒã€æ—¥å¿—çš„å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E6%99%AE%E9%80%9A%E6%97%A5%E5%BF%97"><span class="toc-text"> 1ã€æ™®é€šæ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%A5%E5%BF%97"><span class="toc-text"> 2ã€æ•°æ®åº“æ—¥å¿—</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E8%A1%A8%E5%8D%95%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4"><span class="toc-text"> å…«ã€è¡¨å•é‡å¤æäº¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E9%98%B2%E6%AD%A2xss%E6%94%BB%E5%87%BB"><span class="toc-text"> ä¹ã€é˜²æ­¢xssæ”»å‡»</span></a></li></ol></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"><span class="toc-text">åŸºç¡€è®¾è®¡æ¨¡å¼</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/maven%E5%85%A5%E9%97%A8/maven%E5%85%A5%E9%97%A8.html"><span class="toc-text">mavenå…¥é—¨</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc2/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6/%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6.html"><span class="toc-text">æ—¥å¿—æ¡†æ¶</span></a></div></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/ThatCoders" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-laptop-code"></i></a><a class="social" href="https://music.163.com/#/user/home?id=134968139" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-music"></i></a><a class="social" href="https://space.bilibili.com/1664687779" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-champagne-glasses"></i></a><a class="social" href="https://muselink.cc/naive" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-comments-dollar"></i></a><a class="social" href="javaScript:hud.toast('ğŸŒ™ å¤œé—´æ¨¡å¼');" rel="noopener noreferrer"><img class="lazy" id="ThemeM" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/Moon.png"/></a><a class="social" href="javaScript:hud.toast('â˜€ æ—¥é—´æ¨¡å¼');" rel="noopener noreferrer"><img class="lazy" id="ThemeL" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/Sun.png"/></a><a class="social" href="javaScript:hud.toast('ğŸ’» è·Ÿéšç³»ç»Ÿ');" rel="noopener noreferrer"><img class="lazy" id="ThemeAI" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/AI.png"/></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="bread-nav fs12"><div class="left"><div id="breadcrumb"><a class="cap breadcrumb" href="/">ä¸»é¡µ</a>
<span class="sep"></span><a class="cap breadcrumb" id="menu" href="/wiki">æ–‡æ¡£</a><span class="sep"></span><a class="cap breadcrumb" id="proj" href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/SpringSecurity/SpringSecurity.html">YDLDoc2</a></div>
<div id="post-meta"><span class="author">æ›´æ–°äºï¼š</span><time datetime="2023-12-16T19:23:12.420Z">2023-12-17</time></span></div></div>
</div>
<article class="md-text content"><h1 class="article-title"><span>ssmé¡¹ç›®</span></h1><div class="theme-hope-content"><h1 id="ssmåŸºç¡€é¡¹ç›®ä»é›¶æ­å»º" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ssmåŸºç¡€é¡¹ç›®ä»é›¶æ­å»º">#</a> SSMåŸºç¡€é¡¹ç›®ä»é›¶æ­å»º</h1><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>è¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1e34y1k7V6" rel="noopener noreferrer" target="_blank">https://www.bilibili.com/video/BV1e34y1k7V6<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><h2 id="ä¸€ã€åˆ›å»ºç äº‘ä»“åº“" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸€ã€åˆ›å»ºç äº‘ä»“åº“">#</a> ä¸€ã€åˆ›å»ºç äº‘ä»“åº“</h2><p>1ã€ç™»é™†ç äº‘ï¼Œé€‰æ‹©å³ä¸Šè§’çš„â€œ+â€æŒ‰é’®ï¼Œé€‰æ‹©æ–°å»ºä»“åº“ï¼š</p><figure><img class="lazy" alt="image-20220119183623974" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119183623974-4020a0f0.png" tabindex="0"/><figcaption>image-20220119183623974</figcaption></figure><p>2ã€æ–°å»ºä»“åº“çš„å…·ä½“ä¿¡æ¯ï¼š</p><figure><img class="lazy" alt="image-20220119184029717" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184029717-d791009d.png" tabindex="0"/><figcaption>image-20220119184029717</figcaption></figure><p>3ã€ä½¿ç”¨gitå‘½ä»¤å…‹éš†æˆ‘ä»¬çš„ä»“åº“è‡³æœ¬åœ°ï¼š</p><figure><img class="lazy" alt="image-20220119184130735" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184130735-f8dbdc03.png" tabindex="0"/><figcaption>image-20220119184130735</figcaption></figure><p>æˆ‘çš„ä»“åº“å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://gitee.com/zhangnan716/ydl-ssm-pro.git<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>å¯ä»¥æ–°å¢ä¸€ä¸ª.gitignoreæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs bash">HELP.md<br>target/<br>!.mvn/wrapper/maven-wrapper.jar<br>!**/src/main/**<br>!**/src/test/**<br><br><span class="hljs-comment">### STS ###</span><br>.apt_generated<br>.classpath<br>.factorypath<br>.project<br>.settings<br>.springBeans<br>.sts4-cache<br><br><span class="hljs-comment">### IntelliJ IDEA ###</span><br>.idea<br>*.iws<br>*.iml<br>*.ipr<br><br><span class="hljs-comment">### NetBeans ###</span><br>/nbproject/private/<br>/nbbuild/<br>/dist/<br>/nbdist/<br>/.nb-gradle/<br>build/<br><br><span class="hljs-comment">### VS Code ###</span><br>.vscode/<br><br><br>mvnw<br>mvnw.cmd<br>.mvn/<br><br>*.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€åˆ›å»ºå‰ç«¯é¡¹ç›®" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#äºŒã€åˆ›å»ºå‰ç«¯é¡¹ç›®">#</a> äºŒã€åˆ›å»ºå‰ç«¯é¡¹ç›®</h2><h3 id="_1ã€åˆ›å»ºvue3-0è„šæ‰‹æ¶å·¥ç¨‹" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€åˆ›å»ºvue3-0è„šæ‰‹æ¶å·¥ç¨‹">#</a> 1ã€åˆ›å»ºvue3.0è„šæ‰‹æ¶å·¥ç¨‹</h3><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vue create ydl-ui<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><blockquote><p>é€‰æ‹©vue3.0ç‰ˆï¼Œå°†é¡¹ç›®ç›´æ¥å»ºç«‹åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸­</p></blockquote><figure><img class="lazy" alt="image-20220119184559911" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119184559911-22db70df.png" tabindex="0"/><figcaption>image-20220119184559911</figcaption></figure><blockquote><p>ä½¿ç”¨vscodeæ‰“å¼€é¡¹ç›®å·¥ç¨‹ï¼Œå¹¶å¯åŠ¨ï¼š</p></blockquote><figure><img class="lazy" alt="image-20220120104527841" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120104527841-f686373d.png" tabindex="0"/><figcaption>image-20220120104527841</figcaption></figure><h3 id="_2ã€é…ç½®vue-router" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€é…ç½®vue-router">#</a> 2ã€é…ç½®vue-router</h3><p><a href="https://next.router.vuejs.org/zh/index.html" rel="noopener noreferrer" target="_blank">https://next.router.vuejs.org/zh/index.html<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_1-å®‰è£…ä¾èµ–" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-å®‰è£…ä¾èµ–">#</a> ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–</h4><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn add vue-router@4<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><h4 id="_2-åˆ›å»ºrouterç›®å½•ç»“æ„" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-åˆ›å»ºrouterç›®å½•ç»“æ„">#</a> ï¼ˆ2ï¼‰åˆ›å»ºrouterç›®å½•ç»“æ„</h4><p>åˆ›å»ºrouterç›®å½•ï¼Œå¹¶åˆ›å»ºindex.jsæ–‡ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¯¼å…¥ç”¨æ¥åˆ›å»ºè·¯ç”±å’Œç¡®å®šè·¯ç”±æ¨¡å¼çš„ä¸¤ä¸ªæ–¹æ³•</span><br><span class="hljs-keyword">import</span> &#123;<br>    createRouter,<br>    createWebHistory<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®šä¹‰è·¯ç”±ä¿¡æ¯</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">const</span> routes = []<br><br><span class="hljs-comment">// åˆ›å»ºè·¯ç”±å®ä¾‹å¹¶ä¼ é€’ `routes` é…ç½®</span><br><span class="hljs-comment">// æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ html5 çš„è·¯ç”±æ¨¡å¼ï¼Œurlä¸­ä¸å¸¦æœ‰#ï¼Œéƒ¨ç½²é¡¹ç›®çš„æ—¶å€™éœ€è¦æ³¨æ„ã€‚</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),<br>    routes, <br>&#125;)<br><br><br><span class="hljs-comment">// å…¨å±€çš„è·¯ç”±å®ˆå«</span><br>router.<span class="hljs-title function_">beforeEach</span>((to, <span class="hljs-keyword">from</span>) =&amp;gt; &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(to)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">from</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>&#125;)<br><br><span class="hljs-comment">// è®²è·¯ç”±å®ä¾‹å¯¼å‡º</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å…¨å±€å®‰è£…" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-å…¨å±€å®‰è£…">#</a> ï¼ˆ3ï¼‰å…¨å±€å®‰è£…</h4><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/router&#x27;</span><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€é…ç½®vuex" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€é…ç½®vuex">#</a> 3ã€é…ç½®vuex</h3><p><a href="https://next.vuex.vuejs.org/zh/" rel="noopener noreferrer" target="_blank">https://next.vuex.vuejs.org/zh/<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_1-å®‰è£…ä¾èµ–-1" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-å®‰è£…ä¾èµ–-1">#</a> ï¼ˆ1ï¼‰å®‰è£…ä¾èµ–</h4><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">yarn add vuex@next<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><h4 id="_2-åˆ›å»ºç›®å½•ç»“æ„" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-åˆ›å»ºç›®å½•ç»“æ„">#</a> ï¼ˆ2ï¼‰åˆ›å»ºç›®å½•ç»“æ„</h4><figure><img class="lazy" alt="image-20220120111557385" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120111557385-c2c45e7e.png" tabindex="0"/><figcaption>image-20220120111557385</figcaption></figure><p>useræ¨¡å—</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> user = &#123;<br>    <span class="hljs-attr">state</span>: &#123;<br>    &#125;,<br>    <span class="hljs-attr">getters</span>:&#123;   <br>    &#125;,<br>    <span class="hljs-attr">mutations</span>: &#123;<br>    &#125;,<br>    <span class="hljs-attr">actions</span>: &#123;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> user<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-keyword">import</span> user <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/modules/user&#x27;</span><br><span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/actions&#x27;</span><br><span class="hljs-keyword">import</span> mutations <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store/mutations&#x27;</span><br><br><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(&#123;<br>    <span class="hljs-attr">modules</span>: &#123;<br>        user<br>    &#125;,<br>    actions,<br>    mutations<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å…¨å±€å¼•å…¥" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-å…¨å±€å¼•å…¥">#</a> ï¼ˆ3ï¼‰å…¨å±€å¼•å…¥</h4><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store&#x27;</span><br><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">use</span>(store).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€é…ç½®axios" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€é…ç½®axios">#</a> 4ã€é…ç½®axios</h3><p><a href="http://www.axios-js.com/" rel="noopener noreferrer" target="_blank">http://www.axios-js.com/<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn add axios<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>åˆ›å»ºæ–‡ä»¶ç›®å½•</p><p>æ–°å»ºæ–‡ä»¶å¤¹apiï¼Œä»¥åæ‰€æœ‰å’Œåç«¯apiäº¤äº’çš„å†…å®¹å…¨éƒ¨æ”¾åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ï¼š</p><figure><img class="lazy" alt="image-20220215115102142" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/UkYiIiFd.png" tabindex="0"/><figcaption>image-20220215115102142</figcaption></figure><p>æ–°å»ºindex.jsï¼Œè¯¥æ–‡ä»¶ç”¨æ¥å®šä¹‰å…¨å±€çš„axiosé…ç½®</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * axiosçš„åŸºæœ¬api</span><br><span class="hljs-comment"> * // å‘é€ POST è¯·æ±‚</span><br><span class="hljs-comment"> * axios(&#123;</span><br><span class="hljs-comment"> *  method: &#x27;post&#x27;,</span><br><span class="hljs-comment"> *  url: &#x27;/user/12345&#x27;,</span><br><span class="hljs-comment"> *  data: &#123;</span><br><span class="hljs-comment"> *    firstName: &#x27;Fred&#x27;,</span><br><span class="hljs-comment"> *    lastName: &#x27;Flintstone&#x27;</span><br><span class="hljs-comment"> *  &#125;</span><br><span class="hljs-comment"> *&#125;);</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-comment">// åˆ›å»ºaxioså®ä¾‹</span><br><span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-comment">// axiosä¸­è¯·æ±‚é…ç½®æœ‰baseURLé€‰é¡¹ï¼Œè¡¨ç¤ºè¯·æ±‚URLå…¬å…±éƒ¨åˆ†</span><br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:8080/ydl/&#x27;</span>,<br>    <span class="hljs-comment">// è¶…æ—¶</span><br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,<br>    <span class="hljs-comment">// è®¾ç½®Content-Typeï¼Œè§„å®šäº†å‰åç«¯çš„äº¤äº’ä½¿ç”¨json</span><br>    <span class="hljs-attr">headers</span>: &#123;<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json;charset=utf-8&#x27;</span>&#125;<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬ä¸å¦¨å†™å‡ ä¸ªuserç›¸å…³çš„æ¥å£ï¼Œæ„Ÿå—ä¸€ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/api&quot;</span>;<br><br><span class="hljs-comment">// æ–°å¢ç”¨æˆ·</span><br><span class="hljs-comment">// æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">listUser</span>(<span class="hljs-params">query</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>        <span class="hljs-attr">params</span>: query<br>    &#125;)<br>&#125;<br><br><span class="hljs-comment">// æ–°å¢ç”¨æˆ·</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>        <span class="hljs-attr">data</span>: data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€å®‰è£…uiç»„ä»¶" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5ã€å®‰è£…uiç»„ä»¶">#</a> 5ã€å®‰è£…uiç»„ä»¶</h3><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">yarn add element-plus<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-plus&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-plus/dist/index.css&#x27;</span><br><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">use</span>(vuex).<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‰ç«¯é¡¹ç›®åŸºæœ¬æ­å»ºå®Œæˆã€‚</p><h2 id="ä¸‰ã€åˆ›å»ºåç«¯é¡¹ç›®" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸‰ã€åˆ›å»ºåç«¯é¡¹ç›®">#</a> ä¸‰ã€åˆ›å»ºåç«¯é¡¹ç›®</h2><h3 id="_1ã€æ­å»ºmavenå·¥ç¨‹" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€æ­å»ºmavenå·¥ç¨‹">#</a> 1ã€æ­å»ºmavenå·¥ç¨‹</h3><p>ç›´æ¥æŠŠé¡¹ç›®å»ºç«‹åœ¨ä»“åº“çš„æ ¹ç›®å½•å³å¯ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªå‰ç«¯é¡¹ç›®ä»“åº“ï¼Œä¸€ä¸ªåç«¯é¡¹ç›®ä»“åº“ï¼š</p><figure><img class="lazy" alt="image-20220119190222325" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119190222325-ac8428c7.png" tabindex="0"/><figcaption>image-20220119190222325</figcaption></figure><h3 id="_2ã€è°ƒæ•´å·¥ç¨‹ç»“æ„" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€è°ƒæ•´å·¥ç¨‹ç»“æ„">#</a> 2ã€è°ƒæ•´å·¥ç¨‹ç»“æ„</h3><p>åˆ›å»ºå­å·¥ç¨‹ydl-backendï¼Œåˆ é™¤æ‰çˆ¶å·¥ç¨‹çš„srcï¼Œå°†çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„packagingæ”¹ä¸ºpomï¼Œå£°æ˜ä¸ºä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼š</p><figure><img class="lazy" alt="image-20220119190449118" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220119190449118-4aa64251.png" tabindex="0"/><figcaption>image-20220119190449118</figcaption></figure><h3 id="_3ã€é…ç½®tomcat" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€é…ç½®tomcat">#</a> 3ã€é…ç½®tomcat</h3><figure><img class="lazy" alt="image-20220120132636690" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132636690-2f2f655f.png" tabindex="0"/><figcaption>image-20220120132636690</figcaption></figure><figure><img class="lazy" alt="image-20220120132719105" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132719105-ce6ac706.png" tabindex="0"/><figcaption>image-20220120132719105</figcaption></figure><h3 id="_4ã€åŠ å…¥ä»¥ä¸‹ä¾èµ–" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€åŠ å…¥ä»¥ä¸‹ä¾èµ–">#</a> 4ã€åŠ å…¥ä»¥ä¸‹ä¾èµ–</h3><p>åœ¨çˆ¶å·¥ç¨‹ä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼Œè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œæ¯ä¸€ä¸ªä¾èµ–çš„ä½œç”¨ä¸åœ¨èµ˜è¿°ï¼Œè¿™æ˜¯åŸºæœ¬çš„ssmé¡¹ç›®æ­å»ºï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;<br>         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>modelVersion<span class="hljs-symbol">&amp;gt;</span>4.0.0<span class="hljs-symbol">&amp;lt;</span>/modelVersion<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.ydl<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>ydl-back<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>packaging<span class="hljs-symbol">&amp;gt;</span>pom<span class="hljs-symbol">&amp;lt;</span>/packaging<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>1.0-SNAPSHOT<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>modules<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>module<span class="hljs-symbol">&amp;gt;</span>ydl-backend<span class="hljs-symbol">&amp;lt;</span>/module<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/modules<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>name<span class="hljs-symbol">&amp;gt;</span>ruoyi<span class="hljs-symbol">&amp;lt;</span>/name<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>url<span class="hljs-symbol">&amp;gt;</span>http://www.ydlclass.com<span class="hljs-symbol">&amp;lt;</span>/url<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>description<span class="hljs-symbol">&amp;gt;</span>å…ƒåŠ¨åŠ›ç®¡ç†ç³»ç»Ÿ<span class="hljs-symbol">&amp;lt;</span>/description<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>properties<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>maven.compiler.source<span class="hljs-symbol">&amp;gt;</span>11<span class="hljs-symbol">&amp;lt;</span>/maven.compiler.source<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>maven.compiler.target<span class="hljs-symbol">&amp;gt;</span>11<span class="hljs-symbol">&amp;lt;</span>/maven.compiler.target<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>project.build.sourceEncoding<span class="hljs-symbol">&amp;gt;</span>utf-8<span class="hljs-symbol">&amp;lt;</span>/project.build.sourceEncoding<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>javax.servlet.version<span class="hljs-symbol">&amp;gt;</span>4.0.1<span class="hljs-symbol">&amp;lt;</span>/javax.servlet.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>spring.version<span class="hljs-symbol">&amp;gt;</span>5.2.18.RELEASE<span class="hljs-symbol">&amp;lt;</span>/spring.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>spring-data-commons.version<span class="hljs-symbol">&amp;gt;</span>2.6.0<span class="hljs-symbol">&amp;lt;</span>/spring-data-commons.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>aspectjweaver.version<span class="hljs-symbol">&amp;gt;</span>1.9.6<span class="hljs-symbol">&amp;lt;</span>/aspectjweaver.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>lombok.version<span class="hljs-symbol">&amp;gt;</span>1.18.22<span class="hljs-symbol">&amp;lt;</span>/lombok.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>jackson.version<span class="hljs-symbol">&amp;gt;</span>2.13.1<span class="hljs-symbol">&amp;lt;</span>/jackson.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>validation-api.version<span class="hljs-symbol">&amp;gt;</span>2.0.1.Final<span class="hljs-symbol">&amp;lt;</span>/validation-api.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>hibernate-validator<span class="hljs-symbol">&amp;gt;</span>6.0.9.Final<span class="hljs-symbol">&amp;lt;</span>/hibernate-validator<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>logback-classic.version<span class="hljs-symbol">&amp;gt;</span>1.2.6<span class="hljs-symbol">&amp;lt;</span>/logback-classic.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>commons-fileupload.version<span class="hljs-symbol">&amp;gt;</span>1.3.3<span class="hljs-symbol">&amp;lt;</span>/commons-fileupload.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>druid.version<span class="hljs-symbol">&amp;gt;</span>1.2.8<span class="hljs-symbol">&amp;lt;</span>/druid.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>mysql-connector-java.version<span class="hljs-symbol">&amp;gt;</span>8.0.26<span class="hljs-symbol">&amp;lt;</span>/mysql-connector-java.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>mybatis.version<span class="hljs-symbol">&amp;gt;</span>3.5.5<span class="hljs-symbol">&amp;lt;</span>/mybatis.version<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>mybatis-spring.version<span class="hljs-symbol">&amp;gt;</span>2.0.6<span class="hljs-symbol">&amp;lt;</span>/mybatis-spring.version<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/properties<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--ä¾èµ–ç®¡ç†--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>dependencyManagement<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependencies<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!--servlet-api--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>javax.servlet<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>javax.servlet-api<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;javax.servlet.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!--spring-webmvc--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-webmvc<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;spring.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-jdbc<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;spring.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework.data<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-data-commons<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;spring-data-commons.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.aspectj<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>aspectjweaver<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;aspectjweaver.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!--lombok--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.projectlombok<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>lombok<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;lombok.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!--jackson--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-core<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;jackson.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-annotations<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;jackson.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-databind<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;jackson.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!--æ•°æ®æ ¡éªŒ--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>javax.validation<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>validation-api<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;validation-api.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.hibernate<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>hibernate-validator<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;hibernate-validator&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!--logbackæ—¥å¿—--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>ch.qos.logback<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>logback-classic<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;logback-classic.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br><br>            <span class="hljs-symbol">&amp;lt;</span>!--æ–‡ä»¶ä¸Šä¼ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>commons-fileupload<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>commons-fileupload<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;commons-fileupload.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ•°æ®æº--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.alibaba<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>druid<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;druid.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ•°æ®åŒºé©±åŠ¨--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>mysql<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mysql-connector-java<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;mysql-connector-java.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!-- mybatis--<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.mybatis<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mybatis<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;mybatis.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ•´åˆspringå’Œmybatis --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.mybatis<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mybatis-spring<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>$&#123;mybatis-spring.version&#125;<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependencies<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/dependencyManagement<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>build<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>plugins<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>plugin<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.apache.maven.plugins<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>maven-compiler-plugin<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>3.1<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>configuration<span class="hljs-symbol">&amp;gt;</span><br>                    <span class="hljs-symbol">&amp;lt;</span>source<span class="hljs-symbol">&amp;gt;</span>$&#123;java.version&#125;<span class="hljs-symbol">&amp;lt;</span>/source<span class="hljs-symbol">&amp;gt;</span><br>                    <span class="hljs-symbol">&amp;lt;</span>target<span class="hljs-symbol">&amp;gt;</span>$&#123;java.version&#125;<span class="hljs-symbol">&amp;lt;</span>/target<span class="hljs-symbol">&amp;gt;</span><br>                    <span class="hljs-symbol">&amp;lt;</span>encoding<span class="hljs-symbol">&amp;gt;</span>$&#123;project.build.sourceEncoding&#125;<span class="hljs-symbol">&amp;lt;</span>/encoding<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>/configuration<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/plugin<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/plugins<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/build<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>repositories<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>repository<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>id<span class="hljs-symbol">&amp;gt;</span>public<span class="hljs-symbol">&amp;lt;</span>/id<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>name<span class="hljs-symbol">&amp;gt;</span>aliyun nexus<span class="hljs-symbol">&amp;lt;</span>/name<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>url<span class="hljs-symbol">&amp;gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-symbol">&amp;lt;</span>/url<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>releases<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>enabled<span class="hljs-symbol">&amp;gt;</span>true<span class="hljs-symbol">&amp;lt;</span>/enabled<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/releases<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/repository<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/repositories<span class="hljs-symbol">&amp;gt;</span><br><br><span class="hljs-symbol">&amp;lt;</span>/project<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å­å·¥ç¨‹ä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;<br>         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>parent<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>ydl-back<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.ydl<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>1.0-SNAPSHOT<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/parent<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>modelVersion<span class="hljs-symbol">&amp;gt;</span>4.0.0<span class="hljs-symbol">&amp;lt;</span>/modelVersion<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>ydl-backend<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>properties<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>maven.compiler.source<span class="hljs-symbol">&amp;gt;</span>11<span class="hljs-symbol">&amp;lt;</span>/maven.compiler.source<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>maven.compiler.target<span class="hljs-symbol">&amp;gt;</span>11<span class="hljs-symbol">&amp;lt;</span>/maven.compiler.target<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/properties<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>dependencies<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!--servlet-api--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>javax.servlet<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>javax.servlet-api<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!--spring-webmvc--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-webmvc<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-jdbc<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.springframework.data<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>spring-data-commons<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.aspectj<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>aspectjweaver<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!--lombok--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.projectlombok<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>lombok<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!--jackson--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-core<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-annotations<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.fasterxml.jackson.core<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jackson-databind<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!--æ•°æ®æ ¡éªŒ--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>javax.validation<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>validation-api<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.hibernate<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>hibernate-validator<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!--logbackæ—¥å¿—--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>ch.qos.logback<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>logback-classic<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br><br>        <span class="hljs-symbol">&amp;lt;</span>!--æ–‡ä»¶ä¸Šä¼ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>commons-fileupload<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>commons-fileupload<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!-- æ•°æ®æº--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>com.alibaba<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>druid<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- æ•°æ®åŒºé©±åŠ¨--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>mysql<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mysql-connector-java<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!-- mybatis--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.mybatis<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mybatis<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br><br>        <span class="hljs-symbol">&amp;lt;</span>!-- æ•´åˆspringå’Œmybatis --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>org.mybatis<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>mybatis-spring<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/dependencies<span class="hljs-symbol">&amp;gt;</span><br><br><span class="hljs-symbol">&amp;lt;</span>/project<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>web.xmlçš„å†…å®¹</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;<br>         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;<br>         version=&quot;4.0&quot;<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--å®¹å™¨åˆå§‹åŒ–æ—¶ï¼Œè´Ÿè´£å¯åŠ¨springå®¹å™¨--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>listener<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>listener-class<span class="hljs-symbol">&amp;gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-symbol">&amp;lt;</span>/listener-class<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/listener<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>context-param<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>param-name<span class="hljs-symbol">&amp;gt;</span>contextConfigLocation<span class="hljs-symbol">&amp;lt;</span>/param-name<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>param-value<span class="hljs-symbol">&amp;gt;</span>classpath:application.xml<span class="hljs-symbol">&amp;lt;</span>/param-value<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/context-param<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--æ³¨å†ŒDispatcherServletï¼Œè¿™æ˜¯springmvcçš„æ ¸å¿ƒï¼Œå°±æ˜¯ä¸ªservlet--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>servlet<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>servlet-name<span class="hljs-symbol">&amp;gt;</span>springmvc<span class="hljs-symbol">&amp;lt;</span>/servlet-name<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>servlet-class<span class="hljs-symbol">&amp;gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-symbol">&amp;lt;</span>/servlet-class<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>init-param<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>param-name<span class="hljs-symbol">&amp;gt;</span>contextConfigLocation<span class="hljs-symbol">&amp;lt;</span>/param-name<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>param-value<span class="hljs-symbol">&amp;gt;</span>classpath:application.xml<span class="hljs-symbol">&amp;lt;</span>/param-value<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/init-param<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!--åŠ è½½æ—¶å…ˆå¯åŠ¨--<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>load-on-startup<span class="hljs-symbol">&amp;gt;</span>1<span class="hljs-symbol">&amp;lt;</span>/load-on-startup<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/servlet<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>servlet-mapping<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>servlet-name<span class="hljs-symbol">&amp;gt;</span>springmvc<span class="hljs-symbol">&amp;lt;</span>/servlet-name<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>url-pattern<span class="hljs-symbol">&amp;gt;</span>/<span class="hljs-symbol">&amp;lt;</span>/url-pattern<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/servlet-mapping<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>/web-app<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>jdbc.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight properties"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://127.0.0.1:3306/ydlclass?characterEncoding=utf8&amp;amp;serverTimezone=Asia/Shanghai</span><br><span class="hljs-attr">driverName</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>application.xmlï¼Œæˆ‘ä»¬å°†springå’Œspringmvcçš„é…ç½®ç»Ÿä¸€åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥åˆ†å¼€ã€‚</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br>       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br>       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;<br>       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;<br>       xmlns:mybatis=&quot;http://mybatis.org/schema/mybatis-spring&quot;<br>       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans<br>       http://www.springframework.org/schema/beans/spring-beans.xsd<br>       http://www.springframework.org/schema/context<br>       https://www.springframework.org/schema/context/spring-context.xsd<br>       http://www.springframework.org/schema/tx<br>       https://www.springframework.org/schema/tx/spring-tx.xsd<br>       http://mybatis.org/schema/mybatis-spring<br>       https://mybatis.org/schema/mybatis-spring.xsd<br>       http://www.springframework.org/schema/mvc<br>       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- è‡ªåŠ¨æ‰«åŒ… --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>context:component-scan base-package=&quot;com.ydlclass&quot;/<span class="hljs-symbol">&amp;gt;</span><br><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--æ–‡ä»¶ä¸Šä¼ é…ç½®--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;defaultEncoding&quot; value=&quot;utf-8&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;maxUploadSize&quot; value=&quot;10485760&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;maxInMemorySize&quot; value=&quot;40960&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- å¤„ç†æ˜ å°„å™¨ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- å¤„ç†å™¨é€‚é…å™¨ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- è§†å›¾è§£æå™¨,æœ¬é¡¹ç›®å¯ä»¥ä¸ä½¿ç”¨è§†å›¾è§£æå™¨--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; id=&quot;internalResourceViewResolver&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- å‰ç¼€ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;prefix&quot; value=&quot;/WEB-INF/page/&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- åç¼€ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;suffix&quot; value=&quot;.jsp&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;order&quot; value=&quot;10&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>bean id=&quot;customObjectMapper&quot; class=&quot;com.ydlclass.configuration.CustomObjectMapper&quot;/<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--å…¨å±€å¼‚å¸¸å¤„ç†--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!--    <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;com.ydlclass.handler.GlobalExceptionResolver&quot;/<span class="hljs-symbol">&amp;gt;</span>--<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>mvc:annotation-driven<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>mvc:message-converters<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>!-- è‡ªå®šä¹‰Jacksonçš„objectMapper --<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>property name=&quot;objectMapper&quot; ref=&quot;customObjectMapper&quot;/<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>!-- è‡ªå®šä¹‰Jacksonçš„objectMapper --<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>property name=&quot;supportedMediaTypes&quot;<span class="hljs-symbol">&amp;gt;</span><br>                    <span class="hljs-symbol">&amp;lt;</span>list<span class="hljs-symbol">&amp;gt;</span><br>                        <span class="hljs-symbol">&amp;lt;</span>value<span class="hljs-symbol">&amp;gt;</span>text/plain;charset=UTF-8<span class="hljs-symbol">&amp;lt;</span>/value<span class="hljs-symbol">&amp;gt;</span><br>                        <span class="hljs-symbol">&amp;lt;</span>value<span class="hljs-symbol">&amp;gt;</span>application/json;charset=UTF-8<span class="hljs-symbol">&amp;lt;</span>/value<span class="hljs-symbol">&amp;gt;</span><br>                    <span class="hljs-symbol">&amp;lt;</span>/list<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>/property<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/mvc:message-converters<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/mvc:annotation-driven<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--å¤„ç†é™æ€èµ„æºï¼Œå‰ååˆ†ç¦»é¡¹ç›®ä¸éœ€è¦å¤„ç†é™æ€èµ„æº--<span class="hljs-symbol">&amp;gt;</span><br><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--æ‰«æmapperæ–‡ä»¶--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!--  è®©springmvcè‡ªå¸¦çš„æ³¨è§£ç”Ÿæ•ˆ  --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>mybatis:scan base-package=&quot;com.ydlclass.dao&quot;/<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!--æ•°æ®æº--<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;driverClassName&quot; value=&quot;$&#123;driverName&#125;&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;username&quot; value=&quot;$&#123;user&#125;&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- æ•´ä¸ªæ•´åˆå°±æ˜¯åœ¨å›´ç»•sqlSessionFactory --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;mapperLocations&quot; value=&quot;classpath:mapper/**/*.xml&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;configuration&quot;<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>bean class=&quot;org.apache.ibatis.session.Configuration&quot;<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>property name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/<span class="hljs-symbol">&amp;gt;</span><br>                <span class="hljs-symbol">&amp;lt;</span>property name=&quot;logPrefix&quot; value=&quot;ydlclass_&quot;/<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/property<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- æ³¨å…¥äº‹åŠ¡ç®¡ç†å™¨ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- å£°æ˜å¼äº‹åŠ¡ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- the transactional semantics... --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>tx:attributes<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- all methods starting with &#x27;get&#x27; are read-only --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>tx:method name=&quot;get*&quot; read-only=&quot;true&quot; propagation=&quot;SUPPORTS&quot;/<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>tx:method name=&quot;select*&quot; read-only=&quot;true&quot; propagation=&quot;SUPPORTS&quot;/<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- other methods use the default transaction settings (see below) --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>tx:method name=&quot;update*&quot; read-only=&quot;false&quot; propagation=&quot;REQUIRED&quot;/<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>tx:method name=&quot;delete*&quot; read-only=&quot;false&quot; propagation=&quot;REQUIRED&quot;/<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>tx:method name=&quot;insert*&quot; read-only=&quot;false&quot; propagation=&quot;REQUIRED&quot;/<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/tx:attributes<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/tx:advice<span class="hljs-symbol">&amp;gt;</span><br><br><span class="hljs-symbol">&amp;lt;</span>/beans<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>logbackæ—¥å¿—çš„é…ç½®æ–‡ä»¶ logback.xmlï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>configuration<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—å­˜æ”¾è·¯å¾„ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>property name=&quot;log.path&quot; value=&quot;D://ydl/logs&quot; /<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—è¾“å‡ºæ ¼å¼ --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>property name=&quot;log.pattern&quot; value=&quot;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;20&#125; - [%method,%line] - %msg%n&quot; /<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- æ§åˆ¶å°è¾“å‡º --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>appender name=&quot;console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>encoder<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>pattern<span class="hljs-symbol">&amp;gt;</span>$&#123;log.pattern&#125;<span class="hljs-symbol">&amp;lt;</span>/pattern<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/encoder<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/appender<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- ç³»ç»Ÿæ—¥å¿—è¾“å‡º --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>appender name=&quot;file_info&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>file<span class="hljs-symbol">&amp;gt;</span>$&#123;log.path&#125;/sys-info.log<span class="hljs-symbol">&amp;lt;</span>/file<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- å¾ªç¯æ”¿ç­–ï¼šåŸºäºæ—¶é—´åˆ›å»ºæ—¥å¿—æ–‡ä»¶ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—æ–‡ä»¶åæ ¼å¼ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>fileNamePattern<span class="hljs-symbol">&amp;gt;</span>$&#123;log.path&#125;/sys-info.%d&#123;yyyy-MM-dd&#125;.log<span class="hljs-symbol">&amp;lt;</span>/fileNamePattern<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—æœ€å¤§çš„å†å² 60å¤© --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>maxHistory<span class="hljs-symbol">&amp;gt;</span>60<span class="hljs-symbol">&amp;lt;</span>/maxHistory<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/rollingPolicy<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>encoder<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>pattern<span class="hljs-symbol">&amp;gt;</span>$&#123;log.pattern&#125;<span class="hljs-symbol">&amp;lt;</span>/pattern<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/encoder<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- è¿‡æ»¤çš„çº§åˆ« --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>level<span class="hljs-symbol">&amp;gt;</span>INFO<span class="hljs-symbol">&amp;lt;</span>/level<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- åŒ¹é…æ—¶çš„æ“ä½œï¼šæ¥æ”¶ï¼ˆè®°å½•ï¼‰ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>onMatch<span class="hljs-symbol">&amp;gt;</span>ACCEPT<span class="hljs-symbol">&amp;lt;</span>/onMatch<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- ä¸åŒ¹é…æ—¶çš„æ“ä½œï¼šæ‹’ç»ï¼ˆä¸è®°å½•ï¼‰ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>onMismatch<span class="hljs-symbol">&amp;gt;</span>DENY<span class="hljs-symbol">&amp;lt;</span>/onMismatch<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/filter<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/appender<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>appender name=&quot;file_error&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>file<span class="hljs-symbol">&amp;gt;</span>$&#123;log.path&#125;/sys-error.log<span class="hljs-symbol">&amp;lt;</span>/file<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>!-- å¾ªç¯æ”¿ç­–ï¼šåŸºäºæ—¶é—´åˆ›å»ºæ—¥å¿—æ–‡ä»¶ --<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—æ–‡ä»¶åæ ¼å¼ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>fileNamePattern<span class="hljs-symbol">&amp;gt;</span>$&#123;log.path&#125;/sys-error.%d&#123;yyyy-MM-dd&#125;.log<span class="hljs-symbol">&amp;lt;</span>/fileNamePattern<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- æ—¥å¿—æœ€å¤§çš„å†å² 60å¤© --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>maxHistory<span class="hljs-symbol">&amp;gt;</span>60<span class="hljs-symbol">&amp;lt;</span>/maxHistory<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/rollingPolicy<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>encoder<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>pattern<span class="hljs-symbol">&amp;gt;</span>$&#123;log.pattern&#125;<span class="hljs-symbol">&amp;lt;</span>/pattern<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/encoder<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- è¿‡æ»¤çš„çº§åˆ« --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>level<span class="hljs-symbol">&amp;gt;</span>ERROR<span class="hljs-symbol">&amp;lt;</span>/level<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- åŒ¹é…æ—¶çš„æ“ä½œï¼šæ¥æ”¶ï¼ˆè®°å½•ï¼‰ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>onMatch<span class="hljs-symbol">&amp;gt;</span>ACCEPT<span class="hljs-symbol">&amp;lt;</span>/onMatch<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>!-- ä¸åŒ¹é…æ—¶çš„æ“ä½œï¼šæ‹’ç»ï¼ˆä¸è®°å½•ï¼‰ --<span class="hljs-symbol">&amp;gt;</span><br>            <span class="hljs-symbol">&amp;lt;</span>onMismatch<span class="hljs-symbol">&amp;gt;</span>DENY<span class="hljs-symbol">&amp;lt;</span>/onMismatch<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>/filter<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/appender<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>!-- ç³»ç»Ÿæ¨¡å—æ—¥å¿—çº§åˆ«æ§åˆ¶  --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>logger name=&quot;com.ydl&quot; level=&quot;info&quot; /<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>!-- Springæ—¥å¿—çº§åˆ«æ§åˆ¶  --<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>logger name=&quot;org.springframework&quot; level=&quot;warn&quot; /<span class="hljs-symbol">&amp;gt;</span><br><br>    <span class="hljs-symbol">&amp;lt;</span>root level=&quot;info&quot;<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>appender-ref ref=&quot;console&quot; /<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>appender-ref ref=&quot;file_info&quot; /<span class="hljs-symbol">&amp;gt;</span><br>        <span class="hljs-symbol">&amp;lt;</span>appender-ref ref=&quot;file_error&quot; /<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>/root<span class="hljs-symbol">&amp;gt;</span><br><br><span class="hljs-symbol">&amp;lt;</span>/configuration<span class="hljs-symbol">&amp;gt;</span> <br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºCustomObjectMapperæ¥é…ç½®jacksonçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomObjectMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ObjectMapper</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomObjectMapper</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-comment">//å»æ‰é»˜è®¤çš„æ—¶é—´æˆ³æ ¼å¼</span><br>        configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, <span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">//è®¾ç½®ä¸ºä¸œå…«åŒº</span><br>        setTimeZone(TimeZone.getTimeZone(<span class="hljs-string">&quot;GMT+8&quot;</span>));<br>        <span class="hljs-comment">//è®¾ç½®æ—¥æœŸè½¬æ¢yyyy-MM-dd HH:mm:ss</span><br>        setDateFormat(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));<br>        <span class="hljs-comment">// è®¾ç½®è¾“å…¥:ç¦æ­¢æŠŠPOJOä¸­å€¼ä¸ºnullçš„å­—æ®µæ˜ å°„åˆ°jsonå­—ç¬¦ä¸²ä¸­</span><br>        configure(SerializationFeature.WRITE_NULL_MAP_VALUES, <span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">// ç©ºå€¼ä¸åºåˆ—åŒ–</span><br>        setSerializationInclusion(JsonInclude.Include.NON_NULL);<br>        <span class="hljs-comment">// ååºåˆ—åŒ–æ—¶ï¼Œå±æ€§ä¸å­˜åœ¨çš„å…¼å®¹å¤„ç†</span><br>        getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);<br>        <span class="hljs-comment">// åºåˆ—åŒ–æšä¸¾æ˜¯ä»¥toString()æ¥è¾“å‡ºï¼Œé»˜è®¤falseï¼Œå³é»˜è®¤ä»¥name()æ¥è¾“å‡º</span><br>        configure(SerializationFeature.WRITE_ENUMS_USING_TO_STRING, <span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€æ„å»ºç›®å½•ç»“æ„å¹¶æµ‹è¯•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5ã€æ„å»ºç›®å½•ç»“æ„å¹¶æµ‹è¯•">#</a> 5ã€æ„å»ºç›®å½•ç»“æ„å¹¶æµ‹è¯•ï¼š</h3><figure><img class="lazy" alt="image-20220120132303260" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120132303260-c2ce361e.png" tabindex="0"/><figcaption>image-20220120132303260</figcaption></figure><p>æµ‹è¯•controller</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;user&quot;)</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">12</span>);<br>    &#125;<br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">12</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>&#123;<br><br>        String username;<br>        Integer age;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String username, Integer age)</span> &#123;<br>            <span class="hljs-built_in">this</span>.username = username;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> username;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> &#123;<br>            <span class="hljs-built_in">this</span>.username = username;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> age;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨æˆåŠŸï¼š</p><figure><img class="lazy" alt="image-20220120133909069" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120133909069-d49b2319.png" tabindex="0"/><figcaption>image-20220120133909069</figcaption></figure><h2 id="å››ã€å‰åç«¯è”è°ƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å››ã€å‰åç«¯è”è°ƒ">#</a> å››ã€å‰åç«¯è”è°ƒ</h2><h3 id="_1ã€è·¨åŸŸé—®é¢˜" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€è·¨åŸŸé—®é¢˜">#</a> 1ã€è·¨åŸŸé—®é¢˜</h3><p>åœ¨å‰ç«¯app.vueä¸­ä½¿ç”¨mountedå°è¯•å‘é€ä¸€ä¸ªæµ‹è¯•è¯·æ±‚ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123;listUser&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/api/system/user&#x27;</span><br><br><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">listUser</span>().<span class="hljs-title function_">then</span>(res =&amp;gt; &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)<br>    &#125;).<span class="hljs-title function_">catch</span>(err =&amp;gt; &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;error&quot;</span>+err)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ±‚æ˜¯å‘é€äº†ï¼Œä½†æ˜¯ä¸èƒ½æˆåŠŸè¯·æ±‚ï¼Œå¾ˆæ˜æ˜¾äº§ç”Ÿäº†è·¨è¶Šé—®é¢˜ï¼š</p><figure><img class="lazy" alt="image-20220120135041384" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120135041384-2dc5f319.png" tabindex="0"/><figcaption>image-20220120135041384</figcaption></figure><h3 id="_2ã€æœåŠ¡ç«¯è§£å†³è·¨åŸŸ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€æœåŠ¡ç«¯è§£å†³è·¨åŸŸ">#</a> 2ã€æœåŠ¡ç«¯è§£å†³è·¨åŸŸ</h3><p>ï¼ˆ1ï¼‰åœ¨controlleræˆ–æ–¹æ³•ä¸ŠåŠ å¦‚ä¸‹æ³¨è§£</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@CrossOrigin</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿›è¡Œå…¨å±€é…ç½®</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>mvc:cors<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>mvc:mapping path=&quot;/*&quot; allowed-methods=&quot;*&quot; allowed-origins=&quot;*&quot;/<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>/mvc:cors<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼Œå®Œæˆ</p><figure><img class="lazy" alt="image-20220120135214717" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220120135214717-ccb28ed9.png" tabindex="0"/><figcaption>image-20220120135214717</figcaption></figure><h3 id="_3ã€å‰ç«¯é…ç½®ä»£ç†" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€å‰ç«¯é…ç½®ä»£ç†">#</a> 3ã€å‰ç«¯é…ç½®ä»£ç†</h3><blockquote><p>å°†æœåŠ¡ç«¯çš„apiå…¨éƒ¨å…è®¸è·¨åŸŸè®¿é—®å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ—¶å€™å¯ä»¥é€‰æ‹©åœ¨å‰ç«¯æœåŠ¡å™¨ä¸­é…ç½®åå‘ä»£ç†å®ç°è·¨åŸŸã€‚</p></blockquote><p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬çš„å‰ç«¯å·¥ç¨‹ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ç«¯å£å¯åŠ¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„å‰ç«¯å·¥ç¨‹é»˜è®¤å¯åŠ¨äº†ä¸€ä¸ªwebé™æ€æœåŠ¡å™¨ã€‚æœ‰äº†ä»£ç†æœåŠ¡å™¨ï¼Œæˆ‘ä»¬çš„æ€è·¯ä¹Ÿå°±æœ‰äº†ã€‚å¦‚ä¸‹å›¾ï¼š</p><figure><img class="lazy" alt="image-20220215142433095" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220215142433095-8a587e63.png" tabindex="0"/><figcaption>image-20220215142433095</figcaption></figure><p>æŸ¥é˜…vue-cliçš„ç›¸å…³é…ç½®ï¼š<a href="https://cli.vuejs.org/zh/config/%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%91%E7%8E%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5vue-cli%E7%9A%84%E9%85%8D%E7%BD%AE%E6%98%AF%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E7%9A%84%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%88%91%E4%BB%AC%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA" rel="noopener noreferrer" target="_blank">https://cli.vuejs.org/zh/config/ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¯ä»¥vue-cliçš„é…ç½®æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåªéœ€è¦æˆ‘ä»¬å»ºç«‹ä¸€ä¸ª<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> vue.config.js é…ç½®æ–‡ä»¶æ–‡ä»¶ã€‚</p><h4 id="_1-ä¿®æ”¹vueçš„ç«¯å£-å¹¶é…ç½®ä»£ç†" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-ä¿®æ”¹vueçš„ç«¯å£-å¹¶é…ç½®ä»£ç†">#</a> ï¼ˆ1ï¼‰ä¿®æ”¹vueçš„ç«¯å£ï¼Œå¹¶é…ç½®ä»£ç†</h4><p>åœ¨å·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶ã€vue.config.jsã€‘ï¼Œé…ç½®ä»£ç†æœåŠ¡å™¨ï¼Œå°†æ‰€æœ‰çš„è¯·æ±‚äº¤ç”±ä»£ç†å‘é€åˆ°åç«¯æœåŠ¡å™¨ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">devServer</span>: &#123;<br>        <span class="hljs-attr">port</span>: <span class="hljs-number">8088</span>,<br>        <span class="hljs-attr">proxy</span>: <span class="hljs-string">&#x27;http://localhost:8080/ydl&#x27;</span><br>    &#125;<br>  &#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-ä¿®æ”¹axiosçš„é…ç½®" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-ä¿®æ”¹axiosçš„é…ç½®">#</a> ï¼ˆ2ï¼‰ä¿®æ”¹axiosçš„é…ç½®</h4><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åˆ›å»ºaxioså®ä¾‹</span><br><span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-comment">// axiosä¸­è¯·æ±‚é…ç½®æœ‰baseURLé€‰é¡¹ï¼Œè¡¨ç¤ºè¯·æ±‚URLå…¬å…±éƒ¨åˆ†</span><br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:8088&#x27;</span>,<br>    <span class="hljs-comment">// è¶…æ—¶å–æ¶ˆ</span><br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,<br>    <span class="hljs-comment">// è®¾ç½®Content-Typeï¼Œè§„å®šäº†å‰åç«¯çš„äº¤äº’ä½¿ç”¨json</span><br>    <span class="hljs-attr">headers</span>: &#123;<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json;charset=utf-8&#x27;</span>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼ŒæˆåŠŸã€‚</p><h2 id="äº”ã€å…³äºè®¤è¯çš„æ–°è®¨è®º" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#äº”ã€å…³äºè®¤è¯çš„æ–°è®¨è®º">#</a> äº”ã€å…³äºè®¤è¯çš„æ–°è®¨è®º</h2><p>è®¤è¯å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ç™»é™†ï¼Œä½†æ˜¯éšç€é¡¹ç›®ç»“æ„çš„å˜åŒ–ï¼Œè®¤è¯çš„æ¨¡å¼ä¹Ÿä¼šæœ‰æ‰€æ”¹å˜ã€‚</p><h3 id="_1ã€å®Œæˆçš„ç™»é™†é¡µé¢" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€å®Œæˆçš„ç™»é™†é¡µé¢">#</a> 1ã€å®Œæˆçš„ç™»é™†é¡µé¢</h3><p>å°†App.vueä¿®æ”¹å¦‚ä¸‹ï¼Œå°†ç¨‹åºçš„å…¥å£ä»…ä»…ä¿ç•™ä¸€ä¸ª<code>&lt;router-view/&gt;</code>ï¼Œä»¥åå°±å¯ä»¥ä½¿ç”¨å•é¡µé¢çš„æ–¹å¼é€šè¿‡è·¯ç”±è¿›è¡Œé¡µé¢è·³è½¬äº†ã€‚</p><div class="language-vue line-numbers-mode" data-ext="vue"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight plaintext"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&amp;lt;template&amp;gt;<br>  &amp;lt;router-view/&amp;gt;<br>&amp;lt;/template&amp;gt;<br><br>&amp;lt;script&amp;gt;<br><br>&amp;lt;/script&amp;gt;<br><br>&amp;lt;style&amp;gt;<br><br>&amp;lt;/style&amp;gt;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å¢ç™»é™†ç»„ä»¶ï¼Œåœ¨srcä¸‹çš„compomentç›®å½•æ–°å»ºlogin.vue</p><div class="language-vue line-numbers-mode" data-ext="vue"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight plaintext"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs vue">&amp;lt;template&amp;gt;<br>  &amp;lt;el-container&amp;gt;<br>    &amp;lt;el-aside width=&quot;790px&quot;<br>      &amp;gt;&amp;lt;el-image<br>        fit=&quot;fill&quot;<br>        :src=&quot;require(&#x27;@/assets/image/login_left.png&#x27;)&quot;<br>      &amp;gt;&amp;lt;/el-image<br>    &amp;gt;&amp;lt;/el-aside&amp;gt;<br>    &amp;lt;el-main&amp;gt;<br>      &amp;lt;el-card class=&quot;box-card login-card&quot;&amp;gt;<br>        &amp;lt;span class=&quot;login-title&quot;&amp;gt;å…ƒåŠ¨åŠ›åå°ç®¡ç†ç³»ç»Ÿ&amp;lt;/span&amp;gt;<br>        &amp;lt;span class=&quot;login-tip&quot;&amp;gt;welcome æ¬¢è¿ç™»é™†&amp;lt;/span&amp;gt;<br>        &amp;lt;el-form<br>          ref=&quot;user&quot;<br>          :model=&quot;user&quot;<br>          label-width=&quot;80px&quot;<br>        &amp;gt;<br>          &amp;lt;el-form-item label=&quot;ç”¨æˆ·å&quot; prop=&quot;username&quot;&amp;gt;<br>            &amp;lt;el-input<br>              v-model=&quot;user.username&quot;<br>              placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·&quot;<br>            &amp;gt;&amp;lt;/el-input&amp;gt;<br>          &amp;lt;/el-form-item&amp;gt;<br>          &amp;lt;el-form-item label=&quot;å¯†ç &quot; prop=&quot;password&quot;&amp;gt;<br>            &amp;lt;el-input<br>              v-model=&quot;user.password&quot;<br>              type=&quot;password&quot;<br>              placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;<br>              show-password<br>            &amp;gt;&amp;lt;/el-input&amp;gt;<br>          &amp;lt;/el-form-item&amp;gt;<br>          &amp;lt;el-form-item&amp;gt;<br>            &amp;lt;el-button type=&quot;primary&quot; @click=&quot;login&quot;&amp;gt;ç™»é™†&amp;lt;/el-button&amp;gt;<br>          &amp;lt;/el-form-item&amp;gt;<br>        &amp;lt;/el-form&amp;gt;<br>      &amp;lt;/el-card&amp;gt;<br>    &amp;lt;/el-main&amp;gt;<br>  &amp;lt;/el-container&amp;gt;<br>&amp;lt;/template&amp;gt;<br><br>&amp;lt;script&amp;gt;<br>export default &#123;<br>  name: &quot;login&quot;,<br>  data() &#123;<br>    return &#123;<br>      // ç”¨æˆ·ä¿¡æ¯<br>      url: &quot;../../assets/image/login_left.png&quot;,<br>      user: &#123;<br>        username: &quot;admin&quot;,<br>        password: &quot;123456&quot;,<br>      &#125;,<br>    &#125;;<br>  &#125;<br>&#125;;<br>&amp;lt;/script&amp;gt;<br><br>&amp;lt;style scope&amp;gt;<br>.el-image &#123;<br>  height: 885px;<br>  width: 750px;<br>&#125;<br>.el-main &#123;<br>  position: relative;<br>&#125;<br>.login-card &#123;<br>  position: absolute;<br>  top: 0;<br>  left: 0;<br>  bottom: 0;<br>  right: 0;<br>  margin: auto;<br>  width: 480px;<br>  height: 400px;<br>  padding: 50px;<br>&#125;<br>.login-title &#123;<br>  width: 459px;<br>  height: 70px;<br>  font-size: 40px;<br>  font-family: AlibabaPuHuiTiB;<br>  color: #333333;<br>  line-height: 90px;<br>  letter-spacing: 1px;<br>  font-weight: 800;<br>  display: block;<br>  text-align: left;<br>&#125;<br>.login-tip &#123;<br>  width: 319px;<br>  height: 70px;<br>  font-size: 30px;<br>  font-family: PingFangSC-Regular, PingFang SC;<br>  font-weight: 400;<br>  color: #999999;<br>  line-height: 90px;<br>  letter-spacing: 1px;<br>  display: block;<br>  text-align: left;<br>  margin-bottom: 30px;<br>&#125;<br>&amp;lt;/style&amp;gt;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ–°å¢ä¸€ä¸ªå…¬å…±çš„cssï¼Œå¹¶å¯¼å…¥ï¼š</p><div class="language-css line-numbers-mode" data-ext="css"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight css"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>&#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-id">#app</span> &#123;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨main.jså¯¼å…¥å³å¯ï¼Œå¯¼å…¥åä¼šè‡ªåŠ¨åœ¨æ¨¡æ¿ä¸­å¼•å…¥è¯¥cssï¼Œä»¥åå¦‚æœæœ‰å…¬å…±çš„cssæ ·å¼ï¼Œå°±åœ¨è¿™é‡Œå†™ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">import &#x27;@/assets/style/common.css&#x27;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>æˆ‘ä»¬è¿˜éœ€è¦æ–°å¢ä¸€ä¸ªä¸»é¡µç»„ä»¶ï¼š</p><div class="language-vue line-numbers-mode" data-ext="vue"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight plaintext"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs vue">&amp;lt;template&amp;gt;<br>  &amp;lt;el-container&amp;gt;<br><br>      &amp;lt;el-aside width=&quot;200px&quot;&amp;gt;<br>        &amp;lt;el-row&amp;gt;<br>          &amp;lt;el-col :span=&quot;24&quot;&amp;gt;<br>            &amp;lt;el-image<br>              style=&quot;<br>                width: 120px;<br>                height: 60px;<br>                display: block;<br>                margin: 40px auto;<br>              &quot;<br>              fit=&quot;fill&quot;<br>              :src=&quot;require(&#x27;@/assets/image/main_logo.png&#x27;)&quot;<br>            &amp;gt;&amp;lt;/el-image&amp;gt;<br>            &amp;lt;el-menu<br>              active-text-color=&quot;#ffd04b&quot;<br>              background-color=&quot;#191A22&quot;<br>              class=&quot;el-menu-vertical-demo&quot;<br>              default-active=&quot;2&quot;<br>              text-color=&quot;#fff&quot;<br>            &amp;gt;<br>              &amp;lt;el-sub-menu index=&quot;1&quot;&amp;gt;<br>                &amp;lt;template #title&amp;gt;<br>                  &amp;lt;el-icon&amp;gt;&amp;lt;/el-icon&amp;gt;<br>                  &amp;lt;span&amp;gt;ç³»ç»Ÿç®¡ç†&amp;lt;/span&amp;gt;<br>                &amp;lt;/template&amp;gt;<br><br>                &amp;lt;el-menu-item index=&quot;1-1&quot; @click=&quot;open(&#x27;user&#x27;)&quot;&amp;gt;<br>                  ç”¨æˆ·ç®¡ç†&amp;lt;/el-menu-item<br>                &amp;gt;<br>                &amp;lt;el-menu-item index=&quot;1-2&quot; @click=&quot;open(&#x27;role&#x27;)&quot;&amp;gt;<br>                  è§’è‰²ç®¡ç†&amp;lt;/el-menu-item<br>                &amp;gt;<br>              &amp;lt;/el-sub-menu&amp;gt;<br>              &amp;lt;el-menu-item index=&quot;2&quot;&amp;gt;<br>                &amp;lt;el-icon&amp;gt;&amp;lt;/el-icon&amp;gt;<br>                &amp;lt;span&amp;gt;å®¢æˆ·ç®¡ç†&amp;lt;/span&amp;gt;<br>              &amp;lt;/el-menu-item&amp;gt;<br>            &amp;lt;/el-menu&amp;gt;<br>          &amp;lt;/el-col&amp;gt;<br>        &amp;lt;/el-row&amp;gt;<br>      &amp;lt;/el-aside&amp;gt;<br>      &amp;lt;el-container&amp;gt;<br>        &amp;lt;el-header v-html=&quot;&#x27;&amp;lt;button onclick=\&#x27;alert(1)\&#x27;&amp;gt;æˆ‘æ˜¯æ”»å‡»è€…çš„æŒ‰é’®&amp;lt;/button&amp;gt;&#x27;&quot;&amp;gt;&amp;lt;/el-header&amp;gt;<br>        &amp;lt;!--è¿›è¡Œè·¯ç”±è·³è½¬--&amp;gt;<br>        &amp;lt;el-main&amp;gt;<br>          &amp;lt;router-view /&amp;gt;<br>        &amp;lt;/el-main&amp;gt;<br>      &amp;lt;/el-container&amp;gt;<br>  &amp;lt;/el-container&amp;gt;<br>&amp;lt;/template&amp;gt;<br>&amp;lt;script setup&amp;gt;<br>&amp;lt;/script&amp;gt;<br><br>&amp;lt;style scoped&amp;gt;<br>.el-container &#123;<br>  height: 100%;<br>&#125;<br><br>.el-header &#123;<br>  margin-bottom: 20px;<br>  background: #e9eef3;<br>&#125;<br><br>.el-footer &#123;<br>  line-height: 60px;<br>&#125;<br><br>.el-aside &#123;<br>  background-color: #191a22;<br>  color: var(--el-text-color-primary);<br>  text-align: center;<br>  line-height: 200px;<br>&#125;<br><br>.el-main &#123;<br>  background-color: #fcfcfc;<br>  color: var(--el-text-color-primary);<br>  text-align: center;<br>&#125;<br>&amp;lt;/style&amp;gt;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å¢è·¯ç”±ä¿¡æ¯</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> routes = [&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;login&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>    <span class="hljs-attr">component</span>: () =&amp;gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/login&#x27;</span>),<br>&#125;, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;main&#x27;</span>,<br>    <span class="hljs-attr">alias</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/main&#x27;</span>,<br>    <span class="hljs-attr">component</span>: () =&amp;gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/main&#x27;</span>)<br>&#125;]<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å¢api</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ç”¨æˆ·ç™»é™†</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>        <span class="hljs-attr">data</span>: data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€ä¼ ç»Ÿçš„ç™»é™†é€»è¾‘" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€ä¼ ç»Ÿçš„ç™»é™†é€»è¾‘">#</a> 2ã€ä¼ ç»Ÿçš„ç™»é™†é€»è¾‘</h3><p>æ ¹æ®ä¼ ç»Ÿçš„ç™»é™†é€»è¾‘æˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°ï¼Œè™½ç„¶å‰ååˆ†ç¦»è¿™ç§æƒ…å†µä¸‹ä»–æ˜¯æœ‰é—®é¢˜çš„ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è¦å›é¡¾ä¸€ä¸‹ã€‚</p><figure><img class="lazy" alt="image-20220121163451108" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220121163451108-77682ae2.png" tabindex="0"/><figcaption>image-20220121163451108</figcaption></figure><p>å¯¹äºå‰ç«¯è€Œè¨€ï¼Œç™»é™†çš„é€»è¾‘ä¸å¤–ä¹å°±æ˜¯å‘é€ç”¨æˆ·åå’Œå¯†ç ï¼Œåç«¯æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç å¤„ç†ç™»é™†ä¸šåŠ¡ï¼Œä¸€æ—¦ç™»é™†æˆåŠŸå°±è·³è½¬åˆ°ä¸»é¡µã€‚</p><p>åœ¨ç™»é™†æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€äº›ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸å¦¨å°†ç™»é™†çš„é€»è¾‘å®šä¹‰åœ¨vuexä¸­çš„actionså½“ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">mutations</span>: &#123;<br>    <span class="hljs-title function_">SAVE_USER</span>(<span class="hljs-params">state, data</span>) &#123;<br>        state.<span class="hljs-property">user</span> = data;<br>    &#125;<br><br>&#125;,<br><span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">      * æ­¤å¤„ç”¨æ¥å¤„ç†ç™»é™†çš„é€»è¾‘ï¼Œå¦‚æœç™»é™†æˆåŠŸä¼šåœ¨vuexä¸­ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="hljs-comment">      * vuexä¸­çš„ç”¨æˆ·ä¿¡æ¯ç”¨æ¥æŠ¥çº¸ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; param0 </span><br><span class="hljs-comment">      * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; user </span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-title function_">LOGIN</span>(<span class="hljs-params">&#123; commit &#125;, user</span>) &#123;<br>        <span class="hljs-title function_">login</span>(user).<span class="hljs-title function_">then</span>((res) =&amp;gt; &#123;<br>            <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) &#123;<br>                <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;SAVE_USER&#x27;</span>, user);<br>                router.<span class="hljs-title function_">push</span>(&#123;<br>                    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;main&quot;</span><br>                &#125;);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**æ³¨æ„æ€è€ƒï¼š**ä¼ ç»Ÿçš„ç™»é™†æ–¹å¼åœ¨è¿™é‡Œå…¶å®æ˜¯ç»ä¸èµ·æ¨æ•²ï¼Œå› ä¸ºåœ¨å‰ååˆ†ç¦»çš„é¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®å’Œåç«¯é¡¹ç›®ï¼Œå¾€å¾€ä¸åœ¨ç”¨ä¸€ä¸ªåŸŸå½“ä¸­ï¼ˆå‰åç«¯çš„é¡¹ç›®éƒ½æ˜¯åœ¨å„è‡ªçš„æœåŠ¡å™¨ä¸­éƒ¨ç½²ï¼‰ã€‚æ‰€ä»¥ï¼Œåœ¨å½“å‰çš„ç¯å¢ƒä¸­ï¼Œcookieä¼šå¤±æ•ˆï¼Œè¿™æ ·ä¼šå¯¼è‡´httpæ— æ³•é€šè¿‡session+cookieçš„æ–¹å¼è¿›è¡Œä¿æŒä¼šè¯çŠ¶æ€ã€‚</p><h3 id="_3ã€æ¨¡æ‹Ÿå‡çº§" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€æ¨¡æ‹Ÿå‡çº§">#</a> 3ã€æ¨¡æ‹Ÿå‡çº§</h3><p>å…¶å®ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ¯æ¬¡è¯·æ±‚æºå¸¦ä¸€ä¸ªä»¤ç‰Œå°±å¥½ï¼Œæ—¢ç„¶cookie+sessionçš„æ–¹å¼ä¸åˆé€‚äº†ï¼Œæˆ‘ä»¬ä¸å¦¨è‡ªå·±æ¨¡æ‹Ÿä¸€å¥—è‡ªå·±çš„ç™»å½•é€»è¾‘ï¼Œä½¿ç”¨header+redisæ¥å®ç°ã€‚</p><figure><img class="lazy" alt="image-20220215154322742" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220215154322742-cb23e806.png" tabindex="0"/><figcaption>image-20220215154322742</figcaption></figure><p>ç›®å‰æ€è·¯å·²ç»åŸºæœ¬ç¡®å®šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»™å¤§å®¶å¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µã€‚</p><h2 id="å…­ã€rbacæƒé™ç³»ç»Ÿ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å…­ã€rbacæƒé™ç³»ç»Ÿ">#</a> å…­ã€RBACæƒé™ç³»ç»Ÿ</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç³»ç»Ÿï¼Œé™¤äº†ç™»é™†ä¹Ÿå°±æ˜¯è®¤è¯ä¹‹å¤–ï¼Œè¿˜åº”è¯¥æœ‰ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œå°±æ˜¯é‰´æƒï¼Œä½¿ç”¨rbacå¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚</p><ul><li>è®¤è¯-è§„å®šäº†è°èƒ½å¤Ÿç™»é™†</li><li>é‰´æƒ-è§„å®šäº†è°èƒ½è®¿é—®é‚£äº›æ¥å£ï¼Œæµè§ˆé‚£äº›é¡µé¢ï¼Œä½¿ç”¨å“ªäº›åŠŸèƒ½ï¼Œ</li></ul><h3 id="_1ã€æ¦‚è¿°" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€æ¦‚è¿°">#</a> 1ã€æ¦‚è¿°</h3><h4 id="_1-rbacæ¨¡å‹æ¦‚è¿°" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-rbacæ¨¡å‹æ¦‚è¿°">#</a> ï¼ˆ1ï¼‰RBACæ¨¡å‹æ¦‚è¿°</h4><p>RBACæ¨¡å‹ï¼ˆRole-Based Access Controlï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰ï¼šå…¶é‰´æƒçš„è¿‡ç¨‹å¯ä»¥æŠ½è±¡åœ°æ¦‚æ‹¬ä¸ºï¼šè° æ˜¯ ä»€ä¹ˆè§’è‰² æœ‰é‚£äº›æƒé™</p><h4 id="_2-rbacçš„ç»„æˆ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-rbacçš„ç»„æˆ">#</a> ï¼ˆ2ï¼‰RBACçš„ç»„æˆ</h4><p>åœ¨RBACæ¨¡å‹é‡Œé¢ï¼Œæœ‰3ä¸ªåŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>ç”¨æˆ·ã€è§’è‰²å’Œæƒé™ã€‚</strong></p><p>RBACé€šè¿‡å®šä¹‰è§’è‰²çš„æƒé™ï¼Œå¹¶å¯¹ç”¨æˆ·<strong>æˆäºˆæŸä¸ªè§’è‰²</strong>ä»è€Œæ¥<strong>æ§åˆ¶ç”¨æˆ·çš„æƒé™</strong>ï¼Œå®ç°äº†ç”¨æˆ·å’Œæƒé™çš„é€»è¾‘åˆ†ç¦»ï¼ˆåŒºåˆ«äºACLæ¨¡å‹ï¼‰ï¼Œæå¤§åœ°æ–¹ä¾¿äº†æƒé™çš„ç®¡ç†</p><p>åœ¨è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€äº›åè¯ï¼š</p><ul><li><strong>Userï¼ˆç”¨æˆ·ï¼‰</strong>ï¼šæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å”¯ä¸€çš„UIDè¯†åˆ«ï¼Œå¹¶è¢«æˆäºˆä¸åŒçš„è§’è‰²</li><li><strong>Roleï¼ˆè§’è‰²ï¼‰</strong>ï¼šä¸åŒè§’è‰²å…·æœ‰ä¸åŒçš„æƒé™ï¼Œæ¯”å¦‚ï¼šäººäº‹ã€ä¼šè®¡ç­‰</li><li><strong>Permissionï¼ˆæƒé™</strong>ï¼‰ï¼šè®¿é—®æƒé™ï¼Œæ¯”å¦‚</li><li>ç”¨æˆ·-è§’è‰²æ˜ å°„ï¼šç”¨æˆ·å’Œè§’è‰²ä¹‹é—´çš„æ˜ å°„å…³ç³»</li><li>è§’è‰²-æƒé™æ˜ å°„ï¼šè§’è‰²å’Œæƒé™ä¹‹é—´çš„æ˜ å°„</li></ul><p>å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><img class="lazy" alt="img" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/rbacrole-based-access-control-1-cf627d72.png" tabindex="0"/><figcaption>img</figcaption></figure><p>ä¾‹å¦‚ä¸‹å›¾ï¼Œç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è¢«æˆäºˆä¸åŒçš„æƒé™ï¼Œæ™®é€šç”¨æˆ·åªèƒ½å»ä¿®æ”¹å’ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯ï¼Œè€Œä¸èƒ½åˆ›å»ºç”¨æˆ·å’Œå†»ç»“ç”¨æˆ·ï¼Œè€Œç®¡ç†å‘˜ç”±äºè¢«æˆäºˆæ‰€æœ‰æƒé™ï¼Œæ‰€ä»¥å¯ä»¥åšæ‰€æœ‰æ“ä½œã€‚</p><figure><img class="lazy" alt="rbacè¯´æ˜å›¾" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/rbac-demo-e1a34431.png" tabindex="0"/><figcaption>rbacè¯´æ˜å›¾</figcaption></figure><blockquote><p>å®ŒæˆRBACæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡äº”å¼ è¡¨ï¼Œå¦‚ä¸‹ï¼š</p></blockquote><p>ç”¨æˆ·è¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_user`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_user`  (<br>  `user_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `user_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·è´¦å·&#x27;</span>,<br>  `nick_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·æ˜µç§°&#x27;</span>,<br>  `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·é‚®ç®±&#x27;</span>,<br>  `phonenumber` <span class="hljs-type">varchar</span>(<span class="hljs-number">11</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ‰‹æœºå·ç &#x27;</span>,<br>  `sex` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”· 1å¥³ 2æœªçŸ¥ï¼‰&#x27;</span>,<br>  `avatar` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;å¤´åƒåœ°å€&#x27;</span>,<br>  `password` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;å¯†ç &#x27;</span>,<br>  `status` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;å¸å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>,<br>  `del_flag` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨å­˜åœ¨ 2ä»£è¡¨åˆ é™¤ï¼‰&#x27;</span>,<br>  `login_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;æœ€åç™»å½•IP&#x27;</span>,<br>  `login_date` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æœ€åç™»å½•æ—¶é—´&#x27;</span>,<br>  `create_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºè€…&#x27;</span>,<br>  `create_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `update_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°è€…&#x27;</span>,<br>  `update_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`user_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”¨æˆ·ä¿¡æ¯è¡¨&#x27;</span>;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- å¢åŠ å‡ æ¡ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_user` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ydl_admin&#x27;</span>, <span class="hljs-string">&#x27;ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;253546544@qq.com&#x27;</span>, <span class="hljs-string">&#x27;18888888888&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;xxxxxx&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;10.25.245.45&#x27;</span>, <span class="hljs-string">&#x27;2022-01-23 15:50:27&#x27;</span>, <span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;2022-01-23 15:50:48&#x27;</span>, <span class="hljs-string">&#x27;ydl&#x27;</span>, <span class="hljs-string">&#x27;2022-01-26 15:50:53&#x27;</span>);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§’è‰²è¡¨ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for ydl_role</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_role`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_role`  (<br>  `role_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  `role_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²åç§°&#x27;</span>,<br>  `role_tag` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²æ ‡ç­¾&#x27;</span>,<br>  `role_sort` <span class="hljs-type">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ˜¾ç¤ºé¡ºåº&#x27;</span>,<br>  `status` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>,<br>  `del_flag` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨å­˜åœ¨ 1ä»£è¡¨åˆ é™¤ï¼‰&#x27;</span>,<br>  `create_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºè€…&#x27;</span>,<br>  `create_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `update_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°è€…&#x27;</span>,<br>  `update_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`role_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB AUTO_INCREMENT <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è§’è‰²ä¿¡æ¯è¡¨&#x27;</span> ;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of ydl_role</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_role` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;2022-01-28 15:57:57&#x27;</span>, <span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;2022-01-29 15:58:04&#x27;</span>);<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨æˆ·-è§’è‰²ä¸­é—´è¡¨</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for sys_user_role</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_user_role`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_user_role`  (<br>  `user_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `role_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`user_id`, `role_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”¨æˆ·å’Œè§’è‰²å…³è”è¡¨&#x27;</span>;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of sys_user_role</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_user_role` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æƒé™è¡¨ï¼Œè¿™ä¸ªæƒé™è¡¨æ˜¯ä¸€ä¸ªå‡çº§åæƒé™è¡¨ï¼ˆæœ€ç®€å•çš„å®ç°æœ‰idå’Œæƒé™æ ‡è¯†å°±å¯ä»¥äº†ï¼‰</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for ydl_menu</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_menu`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_menu`  (<br>  `menu_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;èœå•ID&#x27;</span>,<br>  `menu_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>)  <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•åç§°&#x27;</span>,<br>  `perms` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æƒé™æ ‡è¯†&#x27;</span>,<br>  `parent_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;çˆ¶èœå•ID&#x27;</span>,<br>  `order_num` <span class="hljs-type">int</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¾ç¤ºé¡ºåº&#x27;</span>,<br>  `path` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;è·¯ç”±åœ°å€&#x27;</span>,<br>  `component` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç»„ä»¶è·¯å¾„&#x27;</span>,<br>  `menu_type` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;èœå•ç±»å‹ï¼ˆMç›®å½• Cèœå• FæŒ‰é’®ï¼‰&#x27;</span>,<br>  `visible` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;èœå•çŠ¶æ€ï¼ˆ0æ˜¾ç¤º 1éšè—ï¼‰&#x27;</span>,<br>  `icon` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;#&#x27;</span> COMMENT <span class="hljs-string">&#x27;èœå•å›¾æ ‡&#x27;</span>,<br>  `create_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºè€…&#x27;</span>,<br>  `create_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `update_by` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>)  <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°è€…&#x27;</span>,<br>  `update_time` datetime <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`menu_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;èœå•æƒé™è¡¨&#x27;</span> ;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of ydl_menu</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ç³»ç»Ÿç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-string">&#x27;null&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;#&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:user&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;system/user/index&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;#&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;è§’è‰²ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:role&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;system/role/index&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;#&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;èœå•ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:menu&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;system/menu/index&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;#&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-keyword">NULL</span>);<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§’è‰²å’Œæƒé™çš„ä¸­é—´è¡¨</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for sys_role_menu</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_role_menu`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_role_menu`  (<br>  `role_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  `menu_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`role_id`, `menu_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è§’è‰²å’Œèœå•å…³è”è¡¨&#x27;</span>;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of sys_role_menu</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_role_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_role_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_role_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `ydl_role_menu` <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æœ¬å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€å¼ è®°å½•æ“ä½œæ—¥å¿—çš„è¡¨ï¼Œæˆ‘ä»¬ä¸€èµ·è®¾è®¡å¥½ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight sql"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `ydl_oper_log`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ydl_oper_log`  (<br>  `oper_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;æ—¥å¿—ä¸»é”®&#x27;</span>,<br>  `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;æ“ä½œæ¨¡å—&#x27;</span>,<br>  `business_type` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹&#x27;</span>,<br>  `<span class="hljs-keyword">method</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;apiæ–¹æ³•&#x27;</span>,<br>  `request_method` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;è¯·æ±‚æ–¹å¼&#x27;</span>,<br>  `oper_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;æ“ä½œäººå‘˜&#x27;</span>,<br>  `oper_url` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;è¯·æ±‚url&#x27;</span>,<br>  `oper_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;æ“ä½œåœ°å€&#x27;</span>,<br>  `status` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œçŠ¶æ€&#x27;</span>,<br>  `errorMsg` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)  COMMENT <span class="hljs-string">&#x27;é”™è¯¯æ¶ˆæ¯&#x27;</span>,<br>  `operTime` datetime(<span class="hljs-number">0</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`oper_id`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE <span class="hljs-operator">=</span> InnoDB <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> <span class="hljs-operator">=</span> utf8mb4_0900_ai_ci COMMENT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;æ“ä½œæ—¥å¿—&#x27;</span>;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¡¨è®¾è®¡å¥½ä¹‹åä½¿ç”¨é€†å‘å·¥ç¨‹ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨easycodeåå‘ç”ŸæˆåŸºç¡€ä»£ç ï¼š</p><figure><img class="lazy" alt="image-20220303150043345" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220303150043345-4db288fe.png" tabindex="0"/><figcaption>image-20220303150043345</figcaption></figure><h3 id="_2ã€è®¤è¯" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€è®¤è¯">#</a> 2ã€è®¤è¯</h3><h4 id="_1-redisçš„æ­å»º" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-redisçš„æ­å»º">#</a> ï¼ˆ1ï¼‰redisçš„æ­å»º</h4><p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨windowsç‰ˆæœ¬çš„redisï¼Œå¯åŠ¨å³å¯ï¼Œå¦‚æœä»¥åæƒ³ä¸€åŠ³æ°¸é€¸ï¼Œå¯ä»¥ç›´æ¥å°†redisè®¾ç½®æˆä¸€ä¸ªå¯åŠ¨æœåŠ¡å³å¯ã€‚</p><p>å¼€å¯æœåŠ¡çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight bash"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">å®‰è£…å‘½ä»¤ï¼šredis-server.exe --service-install redis.windows.conf --loglevel verbose<br>å¯åŠ¨æœåŠ¡å‘½ä»¤ï¼šredis-server.exe --service-start<br>å…³é—­æœåŠ¡å‘½ä»¤ï¼šredis-server.exe --service-stop<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¼•å…¥ä¾èµ–</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>redis.clients<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>jedis<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>4.0.1<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å‘å®¹å™¨æ³¨å…¥ä¸€ä¸ªæ¨¡æ¿beanï¼Œç”¨æ¥æ“ä½œredisï¼š</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>bean id=&quot;jedisPool&quot; class=&quot;redis.clients.jedis.JedisPool&quot;<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>constructor-arg name=&quot;host&quot; value=&quot;127.0.0.1&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>constructor-arg name=&quot;port&quot; value=&quot;6379&quot;/<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>property name=&quot;minIdle&quot; value=&quot;20&quot; /<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>property name=&quot;maxIdle&quot; value=&quot;30&quot; /<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>property name=&quot;maxTotal&quot; value=&quot;200&quot;/<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>/bean<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¼–å†™ä¸€ä¸ªRedisTemplateï¼Œç”¨æ¥å¯¹redisè¿›è¡ŒåŸºæœ¬æ“ä½œï¼š</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span>  <span class="hljs-title class_">RedisTemplate</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> JedisPool jedisPool;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> CustomObjectMapper objectMapper;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å­˜å‚¨æ™®é€šå­—ç¬¦ä¸²</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> expire</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">set</span><span class="hljs-params">(String key, String value, Long expire)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            returnValue = jedis.setex(key, expire, value);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> returnValue;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®keyè·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°æ®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            returnValue = jedis.get(key);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> returnValue;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å­˜å‚¨å¯¹è±¡ç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> object</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> expire</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">setObject</span><span class="hljs-params">(String key, Object object, Long expire)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// è®²objectè¿›è¡Œåºåˆ—åŒ–</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">objValue</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(object);<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            returnValue = jedis.setex(key, expire, objValue);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException | JsonProcessingException e ) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> returnValue;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å¯¹è±¡ç±»å‹çš„æ•°æ®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> valueType</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &amp;lt;T&amp;gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &amp;lt;T&amp;gt; Optional&amp;lt;T&amp;gt; getObject(String key,Class&amp;lt;T&amp;gt; valueType) &#123;<br><br><br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">objectValue</span> <span class="hljs-operator">=</span> jedis.get(key);<br><br>            <span class="hljs-keyword">return</span> objectValue == <span class="hljs-literal">null</span> ? Optional.empty() : Optional.of(objectMapper.readValue(objectValue, valueType));<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException | JsonProcessingException e ) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> Optional.empty();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> &amp;lt;T&amp;gt; Optional&amp;lt;T&amp;gt; getObject(String key, TypeReference&amp;lt;T&amp;gt; typeReference) &#123;<br><br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">objectValue</span> <span class="hljs-operator">=</span> jedis.get(key);<br><br>            <span class="hljs-keyword">return</span> objectValue == <span class="hljs-literal">null</span> ? Optional.empty() : Optional.of(objectMapper.readValue(objectValue, typeReference));<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException | JsonProcessingException e ) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> Optional.empty();<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å¤šä¸ªkey</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">remove</span><span class="hljs-params">(String ...key)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            <span class="hljs-keyword">return</span> jedis.del(key);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1L</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">lpush</span><span class="hljs-params">(String key, String ...value)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">pos</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            pos = jedis.lpush(key, value);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> pos;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Optional&amp;lt;String&amp;gt; rpop(String key) &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        Optional&amp;lt;String&amp;gt; returnValue = Optional.empty();<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.rpop(key);<br>            System.out.println(<span class="hljs-string">&quot;---------&quot;</span>+value);<br>            returnValue = value == <span class="hljs-literal">null</span> ? Optional.empty() : Optional.of(value);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> returnValue;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">llen</span><span class="hljs-params">(String key)</span> &#123;<br>        <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> jedisPool.getResource();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">llen</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">try</span>&#123;<br>            <span class="hljs-comment">// å¦‚æœæ“ä½œæˆåŠŸä¼šè¿”å›â€œokâ€å­—ç¬¦ä¸²ï¼Œ</span><br>            llen = jedis.llen(key);<br>        &#125;<span class="hljs-keyword">catch</span> (JedisException e) &#123;<br>            jedisPool.returnBrokenResource(jedis);<br>            log.error(<span class="hljs-string">&quot;Redis execution error !&quot;</span>,e);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            jedisPool.returnResource(jedis);<br>        &#125;<br>        <span class="hljs-keyword">return</span> llen;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-åç«¯çš„ç™»é™†é€»è¾‘" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-åç«¯çš„ç™»é™†é€»è¾‘">#</a> ï¼ˆ2ï¼‰åç«¯çš„ç™»é™†é€»è¾‘</h4><p>åœ¨ç™»é™†é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°è£…ä¸€ä¸ªç™»é™†ç”¨æˆ·çš„å®ä½“ç±»ï¼Œç”¨æ¥ä¿å­˜å½“å‰ç™»é™†ç”¨æˆ·çš„æ›´å¤šä¿¡æ¯ï¼Œè¿™ä¸ªç±»å¯ä»¥å°†æ¥ç”¨æ¥åšç™»é™†æ—¥å¿—ï¼Œé€‚å½“çš„æ—¶å€™ä¹Ÿå¯ä»¥è§å»ºè¡¨ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸å»ºè¡¨äº†ï¼Œä»–å’Œuserè¡¨ä¸åŒï¼Œuserä¿å­˜çš„æ˜¯ä¸€ä¸ªç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…¶ä¸­çš„åŒºåˆ«ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Builder</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YdlLoginUser</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·ID</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Long userId;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·å”¯ä¸€æ ‡è¯†</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String token;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç™»å½•æ—¶é—´</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Date loginTime;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç™»å½•IPåœ°å€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String ipaddr;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç™»å½•åœ°ç‚¹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String loginLocation;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æµè§ˆå™¨ç±»å‹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String browser;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ“ä½œç³»ç»Ÿ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String os;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> YdlUser ydlUser;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™ç™»é™†ç›¸å…³çš„controllerï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;login&quot;)</span><br><span class="hljs-keyword">public</span> ResponseEntity&amp;lt;YdlLoginUser&amp;gt; login(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Validated</span> YdlUser ydlUser,BindingResult bindingResult)&#123;<br>    ydlLoginUser = userService.login(ydlUser.getUserName(),ydlUser.getPassword());<br>    <span class="hljs-keyword">return</span> ResponseEntity.ok().body(ydlLoginUser);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¤„ç†ç™»é™†é€»è¾‘çš„serviceä¸­äº†ï¼Œæ­¤å¤„éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¾èµ–ï¼Œè¯¥ä¾èµ–èƒ½å¾ˆè½»æ¾çš„è·å–æµè§ˆå™¨å’Œç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>dependency<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>groupId<span class="hljs-symbol">&amp;gt;</span>eu.bitwalker<span class="hljs-symbol">&amp;lt;</span>/groupId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>artifactId<span class="hljs-symbol">&amp;gt;</span>UserAgentUtils<span class="hljs-symbol">&amp;lt;</span>/artifactId<span class="hljs-symbol">&amp;gt;</span><br>    <span class="hljs-symbol">&amp;lt;</span>version<span class="hljs-symbol">&amp;gt;</span>1.21<span class="hljs-symbol">&amp;lt;</span>/version<span class="hljs-symbol">&amp;gt;</span><br><span class="hljs-symbol">&amp;lt;</span>/dependency<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‘é€httpè¯·æ±‚çš„å·¥å…·ç±»ï¼Œè¿™ä¸ªå·¥å…·ç±»å¯ä»¥å¾ˆè½»æ¾çš„å‘é€è¯·æ±‚ï¼Œä»–æ˜¯springè‡ªå¸¦çš„ï¼Œç›´æ¥æ³¨å…¥å®¹å™¨å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestConfiguration</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…·ä½“çš„ç™»é™†é€»è¾‘å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> YdlLoginUser <span class="hljs-title function_">login</span><span class="hljs-params">(String userName, String password)</span> <span class="hljs-keyword">throws</span> JsonProcessingException &#123;<br><br>    <span class="hljs-comment">// 1ã€ç™»é™†ï¼Œä½¿ç”¨ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ï¼Œæ²¡æœ‰æŸ¥è¯¢åˆ°ï¼Œè¯´æ˜æ²¡æœ‰è¯¥è´¦æˆ·</span><br>    <span class="hljs-type">YdlUser</span> <span class="hljs-variable">ydlUser</span> <span class="hljs-operator">=</span> ydlUserDao.queryByUserName(userName);<br>    <span class="hljs-keyword">if</span>(ydlUser == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserNotFoundException</span>(<span class="hljs-string">&quot;æ‰§è¡Œç™»é™†æ“ä½œï¼šã€&quot;</span>+ userName +<span class="hljs-string">&quot;ã€‘è¯¥ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);<br><br>    <span class="hljs-comment">// 2ã€å¦‚æœæŸ¥åˆ°äº†ï¼Œæ¯”è¾ƒæ¯”è¾ƒå¯†ç ï¼Œå¯†ç å¦‚æœä¸æ­£ç¡®ï¼Œç™»é™†å¤±è´¥</span><br>    <span class="hljs-keyword">if</span>(!password.equals(ydlUser.getPassword()))&#123;<br>        log.info(<span class="hljs-string">&quot;æ‰§è¡Œç™»é™†æ“ä½œï¼šã€&quot;</span>+ userName +<span class="hljs-string">&quot;ã€‘è¯¥ç”¨æˆ·å¯†ç è¾“å…¥é”™è¯¯&quot;</span>);<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PasswordIncorrectException</span>(<span class="hljs-string">&quot;æ‰§è¡Œç™»é™†æ“ä½œï¼šã€&quot;</span>+ userName +<span class="hljs-string">&quot;ã€‘è¯¥ç”¨æˆ·å¯†ç è¾“å…¥é”™è¯¯&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 3ã€å¦‚æœéªŒè¯æˆåŠŸäº†</span><br><br>    <span class="hljs-comment">// (1) ç”Ÿæˆtoken</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();<br><br>    <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>    <span class="hljs-type">UserAgent</span> <span class="hljs-variable">userAgent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserAgent</span>(request.getHeader(<span class="hljs-string">&quot;User-Agent&quot;</span>));<br><br>    <span class="hljs-comment">// é€šè¿‡ipè·å–å…¶æ‰€å±çš„åœ°å€</span><br>    ResponseEntity&amp;lt;String&amp;gt; result = restTemplate.getForEntity(<span class="hljs-string">&quot;https://whois.pconline.com.cn/ipJson.jsp?ip=&quot;</span>+request.getRemoteHost()+<span class="hljs-string">&quot;&amp;amp;json=true&quot;</span>, String.class);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> result.getBody();<br>    Map&amp;lt;String,String&amp;gt; map = objectMapper.readValue(body, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&amp;lt;&amp;gt;() &#123;&#125;);<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">location</span> <span class="hljs-operator">=</span> map.get(<span class="hljs-string">&quot;addr&quot;</span>)+map.get(<span class="hljs-string">&quot;pro&quot;</span>)+map.get(<span class="hljs-string">&quot;city&quot;</span>)+map.get(<span class="hljs-string">&quot;region&quot;</span>);<br><br>    <span class="hljs-comment">// (2) å°è£…ä¸€ä¸ªYdlLoginUserï¼Œä¿å­˜åœ¨redis</span><br>    <span class="hljs-type">YdlLoginUser</span> <span class="hljs-variable">ydlLoginUser</span> <span class="hljs-operator">=</span> YdlLoginUser.builder()<br>        .userId(ydlUser.getUserId())<br>        .token(token)<br>        .ipaddr(request.getRemoteAddr())<br>        .loginTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())<br>        .os(userAgent.getOperatingSystem().getName())<br>        .browser(userAgent.getBrowser().getName())<br>        .loginLocation(location)<br>        .ydlUser(ydlUser)<br>        .build();<br><br>    <span class="hljs-comment">//keyè¿›è¡Œå¤„ç†  token:username:uuid</span><br><br>    <span class="hljs-comment">// 1ã€æ ¹æ®ç”¨æˆ·åç”Ÿæˆä¸€ä¸ªkeyå‰ç¼€token:username:</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">keyPrefix</span> <span class="hljs-operator">=</span>  Constants.TOKEN_PREFIX + userName +<span class="hljs-string">&quot;:&quot;</span>;<br>    <span class="hljs-comment">// 2ã€æŸ¥è¯¢token:username:å‰ç¼€çš„æ•°æ®</span><br>    Set&amp;lt;String&amp;gt; keys = redisTemplate.keys(keyPrefix + <span class="hljs-string">&quot;*&quot;</span>);<br>    <span class="hljs-comment">// 3ã€åˆ é™¤åŸæ¥çš„æ•°æ®</span><br>    keys.forEach(key -&amp;gt; redisTemplate.remove(key));<br>    <span class="hljs-comment">// 4ã€æŠŠæ–°çš„æ•°æ®åŠ å…¥redis</span><br>    redisTemplate.setObject(keyPrefix + token,ydlLoginUser,Constants.TOKEN_TIME);<br><br>    <span class="hljs-keyword">return</span> ydlLoginUser;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å‰ç«¯storeçš„å¤„ç†" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-å‰ç«¯storeçš„å¤„ç†">#</a> ï¼ˆ3ï¼‰å‰ç«¯storeçš„å¤„ç†</h4><p>æ€è€ƒï¼Œå‰ç«¯çš„æ•°æ®å¯ä»¥å­˜å‚¨åœ¨vuexä¸­ï¼Œä¹Ÿå¯ä»¥å­˜åœ¨cookieä¸­æˆ–è€…storageå½“ä¸­ã€‚</p><ul><li>vuexï¼šæ•°æ®æ˜¯å“åº”å¼çš„ï¼Œä½†æ˜¯åˆ·æ–°ä¼šæ¸…ç©ºã€‚</li><li>cookieä¸­æˆ–è€…storageï¼šæ•°æ®ä¸æ˜¯å“åº”å¼çš„ï¼Œåˆ·æ–°ä¸å½±å“ã€‚</li></ul><p>æ‰€ä»¥ä¸ºäº†å…¼é¡¾ä¸¤è€…çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™é‡Œåªå†™äº†sessionStorageï¼Œä½ ä¹Ÿå¯ä»¥åŠ ä¸ŠlocalStorage:</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-title function_">saveSessionString</span>(<span class="hljs-params">key,value</span>)&#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">sessionStorage</span>.<span class="hljs-title function_">setItem</span>(key,value);<br>    &#125;,<br>    <span class="hljs-title function_">getSessionString</span>(<span class="hljs-params">key</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">sessionStorage</span>.<span class="hljs-title function_">getItem</span>(key);<br>    &#125;,<br>    <span class="hljs-title function_">saveSessionObject</span>(<span class="hljs-params">key,value</span>)&#123;<br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">sessionStorage</span>.<span class="hljs-title function_">setItem</span>(key,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));<br>    &#125;,<br>    <span class="hljs-title function_">getSessionObject</span>(<span class="hljs-params">key</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">sessionStorage</span>.<span class="hljs-title function_">getItem</span>(key));<br>    &#125;,<br>    <span class="hljs-title function_">remove</span>(<span class="hljs-params">key</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">sessionStorage</span>.<span class="hljs-title function_">removeItem</span>(key);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> user = &#123;<br>    <span class="hljs-attr">state</span>: &#123;<br>        <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">token</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    &#125;,<br>    <span class="hljs-attr">getters</span>: &#123;<br>        <span class="hljs-title function_">userIsLogin</span>(<span class="hljs-params">state</span>) &#123;<br>            <span class="hljs-keyword">return</span> state.<span class="hljs-property">username</span> !== <span class="hljs-string">&#x27;&#x27;</span> &amp;amp;&amp;amp; state.<span class="hljs-property">token</span> !== <span class="hljs-string">&#x27;&#x27;</span><br>        &#125;,<br>        <span class="hljs-title function_">permissions</span>(<span class="hljs-params">state</span>) &#123;<br>            <span class="hljs-keyword">return</span> state.<span class="hljs-property">permissions</span>;<br>        &#125;<br><br>    &#125;,<br>    <span class="hljs-attr">mutations</span>: &#123;<br>        <span class="hljs-title function_">SAVE_USER</span>(<span class="hljs-params">state, username</span>) &#123;<br>            state.<span class="hljs-property">username</span> = username.<span class="hljs-title function_">trim</span>();<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_TOKEN</span>(<span class="hljs-params">state, token</span>) &#123;<br>            state.<span class="hljs-property">token</span> = token.<span class="hljs-title function_">trim</span>();<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_ROLES</span>(<span class="hljs-params">state, roles</span>) &#123;<br>            state.<span class="hljs-property">roles</span> = roles;<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_PERMISSIONS</span>(<span class="hljs-params">state, permissions</span>) &#123;<br>            state.<span class="hljs-property">permissions</span> = permissions;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">actions</span>: &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * æ­¤å¤„ç”¨æ¥å¤„ç†ç™»é™†çš„é€»è¾‘ï¼Œå¦‚æœç™»é™†æˆåŠŸä¼šåœ¨vuexä¸­ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="hljs-comment">         * vuexä¸­çš„ç”¨æˆ·ä¿¡æ¯ç”¨æ¥æŠ¥çº¸ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•</span><br><span class="hljs-comment">         * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; param0 </span><br><span class="hljs-comment">         * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">*</span>&#125; user </span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-title function_">LOGIN</span>(<span class="hljs-params">&#123;commit&#125;, user</span>) &#123;<br><br>            <span class="hljs-title function_">login</span>(user).<span class="hljs-title function_">then</span>((res) =&amp;gt; &#123;<br>                <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) &#123;<br>                    <span class="hljs-comment">// vuexçš„ä½¿ç”¨æ˜¯ä¸ºäº†ä¿éšœæ•°æ®çš„å“åº”å¼</span><br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;SAVE_USER&#x27;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>.<span class="hljs-property">username</span>);<br>                    storage.<span class="hljs-title function_">saveSessionString</span>(<span class="hljs-string">&quot;username&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>.<span class="hljs-property">username</span>)<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;SAVE_TOKEN&#x27;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);<br>                    storage.<span class="hljs-title function_">saveSessionString</span>(<span class="hljs-string">&quot;token&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>)<br>                    router.<span class="hljs-title function_">push</span>(&#123;<br>                        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;main&quot;</span><br>                    &#125;);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(reslove =&amp;gt; <span class="hljs-title function_">reslove</span>(), () =&amp;gt; &#123; &#125;)<br>                &#125;<br>            &#125;);<br>        &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> user<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨login.vueä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">login</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;LOGIN&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>).<span class="hljs-title function_">then</span>(() =&amp;gt; &#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;GET_INFO&quot;</span>);<br>        &#125;);<br>    &#125;,<br>&#125;,<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…³é”®ç‚¹æ¥äº†ï¼Œç™»é™†ä¹‹åæˆ‘ä»¬å¯ä»¥è·å¾—ç™»é™†çš„æ•°æ®è¿˜æœ‰ä¸€ä¸ªtokenï¼Œæˆ‘ä»¬å…¶å®æƒ³çš„æ˜¯æ¯æ¬¡çš„è®¿é—®æºå¸¦ä¸Šè¿™ä¸ªtokenè¿™ä¸ªåº”è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨axiosçš„æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œç»™æ¯ä¸€ä¸ªè¯·æ±‚åŠ ä¸€ä¸ªheaderã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span><br>request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) &#123;<br>  <span class="hljs-comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ</span><br>  <span class="hljs-keyword">if</span> (store.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>.<span class="hljs-property">token</span>) &#123;<br>    <span class="hljs-comment">//&#x27;Bearer &#x27;</span><br>    config.<span class="hljs-property">headers</span>[<span class="hljs-string">&#x27;Authorization&#x27;</span>] = store.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>.<span class="hljs-property">token</span> <span class="hljs-comment">// è®©æ¯ä¸ªè¯·æ±‚æºå¸¦è‡ªå®šä¹‰token è¯·æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œä¿®æ”¹</span><br>  &#125;<br>  <span class="hljs-keyword">return</span> config;<br>&#125;, <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) &#123;<br>  <span class="hljs-comment">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¥½äº†å‘€ï¼</p><p>é‚£åç«¯æ€ä¹ˆåˆ¤æ–­å½“å‰è¯·æ±‚çš„ç”¨æˆ·æ˜¯å¦å·²ç»ç™»é™†äº†å‘¢ï¼Ÿå½“ç„¶æ˜¯æ‹¦æˆªå™¨äº†ï¼Œåªæ˜¯é€»è¾‘æœ‰äº›å˜åŒ–å‘€ï¼</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> CustomObjectMapper objectMapper;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">// åˆ¤æ–­æœ‰æ²¡æœ‰Authorizationè¿™ä¸ªè¯·æ±‚å¤´ï¼Œæ‹¿åˆ°é¦–éƒ¨ä¿¡æ¯çš„Authorizationçš„å€¼</span><br>        ResponseEntity&amp;lt;String&amp;gt; res = ResponseEntity.status(<span class="hljs-number">401</span>).body(<span class="hljs-string">&quot;Bad Credentials!&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(Constants.HEAD_AUTHORIZATION);<br><br>        <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) &#123;<br>            response.setStatus(<span class="hljs-number">401</span>);<br>            response.getWriter().write(objectMapper.writeValueAsString(res));<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-comment">//        String tokenKey = Constants.TOKEN_PREFIX + request.getHeader(&quot;username&quot;)+&quot;:&quot;+token;</span><br>        Set&amp;lt;String&amp;gt; keys = redisTemplate.keys(Constants.TOKEN_PREFIX + <span class="hljs-string">&quot;*&quot;</span> + token);<br>        <span class="hljs-keyword">if</span> (keys== <span class="hljs-literal">null</span> || keys.size() == <span class="hljs-number">0</span>)&#123;<br>            response.setStatus(<span class="hljs-number">401</span>);<br>            response.getWriter().write(objectMapper.writeValueAsString(res));<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">tokenKey</span> <span class="hljs-operator">=</span> (String)keys.toArray()[<span class="hljs-number">0</span>];<br>        <span class="hljs-comment">// 3ã€ä½¿ç”¨tokenå»redisä¸­æŸ¥çœ‹ï¼Œæœ‰æ²¡æœ‰å¯¹åº”çš„loginUser</span><br>        <span class="hljs-type">YdlLoginUser</span> <span class="hljs-variable">ydlLoginUser</span> <span class="hljs-operator">=</span> redisTemplate.getObject(tokenKey, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&amp;lt;&amp;gt;() &#123;<br>        &#125;);<br>        <span class="hljs-keyword">if</span> (ydlLoginUser == <span class="hljs-literal">null</span>) &#123;<br>            response.setStatus(<span class="hljs-number">401</span>);<br>            response.getWriter().write(objectMapper.writeValueAsString(res));<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-comment">// ç»™tokenç»­å‘½</span><br>        redisTemplate.expire(tokenKey,Constants.TOKEN_TIME);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›®å‰ï¼Œæˆ‘ä»¬çš„å‰åç«¯çš„æ ¸å¿ƒå†…å®¹å°±å·²ç»å¤„ç†å®Œäº†ã€‚</p><h4 id="_4-æ•°æ®æ ¡éªŒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-æ•°æ®æ ¡éªŒ">#</a> ï¼ˆ4ï¼‰æ•°æ®æ ¡éªŒ</h4><p>1ã€åœ¨å‰ç«¯å¤„ç†è¡¨å•æ•°æ®ï¼š</p><figure><img class="lazy" alt="image-20220221163325047" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221163325047-d029903e.png" tabindex="0"/><figcaption>image-20220221163325047</figcaption></figure><p><strong>é€‰é¡¹å¼apiçš„å†™æ³•ï¼š</strong></p><div class="language-html line-numbers-mode" data-ext="html"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight html"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-symbol">&amp;lt;</span>el-form ref=&quot;formRef&quot; :rules=&quot;loginRules&quot; :model=&quot;user&quot; label-width=&quot;60px&quot;<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>å®šä¹‰è§„åˆ™ï¼Œå®šä¹‰åœ¨dataä¸­å³å¯ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-attr">loginRules</span>: &#123;<br>    <span class="hljs-attr">username</span>: [<br>        &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;</span> &#125;<br>    ],<br>        <span class="hljs-attr">password</span>: [<br>            &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;å¯†ç ä¸èƒ½ä¸ºç©º&quot;</span> &#125;<br>        ],<br>            <span class="hljs-attr">code</span>: [&#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;éªŒè¯ç ä¸èƒ½ä¸ºç©º&quot;</span> &#125;]<br>&#125;,<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•åŒ…è£¹ç™»é™†çš„æ–¹æ³•è°ƒç”¨å³å¯ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">login</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$$refs</span>.<span class="hljs-property">formRef</span>.<span class="hljs-title function_">validate</span>((validate) =&amp;gt; &#123;<br>        <span class="hljs-keyword">if</span> (validate) &#123;<br>            <span class="hljs-comment">// ç™»é™†å®Œæˆåç«‹åˆ»è·å–ç”¨æˆ·çš„ä¿¡æ¯</span><br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;LOGIN&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>).<span class="hljs-title function_">then</span>(() =&amp;gt; &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;GET_INFO&quot;</span>);<br>            &#125;);<br>        &#125;<br>    &#125;);<br>&#125;,<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç«¯çš„æ•°æ®æ ¡éªŒ</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YdlUser</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">YdlBaseEntity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">636710183710512845L</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·ID</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Long userId;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·è´¦å·</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-meta">@Size(min = 5,max = 15,message = &quot;ç”¨æˆ·åçš„é•¿åº¦åº”è¯¥åœ¨5åˆ°15ä¹‹é—´&quot;)</span><br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·æ˜µç§°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-keyword">private</span> String nickName;<br>    ....<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨BindingResultå¯¹åç«¯çš„æ•°æ®è¿›è¡Œæ ¡éªŒï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;login&quot;)</span><br><span class="hljs-keyword">public</span> ResponseEntity&amp;lt;YdlLoginUser&amp;gt; login(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Validated</span> YdlUser ydlUser,BindingResult bindingResult)&#123;<br>    <span class="hljs-comment">// 1ã€å¤„ç†ä¸åˆæ³•çš„æ•°æ®</span><br>    System.out.println(ydlUser.getUserName()+<span class="hljs-string">&quot;&amp;lt; &amp;gt; ï¼œï¼&quot;</span>);<br>    List&amp;lt;ObjectError&amp;gt; allErrors = bindingResult.getAllErrors();<br>    allErrors.forEach( error -&amp;gt; log.error(<span class="hljs-string">&quot;ç™»é™†æ—¶ç”¨æˆ·æ ¡éªŒå¤±è´¥ï¼š&#123;&#125;&quot;</span>,error.getDefaultMessage()));<br>    <span class="hljs-keyword">if</span>(allErrors.size() &amp;gt; <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).build();<br>    &#125;<br><br>    <span class="hljs-comment">// 2ã€ æ‰§è¡Œç™»é™†é€»è¾‘</span><br>    <span class="hljs-type">YdlLoginUser</span> <span class="hljs-variable">ydlLoginUser</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        ydlLoginUser = userService.login(ydlUser.getUserName(),ydlUser.getPassword());<br>    &#125; <span class="hljs-keyword">catch</span> (JsonProcessingException e) &#123;<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).build();<br>    &#125;<br>    <span class="hljs-keyword">return</span> ResponseEntity.ok().body(ydlLoginUser);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€é‰´æƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€é‰´æƒ">#</a> 3ã€é‰´æƒ</h3><h4 id="_1-åç«¯å¤„ç†é‰´æƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-åç«¯å¤„ç†é‰´æƒ">#</a> ï¼ˆ1ï¼‰åç«¯å¤„ç†é‰´æƒ</h4><p>å®šä¹‰è·å–æƒé™ä¿¡æ¯çš„æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;getInfo&quot;)</span><br><span class="hljs-keyword">public</span> ResponseEntity&amp;lt;HashMap&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt;&amp;gt; getInfo() &#123;<br>    <span class="hljs-keyword">return</span> ResponseEntity.ok(<span class="hljs-built_in">this</span>.ydlUserService.getInfo());<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‰è¡¨è”æŸ¥æŸ¥è¯¢æŸä¸ªç”¨æˆ·çš„æƒé™ä¿¡æ¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>select id=&quot;getInfo&quot; resultMap=&quot;UserMap&quot;<span class="hljs-symbol">&amp;gt;</span><br>    SELECT<br>    u.user_id user_id,<br>    username,<br>    nick_name,<br>    r.role_id,<br>    r.role_name,<br>    r.role_tag,<br>    m.menu_id,<br>    m.menu_name,<br>    m.perms<br>    FROM<br>    ydl_user u<br>    LEFT JOIN `ydl_user_role` ur ON u.user_id = ur.user_id<br>    LEFT JOIN ydl_role r ON ur.role_id = r.role_id<br>    LEFT JOIN ydl_role_menu rm ON r.role_id = rm.role_id<br>    LEFT JOIN ydl_menu m ON rm.menu_id = m.menu_id<br>    where u.del_flag = 0 and r.del_flag = 0 and u.user_id = #&#123;userId&#125;<br><span class="hljs-symbol">&amp;lt;</span>/select<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†è·å–æƒé™ä¿¡æ¯çš„ä¸šåŠ¡ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> HashMap&amp;lt;String,List&amp;lt;String&amp;gt;&amp;gt; getInfo() &#123;<br>    <span class="hljs-comment">// 1ã€è·å–å½“å‰ç™»é™†çš„å¯¹è±¡</span><br>    <span class="hljs-type">YdlLoginUser</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> getLoginUser();<br><br>    <span class="hljs-comment">// 2ã€æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è§’è‰²å’Œæƒé™</span><br>    <span class="hljs-type">YdlUser</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> ydlUserDao.getInfo(loginUser.getUserId());<br><br>    <span class="hljs-comment">// 3ã€å¤„ç†æƒé™å’Œè§’è‰²çš„ç›¸å…³ä¿¡æ¯</span><br>    <span class="hljs-comment">// (1) roles:token : [admin,xxx,yyy]   perms:token: [system:user:add,system:user:update]</span><br>    List&amp;lt;String&amp;gt; roleTags = info.getYdlRoles().stream().map(YdlRole::getRoleTag).collect(Collectors.toList());<br>    redisTemplate.setObject(Constants.ROLE_PREFIX + loginUser.getToken(),roleTags,Constants.TOKEN_TIME);<br><br>    List&amp;lt;String&amp;gt; prems = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-comment">// [&#123;roleName:cc,roleTag:xxx,perms:[&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;,&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;]&#125;,&#123;&#125;]</span><br>    <span class="hljs-comment">// [[&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;,&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;],[&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;,&#123;id,&#x27;xxx&#x27;,perm:&#x27;system&#x27;&#125;]]</span><br>    <span class="hljs-comment">// [&#x27;system&#x27;,&#x27;system:user:add&#x27;]</span><br>    info.getYdlRoles().stream().map(YdlRole::getYdlMenus).forEach(menus -&amp;gt; &#123;<br>        prems.addAll(menus.stream().map(YdlMenu::getPerms).collect(Collectors.toList()));<br>    &#125;);<br>    redisTemplate.setObject(Constants.PERM_PREFIX + loginUser.getToken(),prems,Constants.TOKEN_TIME);<br><br>    <span class="hljs-comment">// æ•´åˆæ•°æ®</span><br>    HashMap&amp;lt;String,List&amp;lt;String&amp;gt;&amp;gt; data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&amp;lt;&amp;gt;();<br>    data.put(<span class="hljs-string">&quot;roles&quot;</span>,roleTags);<br>    data.put(<span class="hljs-string">&quot;perms&quot;</span>,prems);<br><br>    <span class="hljs-keyword">return</span> data;<br>&#125;<br><br><br><span class="hljs-comment">// è·å–å½“å‰ç™»é™†ç”¨æˆ·çš„æ–¹æ³•</span><br><span class="hljs-keyword">private</span> YdlLoginUser <span class="hljs-title function_">getLoginUser</span><span class="hljs-params">()</span>&#123;<br><br>    <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>    <span class="hljs-comment">// è·å–é¦–éƒ¨ä¿¡æ¯çš„token</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(Constants.HEAD_AUTHORIZATION);<br><br>    <span class="hljs-keyword">if</span> (token == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;å½“å‰ç”¨æˆ·æœªç™»å½•ï¼&quot;</span>);<br>    &#125;<br>    Set&amp;lt;String&amp;gt; keys = redisTemplate.keys(Constants.TOKEN_PREFIX + <span class="hljs-string">&quot;*&quot;</span> + token);<br>    <span class="hljs-keyword">if</span> (keys== <span class="hljs-literal">null</span> || keys.size() == <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;å½“å‰ç”¨æˆ·æœªç™»å½•ï¼&quot;</span>);<br>    &#125;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">tokenKey</span> <span class="hljs-operator">=</span> (String)keys.toArray()[<span class="hljs-number">0</span>];<br>    <span class="hljs-comment">// 3ã€ä½¿ç”¨tokenå»redisä¸­æŸ¥çœ‹ï¼Œæœ‰æ²¡æœ‰å¯¹åº”çš„loginUser</span><br>    <span class="hljs-keyword">return</span> redisTemplate.getObject(tokenKey, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&amp;lt;&amp;gt;() &#123;&#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>javaåœ¨å¤„ç†æƒé™ä¸Šçš„æŠ€å·§ï¼š</p><p>æˆ‘ä»¬å·²ç»è·å–äº†å½“å‰ç™»é™†ç”¨æˆ·çš„æ‰€æœ‰æƒé™ï¼Œä½†æ˜¯æ€ä¹ˆæ‰èƒ½ä¿éšœå…¶ä»–æ²¡æœ‰è¯¥æƒé™çš„ç”¨æˆ·å°±ä¸èƒ½è®¿é—®è¿™ä¸ªæ¥å£å‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥åœ¨æ¯ä¸ªæ–¹æ³•é‡Œå†™ä¸Šåˆ¤æ–­é€»è¾‘ï¼Œä½†æ˜¯æ˜¾ç„¶æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<strong>åˆ‡é¢</strong>äº†ï¼Œåˆ‡é¢çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€å°±æ˜¯æŠ½ç¦»å…±åŒé€»è¾‘çš„ä»£ç ï¼Œç„¶åå¯¹ç›®æ ‡æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚ä¸ºäº†èƒ½å¤Ÿæ›´åŠ çµæ´»çš„ç¡®å®šå“ªäº›æ¥å£éœ€è¦è®¾ç½®æƒé™ï¼Œéœ€è¦ä»€ä¹ˆæƒé™ï¼Œæˆ‘ä»¬ä½¿ç”¨æ³¨è§£è¿›è¡Œæ ‡çš„ã€‚</p><p>å®šä¹‰ä»¥ä¸‹ä¸¤ä¸ªæ³¨è§£ï¼š</p><p>è¿™ä¸ªæ³¨è§£ç”¨æ¥æ ‡è¯†ä¸€ä¸ªæ¥å£éœ€è¦æ‹¥æœ‰ä»€ä¹ˆæƒé™çš„äººæ‰èƒ½è®¿é—®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> HasPermission &#123;<br>    String[] value();<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ³¨è§£ç”¨æ¥æ ‡è¯†ä¸€ä¸ªæ¥å£éœ€è¦æ‹¥æœ‰ä»€ä¹ˆè§’è‰²çš„äººæ‰èƒ½è®¿é—®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> HasRole &#123;<br>    String[] value();<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨aopä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯è‡ªåŠ¨ä»£ç†ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight xml"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-symbol">&amp;lt;</span>aop:aspectj-autoproxy/<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionAspect</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰§è¡Œæ¥å£æ‰€éœ€è§’è‰²çš„åˆ‡é¢</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hasRole</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Before(&quot;@annotation(hasRole)&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roleBefore</span><span class="hljs-params">(JoinPoint joinPoint, HasRole hasRole)</span>&#123;<br>        <span class="hljs-comment">// è·å¾—å½“å‰æ–¹æ³•æ‰€éœ€è¦çš„è§’è‰²</span><br>        String[] needRoles = hasRole.value();<br>        <span class="hljs-comment">// è·å¾—æ‹¥æœ‰çš„è§’è‰²</span><br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(Constants.HEAD_AUTHORIZATION);<br>        List&amp;lt;String&amp;gt; hasRoles = redisTemplate.getObject(Constants.ROLE_PREFIX + token, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&amp;lt;&amp;gt;() &#123;<br>        &#125;);<br>        <span class="hljs-comment">// åªè¦æ‰€éœ€çš„è§’è‰²æœ‰ä¸€ä¸ªåœ¨ä½ æ‹¥æœ‰çš„è§’è‰²ä¸­å°±æ”¾è¡Œ</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (String needRole : needRoles) &#123;<br>            <span class="hljs-keyword">if</span> (hasRoles.contains(needRole)) &#123;<br>                flag = <span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(!flag) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RoleNeedHasException</span>(<span class="hljs-string">&quot;æ‚¨æ²¡æœ‰è¯¥æ¥å£æ‰€éœ€è¦çš„è§’è‰²&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Before(&quot;@annotation(hasPermission)&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roleBefore</span><span class="hljs-params">(JoinPoint joinPoint, HasPermission hasPermission)</span>&#123;<br>        <span class="hljs-comment">// è·å¾—å½“å‰æ–¹æ³•æ‰€éœ€è¦çš„æƒé™</span><br>        String[] needPermissions = hasPermission.value();<br>        <span class="hljs-comment">// è·å¾—æ‹¥æœ‰çš„æƒé™</span><br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(Constants.HEAD_AUTHORIZATION);<br>        List&amp;lt;String&amp;gt; hasPermissions = redisTemplate.getObject(Constants.PERM_PREFIX + token, <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeReference</span>&amp;lt;&amp;gt;() &#123;<br>        &#125;);<br>        <span class="hljs-comment">// åªè¦æ‰€éœ€çš„è§’è‰²æœ‰ä¸€ä¸ªåœ¨ä½ æ‹¥æœ‰çš„è§’è‰²ä¸­å°±æ”¾è¡Œ</span><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">for</span> (String needPermission : needPermissions) &#123;<br>            <span class="hljs-keyword">if</span> (hasPermissions.contains(needPermission)) &#123;<br>                flag = <span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(!flag) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionNeedHasException</span>(<span class="hljs-string">&quot;æ‚¨æ²¡æœ‰è¯¥æ¥å£æ‰€éœ€è¦çš„è§’è‰²&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å‰ç«¯å¤„ç†é‰´æƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-å‰ç«¯å¤„ç†é‰´æƒ">#</a> ï¼ˆ2ï¼‰å‰ç«¯å¤„ç†é‰´æƒ</h4><p>å‰ç«¯ä¹Ÿæ˜¯è¦ä¿å­˜æƒé™ä¿¡æ¯çš„ã€‚å‰ç«¯çš„å¤„ç†é€»è¾‘å…¶å®å¹¶ä¸éš¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡v-ifæ¥è¿›è¡Œåˆ¤æ–­ï¼Œä½†æ˜¯v-ifä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸€ç§æ–°çš„æŠ€æœ¯-è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p><p>é¦–å…ˆï¼Œå°†è·å–çš„æƒé™ä¿¡æ¯ä¿å­˜åœ¨vuex</p><p>å®Œå–„ä¸€ä¸‹storeçš„ä»£ç </p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> user = &#123;<br>    <span class="hljs-attr">state</span>: &#123;<br>        <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">token</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">roles</span>: [],<br>        <span class="hljs-attr">permissions</span>: []<br>    &#125;,<br>    <span class="hljs-attr">getters</span>: &#123;<br>        <span class="hljs-title function_">userIsLogin</span>(<span class="hljs-params">state</span>) &#123;<br>            <span class="hljs-keyword">return</span> state.<span class="hljs-property">username</span> !== <span class="hljs-string">&#x27;&#x27;</span> &amp;amp;&amp;amp; state.<span class="hljs-property">token</span> !== <span class="hljs-string">&#x27;&#x27;</span><br>        &#125;,<br>        <span class="hljs-title function_">permissions</span>(<span class="hljs-params">state</span>) &#123;<br>            <span class="hljs-keyword">return</span> state.<span class="hljs-property">permissions</span>;<br>        &#125;<br><br>    &#125;,<br>    <span class="hljs-attr">mutations</span>: &#123;<br>        <span class="hljs-title function_">SAVE_USER</span>(<span class="hljs-params">state, username</span>) &#123;<br>            state.<span class="hljs-property">username</span> = username.<span class="hljs-title function_">trim</span>();<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_TOKEN</span>(<span class="hljs-params">state, token</span>) &#123;<br>            state.<span class="hljs-property">token</span> = token.<span class="hljs-title function_">trim</span>();<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_ROLES</span>(<span class="hljs-params">state, roles</span>) &#123;<br>            state.<span class="hljs-property">roles</span> = roles;<br>        &#125;,<br>        <span class="hljs-title function_">SAVE_PERMISSIONS</span>(<span class="hljs-params">state, permissions</span>) &#123;<br>            state.<span class="hljs-property">permissions</span> = permissions;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">actions</span>: &#123;<br>       <span class="hljs-title function_">LOGIN</span>(<span class="hljs-params">&#123; commit &#125;, user</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>                <span class="hljs-title function_">login</span>(user).<span class="hljs-title function_">then</span>(res =&amp;gt; &#123;<br>                    <span class="hljs-comment">// éœ€è¦å°†è·å–çš„æ•°æ®ï¼Œä¿å­˜èµ·æ¥</span><br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_USERNAME&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">ydlUser</span>.<span class="hljs-property">userName</span>);<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_NICKNAME&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">ydlUser</span>.<span class="hljs-property">nickName</span>);<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_TOKEN&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>);<br>                    storage.<span class="hljs-title function_">saveSessionObject</span>(<span class="hljs-string">&quot;loginUser&quot;</span>, res.<span class="hljs-property">data</span>);<br>                    <span class="hljs-title function_">resolve</span>(res);<br>                &#125;)<br>            &#125;)<br>        &#125;,<br>        <span class="hljs-title function_">GET_INFO</span>(<span class="hljs-params">&#123; commit &#125;</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(resolve =&amp;gt; &#123;<br>                <span class="hljs-title function_">getInfo</span>().<span class="hljs-title function_">then</span>(res =&amp;gt; &#123;<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_ROLES&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">roles</span>);<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_PERMISSIONS&quot;</span>, res.<span class="hljs-property">data</span>.<span class="hljs-property">perms</span>);<br>                    <span class="hljs-title function_">resolve</span>();<br>                &#125;)<br>            &#125;)<br>        &#125;,<br>        <span class="hljs-title function_">LOGOUT</span>(<span class="hljs-params">&#123; commit &#125;</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>                <span class="hljs-title function_">logout</span>().<span class="hljs-title function_">then</span>(res =&amp;gt; &#123;<br>                    <span class="hljs-comment">// éœ€è¦å°†è·å–çš„æ•°æ®ï¼Œä¿å­˜èµ·æ¥</span><br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_USERNAME&quot;</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_NICKNAME&quot;</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>                    <span class="hljs-title function_">commit</span>(<span class="hljs-string">&quot;SAVE_TOKEN&quot;</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>                    storage.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&quot;loginUser&quot;</span>);<br>                    <span class="hljs-title function_">resolve</span>(res);<br>                &#125;)<br>            &#125;)<br>        &#125;,<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> user<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå»ºç«‹directiveç›®å½•ç”¨æ¥å­˜æ”¾æ–°å¢çš„æŒ‡ä»¤ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/store&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-comment">// v-hasPermissions=&quot;system:user:add,system:user:query&quot;</span><br>    <span class="hljs-attr">hasPermission</span>: &#123;<br>        <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>            <span class="hljs-keyword">const</span> &#123; value &#125; = binding<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)<br>            <span class="hljs-keyword">const</span> all_permission = <span class="hljs-string">&quot;*:*:*&quot;</span>;<br>            <span class="hljs-keyword">const</span> permissions = store.<span class="hljs-property">getters</span> &amp;amp;&amp;amp; store.<span class="hljs-property">getters</span>.<span class="hljs-property">permissions</span><br>            <span class="hljs-keyword">if</span> (value &amp;amp;&amp;amp; value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span> &amp;amp;&amp;amp; value.<span class="hljs-property">length</span> &amp;gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">const</span> hasPermissions = permissions.<span class="hljs-title function_">some</span>(permission =&amp;gt; &#123;<br>                    <span class="hljs-keyword">return</span> all_permission === permission || value.<span class="hljs-title function_">includes</span>(permission)<br>                &#125;)<br>                <span class="hljs-keyword">if</span> (!hasPermissions) &#123;<br>                    <span class="hljs-comment">// ç§»é™¤æ‰å½“å‰çš„element</span><br>                    el.<span class="hljs-property">parentNode</span> &amp;amp;&amp;amp; el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el)<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¯·è®¾ç½®æ“ä½œæƒé™æ ‡ç­¾å€¼`</span>)<br>            &#125;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">hasRole</span>: &#123;<br>        <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>            <span class="hljs-keyword">const</span> &#123; value &#125; = binding<br><br>            <span class="hljs-comment">// const all_permission = &quot;admin&quot;;</span><br>            <span class="hljs-keyword">const</span> permissions = store.<span class="hljs-property">getters</span> &amp;amp;&amp;amp; store.<span class="hljs-property">getters</span>.<span class="hljs-property">roles</span><br>            <span class="hljs-keyword">if</span> (value &amp;amp;&amp;amp; value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span> &amp;amp;&amp;amp; value.<span class="hljs-property">length</span> &amp;gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;p--&quot;</span>+permissions)<br>                <span class="hljs-keyword">const</span> hasRoles = permissions.<span class="hljs-title function_">some</span>(role =&amp;gt; &#123;<br>                    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">includes</span>(role)<br>                &#125;)<br>                <span class="hljs-keyword">if</span> (!hasRoles) &#123;<br>                    <span class="hljs-comment">// ç§»é™¤æ‰å½“å‰çš„element</span><br>                    el.<span class="hljs-property">parentNode</span> &amp;amp;&amp;amp; el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el)<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`è¯·è®¾ç½®æ“ä½œæƒé™æ ‡ç­¾å€¼`</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨main.jsä¸­ä¿å­˜</p><div class="language-javascript line-numbers-mode" data-ext="js"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight javascript"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å®‰è£…æ‰€æœ‰çš„è‡ªå®šä¹‰æŒ‡ä»¤</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> directives )&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key)<br>    app.<span class="hljs-title function_">directive</span>(key,directives[key]);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥åæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨äº†ã€‚</p><div class="language-html line-numbers-mode" data-ext="html"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight html"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-symbol">&amp;lt;</span>el-button v-hasPermi=&quot;[&#x27;system:user:edit&#x27;]&quot; type=&quot;primary&quot; :icon=&quot;Edit&quot; <span class="hljs-symbol">&amp;gt;</span>ç¼–è¾‘<span class="hljs-symbol">&amp;lt;</span>/el-button<span class="hljs-symbol">&amp;gt;</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><h2 id="ä¸ƒã€æ—¥å¿—çš„å¤„ç†" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸ƒã€æ—¥å¿—çš„å¤„ç†">#</a> ä¸ƒã€æ—¥å¿—çš„å¤„ç†</h2><ul><li>æ—¥å¿—æ˜¯ä¸€ä¸ªç³»ç»Ÿä¸­æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼Œç”¨æ¥è®°å½•ä¸ä¸šåŠ¡ç›¸å…³çš„ä¿¡æ¯ï¼Œä½†æ˜¯åˆå’Œä¸šåŠ¡æœ¬èº«æ— å…³ï¼Œéœ€è¦å’Œä¸šåŠ¡ä¸»ä½“æ¾è€¦åˆã€‚æ—¥å¿—æˆ‘ä»¬å¯ä»¥è¾“å‡ºåœ¨æ§åˆ¶å°ï¼Œæ—¥å¿—æ–‡ä»¶ä»¥åŠæ•°æ®åº“ã€‚</li><li>æ—¥å¿—çš„è¾“å‡ºé€šå¸¸ä¼´éšç€IOï¼Œå…¶ä¸­å¤§é‡çš„æ—¥å¿—è¾“å‡ºå¯èƒ½ä¼šå¯¼è‡´é˜»å¡ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸€å¼ æ—¥å¿—è¡¨ï¼Œå½“æ‰€æœ‰çš„æ¥å£éƒ½å‘è¿™å¼ è¡¨æ’å…¥æ“ä½œæ•°æ®çš„æ—¶å€™ä¼šå› ä¸ºupdateè¯­å¥é¢‘ç¹é”è¡¨ï¼Œè€Œå¯¼è‡´ä¸šåŠ¡æ¥å£æ‰§è¡Œç¼“æ…¢ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ—¥å¿—è¾“å‡ºé€šå¸¸æ˜¯è¦ä½¿ç”¨å¼‚æ­¥æ“ä½œçš„ï¼Œä½¿ç”¨ç‹¬ç«‹çš„çº¿ç¨‹æ± æ¥å®Œæˆå¼‚æ­¥æ—¥å¿—çš„å¤„ç†ï¼Œè¿™æ ·æ—¥å¿—çš„é˜»å¡ä¸ä¼šå½±å“å…¶ä»–çš„ä¸šåŠ¡ã€‚</li></ul><figure><img class="lazy" alt="image-20220221102631555" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221102631555-8367ac95.png" tabindex="0"/><figcaption>image-20220221102631555</figcaption></figure><h3 id="_1ã€æ™®é€šæ—¥å¿—" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€æ™®é€šæ—¥å¿—">#</a> 1ã€æ™®é€šæ—¥å¿—</h3><p>æˆ‘ä»¬å·²ç»é…ç½®äº†æ—¥å¿—ç›¸å…³çš„å†…å®¹ï¼Œé€šç”¨çš„æ—¥å¿—æˆ‘ä»¬é€‰æ‹©äº†slf4j+logbackã€‚logbackçš„é…ç½®æˆ‘ä»¬ä¸å†è¯¦ç»†ä»‹ç»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹æˆ‘å‰è¾¹çš„æ—¥å¿—ç›¸å…³çš„æ•™ç¨‹ã€‚å½“ç„¶logbackä¹Ÿæ˜¯æ”¯æŒ<strong>å¼‚æ­¥æ—¥å¿—</strong>çš„ï¼Œå¦‚æœéœ€è¦å¯ä»¥è¿›è¡Œé…ç½®ã€‚ä½†æ˜¯æ–‡ä»¶çš„æ—¥å¿—ä¸ä¼šæœ‰ç±»ä¼¼é”è¡¨çš„æƒ…å†µï¼Œä»…ä»…å­˜åœ¨ä¸€äº›iOï¼Œæ‰€ä»¥æŒ‰ç…§å…¬å¸è¦æ±‚é…ç½®å³å¯ã€‚</p><h3 id="_2ã€æ•°æ®åº“æ—¥å¿—" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€æ•°æ®åº“æ—¥å¿—">#</a> 2ã€æ•°æ®åº“æ—¥å¿—</h3><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦å°†ä¸€äº›æ—¥å¿—è®°å½•åœ¨æ•°æ®åº“ï¼Œæ¯”å¦‚ä¸€äº›æ¥å£è°ƒç”¨çš„æ—¥å¿—ï¼Œç”¨æˆ·ç™»é™†çš„æ—¥å¿—ç­‰ã€‚è¿™ç§æ—¥å¿—é€šå¸¸æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æ—¥å¿—çš„æ‰“å°æ–¹å¼é›·åŒï¼Œæ•°æ®æ ¼å¼é›·åŒ</p><p>ï¼ˆ2ï¼‰æ—¥å¿—é€šå¸¸æ— éœ€å’Œä¸šåŠ¡è€¦åˆ</p><p>ï¼ˆ3ï¼‰æ—¥é€šé€šå¸¸ä¼´éšIOï¼Œé”è¡¨ç­‰é—®é¢˜ï¼Œå¯èƒ½ä¼šå½±å“æ ¸å¿ƒä¸šåŠ¡çš„æ‰§è¡Œ</p><p>é’ˆå¯¹ä»¥ä¸Šçš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„å¤„ç†é€»è¾‘é€šå¸¸æ˜¯å¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥æ“ä½œæ—¥å¿—ä¸ºä¾‹ï¼š</p><blockquote><p>å®šä¹‰å¦‚ä¸‹çš„å®ä½“ç±»ï¼Œæˆ‘ä»¬ä½¿ç”¨é€†å‘å·¥ç¨‹ç”Ÿæˆå¯¹åº”ä»£ç </p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OperLog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ—¥å¿—ä¸»é”®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Long operId;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ—¥å¿—å†…å®¹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String content;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä¸šåŠ¡ç±»å‹ï¼ˆ0å…¶å®ƒ 1æ–°å¢ 2ä¿®æ”¹ 3åˆ é™¤ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Integer businessType;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * apiæ–¹æ³•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String method;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯·æ±‚æ–¹å¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String requestMethod;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ“ä½œäººå‘˜</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String operName;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯·æ±‚url</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String operUrl;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ“ä½œåœ°å€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String operIp;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ“ä½œçŠ¶æ€ï¼ˆ0æ­£å¸¸ 1å¼‚å¸¸ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Integer status;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é”™è¯¯æ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String errorMsg;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ“ä½œæ—¶é—´</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br>    <span class="hljs-keyword">private</span> Date operTime;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰å¦‚ä¸‹æ³¨è§£ï¼Œç”¨æ¥è®°å½•æ—¥å¿—æ‰€å±çš„æ¨¡å—ï¼ŒåŠŸèƒ½ï¼Œ</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Log &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ—¥å¿—å†…å®¹</span><br><span class="hljs-comment">     */</span><br>    String <span class="hljs-title function_">content</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åŠŸèƒ½</span><br><span class="hljs-comment">     */</span><br>    String <span class="hljs-title function_">businessType</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span> ;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Resource</span><br>    CustomObjectMapper objectMapper;<br><br>    <span class="hljs-meta">@Resource</span><br>    YdlOperLogService ydlOperLogService;<br><br>    <span class="hljs-comment">// ä½¿ç”¨BeanFactoryAwareæ³¨å…¥ä¸€ä¸ªBeanFactoryï¼Œåç»­æˆ‘ä»¬éœ€è¦è·å–è‡ªèº«çš„beanæ—¶ä½¿ç”¨</span><br>    <span class="hljs-keyword">private</span> BeanFactory beanFactory;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBeanFactory</span><span class="hljs-params">(BeanFactory beanFactory)</span> <span class="hljs-keyword">throws</span> BeansException &#123;<br>        <span class="hljs-built_in">this</span>.beanFactory = beanFactory;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†å®Œè¯·æ±‚åæ‰§è¡Œ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint åˆ‡ç‚¹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@AfterReturning(pointcut = &quot;@annotation(controllerLog)&quot;, returning = &quot;result&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doAfterReturning</span><span class="hljs-params">(JoinPoint joinPoint, Log controllerLog, Object result)</span> &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>        <span class="hljs-comment">// === handleLogæ˜¯ç»è¿‡ä»£ç†çš„å¼‚æ­¥æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥ç®€å•çš„è¿›è¡Œæ–¹æ³•è°ƒç”¨</span><br>        <span class="hljs-comment">// === æ­£ç¡®çš„è°ƒç”¨æ–¹æ³•æ˜¯ï¼Œè·å–beanå¯¹è±¡ï¼ˆè¿™æ˜¯ä¸ªä»£ç†å¯¹è±¡ï¼‰è°ƒç”¨</span><br>        <span class="hljs-type">LogAspect</span> <span class="hljs-variable">logAspect</span> <span class="hljs-operator">=</span> beanFactory.getBean(LogAspect.class);<br>        logAspect.handleLog(joinPoint, controllerLog, <span class="hljs-literal">null</span>, result, request);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‹¦æˆªå¼‚å¸¸æ“ä½œ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint åˆ‡ç‚¹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e         å¼‚å¸¸</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@AfterThrowing(value = &quot;@annotation(controllerLog)&quot;, throwing = &quot;e&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doAfterThrowing</span><span class="hljs-params">(JoinPoint joinPoint, Log controllerLog, Exception e)</span> &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> ((ServletRequestAttributes) Objects.requireNonNull(RequestContextHolder.getRequestAttributes())).getRequest();<br>        <span class="hljs-type">LogAspect</span> <span class="hljs-variable">logAspect</span> <span class="hljs-operator">=</span> beanFactory.getBean(LogAspect.class);<br>        logAspect.handleLog(joinPoint, controllerLog, e, <span class="hljs-literal">null</span>, request);<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†æ—¥å¿—çš„é€»è¾‘</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> joinPoint</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> controllerLog</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> result</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Async(&quot;ydlExecutor&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleLog</span><span class="hljs-params">(<span class="hljs-keyword">final</span> JoinPoint joinPoint, Log controllerLog, <span class="hljs-keyword">final</span> Exception e, Object result, HttpServletRequest request)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// è·å–å½“å‰çš„ç”¨æˆ·</span><br>            Optional&amp;lt;LoginUser&amp;gt; loginUser = redisTemplate.getObject(Constants.TOKEN_PREFIX + request.getHeader(Constants.HEADER_AUTH), LoginUser.class);<br><br>            loginUser.ifPresent(user -&amp;gt; &#123;<br>                <span class="hljs-comment">// ========æ•°æ®åº“æ—¥å¿—=========//</span><br>                <span class="hljs-type">YdlOperLog</span> <span class="hljs-variable">ydlOperLog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">YdlOperLog</span>();<br>                <span class="hljs-comment">// è®¾ç½®ä¸€äº›åŸºæœ¬ä¿¡æ¯</span><br>                ydlOperLog.setStatus(<span class="hljs-number">500</span>);<br>                ydlOperLog.setOperIp(user.getIpaddr());<br>                ydlOperLog.setOperUrl(request.getRequestURI());<br>                ydlOperLog.setOperName(user.getUser().getUsername());<br><br>                <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123;<br>                    ydlOperLog.setStatus(<span class="hljs-number">200</span>);<br>                    ydlOperLog.setErrorMsg(e.getMessage().substring(<span class="hljs-number">0</span>, <span class="hljs-number">2000</span>));<br>                &#125;<br>                <span class="hljs-comment">// è®¾ç½®æ–¹æ³•åç§°</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> joinPoint.getTarget().getClass().getName();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();<br>                ydlOperLog.setMethod(className + <span class="hljs-string">&quot;.&quot;</span> + methodName + <span class="hljs-string">&quot;()&quot;</span>);<br>                <span class="hljs-comment">// è®¾ç½®è¯·æ±‚æ–¹å¼</span><br>                ydlOperLog.setRequestMethod(request.getMethod());<br>                <span class="hljs-comment">// å¤„ç†è®¾ç½®æ³¨è§£ä¸Šçš„å‚æ•°</span><br>                <span class="hljs-comment">// è®¾ç½®actionåŠ¨ä½œ</span><br>                ydlOperLog.setBusinessType(controllerLog.businessType());<br>                <span class="hljs-comment">// è®¾ç½®æ ‡é¢˜</span><br>                ydlOperLog.setContent(controllerLog.content());<br>                ydlOperLog.setOperTime(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>                <span class="hljs-comment">// ä¿å­˜æ•°æ®åº“</span><br>                ydlOperLogService.insert(ydlOperLog);<br>            &#125;);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception exp) &#123;<br>            <span class="hljs-comment">// è®°å½•æœ¬åœ°å¼‚å¸¸æ—¥å¿—</span><br>            log.error(<span class="hljs-string">&quot;==å‰ç½®é€šçŸ¥å¼‚å¸¸==&quot;</span>);<br>            log.error(<span class="hljs-string">&quot;å¼‚å¸¸ä¿¡æ¯:&#123;&#125;&quot;</span>, exp.getMessage());<br>            exp.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±åˆ›å»ºçº¿ç¨‹æ± ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çº¿ç¨‹æ± é…ç½®</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span><br>&#123;<br>    <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">corePoolSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">50</span>;<br><br>    <span class="hljs-comment">// æœ€å¤§å¯åˆ›å»ºçš„çº¿ç¨‹æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxPoolSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br><br>    <span class="hljs-comment">// é˜Ÿåˆ—æœ€å¤§é•¿åº¦</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">queueCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;<br><br>    <span class="hljs-comment">// çº¿ç¨‹æ± ç»´æŠ¤çº¿ç¨‹æ‰€å…è®¸çš„ç©ºé—²æ—¶é—´</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">keepAliveSeconds</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br><br>    <span class="hljs-meta">@Bean(name = &quot;threadPoolTaskExecutor&quot;)</span><br>    <span class="hljs-keyword">public</span> ThreadPoolExecutor <span class="hljs-title function_">threadPoolExecutor</span><span class="hljs-params">()</span><br>    &#123;<br>        xxxxxx;<br>        <span class="hljs-keyword">return</span> executor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…«ã€è¡¨å•é‡å¤æäº¤" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å…«ã€è¡¨å•é‡å¤æäº¤">#</a> å…«ã€è¡¨å•é‡å¤æäº¤</h2><p>è¿™ä¸ªé—®é¢˜é€šå¸¸ä¹Ÿå«åš<strong>å¹‚ç­‰æ€§é—®é¢˜</strong>ï¼Œå°±æ˜¯åŒä¸€ä¸ªè¯·æ±‚ã€å¤šæ¬¡æäº¤ã€‘çš„æ•ˆæœå’Œã€ä¸€æ¬¡æäº¤ã€‘çš„æ•ˆæœä¸€æ ·ï¼Œäº§ç”Ÿè¿™ç§é—®é¢˜çš„åŸå› å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œæŠ–åŠ¨ï¼Œç”¨æˆ·å¤šæ¬¡æäº¤ï¼Œç”¨æˆ·é”™è¯¯æ“ä½œï¼Œå¦‚ç–¯ç‹‚åˆ·æ–°æµè§ˆå™¨ï¼Œæˆ–è€…æœ‰äººæ•…æ„ä¸ºä¹‹ç­‰ã€‚</p><p>è§£å†³è¡¨å•é‡å¤æäº¤çš„æ–¹å¼å…¶å®æœ‰å¾ˆå¤šï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œæˆ‘ä»¬å…¶å®æœ‰å¾ˆå¤šå¯ä»¥æ€è€ƒçš„åœ°æ–¹ï¼š</p><p>1ã€å¦‚æœæ˜¯å‰ç«¯è¡¨å•ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡æˆè¿™ä¸ªæ ·å­ï¼šæäº¤æŒ‰é’®ç‚¹å‡»åå˜ä¸ºdisableçš„ï¼ˆæ— æ³•é‡å¤ç‚¹å‡»ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ¡ˆï¼‰ï¼Œä¿è¯è¡¨å•åªèƒ½æäº¤ä¸€æ¬¡ï¼Œä½†æ˜¯æ°¸è¿œè¦è®°ä½å‰ç«¯çš„ä¸€åˆ‡éƒ½æ˜¯ç»™æ™®é€šäººè®¾è®¡çš„ï¼Œæ˜¯æ— æ³•é˜²æ­¢æ¶æ„æ”»å‡»è€…çš„ã€‚</p><p>2ã€åç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œæœ€ç®€å•çš„å°±æ˜¯åœ¨æ•°æ®åº“è®¾ç½®å”¯ä¸€çº¦æŸï¼Œå¦‚æœæ˜¯é‡å¤çš„æäº¤ï¼Œæ•°æ®åº“å±‚é¢å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ— æ³•ä¿å­˜ã€‚</p><p>3ã€æœ‰æ²¡æœ‰æ›´é«˜çº§ï¼Œæ™®é€‚ä¸€ç‚¹çš„æƒ³æ³•ï¼Ÿæ¯”å¦‚æˆ‘ä»¬å¯ä»¥æ‹¿ä¸ªæœ¬å­è®°å½•ä¸€ä¸‹ï¼Œæœ€è¿‘5ç§’å†…æœ‰å“ªäº›æ¥å£è¢«è°ƒç”¨è¿‡ï¼Œæ¥å£è¢«è°ƒç”¨æ—¶ï¼Œå…ˆå»æœ¬å­é‡ŒæŸ¥ä¸€ä¸‹ï¼Œæœ‰çš„è¯å°±é˜»æ­¢ç»§ç»­æ‰§è¡Œã€‚</p><blockquote><p>ä»Šå¤©æˆ‘ä»¬å°±é€‰å–è¿™ä¸­æ–¹æ¡ˆï¼š</p></blockquote><p>ï¼ˆ1ï¼‰æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œä»¥åçš„controllerä¸­çš„æ¥å£å¦‚æœéœ€è¦é˜²é‡å¤æäº¤å°±åŠ ä¸Šè¿™ä¸ªæ³¨è§£ï¼š</p><p>æ³¨è§£ä¸­çš„valueä»£è¡¨æˆ‘ä»¬é˜²æ­¢é‡å¤æäº¤çš„é»˜è®¤æ—¶é—´ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Repeat &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">10</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨è§£é€šå¸¸å¯ä»¥ä½¿ç”¨åœ¨addï¼Œupdateè¿™ä¸€ç±»æ¥å£ä¸Šï¼Œdeleteå’Œqueryæ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå› ä¸ºè¿™ä¸¤ç§æ¥å£æœ¬èº«å°±æ˜¯å¹‚ç­‰æ€§çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repeat(5)</span><br><span class="hljs-keyword">public</span> ResponseEntity&amp;lt;YdlUser&amp;gt; add(<span class="hljs-meta">@RequestBody</span> YdlUser ydlUser)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> itnanls(å¾®ä¿¡)</span><br><span class="hljs-comment"> * æˆ‘ä»¬çš„æœåŠ¡ï¼š ä¸€è·¯é™ªè·‘ï¼Œé¡ºåˆ©å°±ä¸š</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RepeatSubmitInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> CustomObjectMapper customObjectMapper;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">if</span> (handler <span class="hljs-keyword">instanceof</span> HandlerMethod) &#123;<br>            <span class="hljs-comment">// è·å–æˆ‘ä»¬çš„controlleræ–¹æ³•</span><br>            <span class="hljs-type">HandlerMethod</span> <span class="hljs-variable">handlerMethod</span> <span class="hljs-operator">=</span> (HandlerMethod) handler;<br>            <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> handlerMethod.getMethod();<br>            <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æœ‰é˜²æ­¢é‡å¤æäº¤çš„æ³¨è§£</span><br>            <span class="hljs-type">Repeat</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> method.getAnnotation(Repeat.class);<br>            <span class="hljs-keyword">if</span> (annotation != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.isRepeatSubmit(request, annotation)) &#123;<br>                    <span class="hljs-comment">// å¦‚æœç¡®å®šæ˜¯é‡å¤æäº¤ï¼Œç›´æ¥å“åº”å¤±è´¥</span><br>                    ResponseEntity&amp;lt;String&amp;gt; body = ResponseEntity.status(<span class="hljs-number">500</span>).body(<span class="hljs-string">&quot;æ‚¨é‡å¤æäº¤äº†å½“å‰çš„è¯·æ±‚ï¼&quot;</span>);<br>                    response.setStatus(<span class="hljs-number">500</span>);<br>                    response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);<br>                    response.getWriter().write(customObjectMapper.writeValueAsString(body));<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isRepeatSubmit</span><span class="hljs-params">(HttpServletRequest request, Repeat annotation)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// è·å–å‚æ•°åˆ—è¡¨ï¼Œå¹¶åºåˆ—åŒ–</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">nowParams</span> <span class="hljs-operator">=</span> customObjectMapper.writeValueAsString(request.getParameterMap());<br><br>        <span class="hljs-comment">// è¯·æ±‚åœ°å€ï¼ˆä½œä¸ºå­˜æ”¾cacheçš„keyå€¼ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> request.getRequestURI();<br><br>        <span class="hljs-comment">// å”¯ä¸€å€¼ï¼ˆæ²¡æœ‰æ¶ˆæ¯å¤´åˆ™ä½¿ç”¨è¯·æ±‚åœ°å€ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> request.getHeader(Constants.HEAD_AUTHORIZATION);<br><br>        <span class="hljs-comment">// è·å¾—bodyçš„æ•°æ®</span><br><br>        <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†ï¼ˆæŒ‡å®škey + url + æ¶ˆæ¯å¤´ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">cacheRepeatKey</span> <span class="hljs-operator">=</span> Constants.REPEAT_SUBMIT_KEY  + token + <span class="hljs-string">&quot;:&quot;</span> + url;<br>        <span class="hljs-comment">// å¦‚æœredisä¸­æ²¡æœ‰å­˜åœ¨è¿™ä¸ªkeyï¼Œè¯´æ˜è¿™ä¸ªè¯·æ±‚æ˜¯é‡å¤æäº¤</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">preParams</span> <span class="hljs-operator">=</span> redisTemplate.get(cacheRepeatKey);<br><br>        <span class="hljs-keyword">if</span> (preParams != <span class="hljs-literal">null</span> &amp;amp;&amp;amp; preParams.equals(nowParams)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-comment">// å¦åˆ™æˆ‘å°±å­˜å…¥redisï¼Œæ³¨æ„è®¾ç½®è¿‡æœŸæ—¶é—´</span><br>        redisTemplate.set(cacheRepeatKey, nowParams, annotation.value());<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¹ã€é˜²æ­¢xssæ”»å‡»" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¹ã€é˜²æ­¢xssæ”»å‡»">#</a> ä¹ã€é˜²æ­¢xssæ”»å‡»</h2><ul><li><p>XSSæ”»å‡»é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œæ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œæ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°åŒ…æ‹¬ä½†ä¸é™äºæ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚ [1]</p></li><li><p>ä¾‹å¦‚åœ¨æ³¨å†Œç”¨æˆ·çš„æ—¶å€™ï¼Œæˆ–è€…ä¸€äº›æ–‡ç« ä¸­ï¼ŒåŠ å…¥ä¸€äº›scriptè„šæœ¬<code>&lt;a href="javascript:alert(\'ydl\')" /&gt;http://www.ydlclass.com&lt;/a&gt;</code>ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé˜²ä¸èƒœé˜²ï¼Œæˆ–è€…æ˜¯ä¸€äº›å…¶ä»–çš„æ ‡ç­¾ã€‚</p></li><li><p>ç›®å‰ï¼Œå¾ˆå¤šç»„ä»¶æˆ–è€…æ¡†æ¶å…¶å®å·²ç»å¯¹å¤§éƒ¨åˆ†çš„xssæ”»å‡»åšäº†é˜²å¾¡æªæ–½ï¼Œä¾‹å¦‚åœ¨vueä¸­é™¤éæˆ‘ä»¬ä½¿ç”¨v-hmtlè¿™ç±»æ ‡ç­¾ï¼Œå¦è¿™ä¸€è¾¹çš„xssæ”»å‡»æ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®æ²¡æœ‰ä½¿ç”¨vueï¼Œè€Œæ˜¯ä½¿ç”¨åŸç”Ÿçš„htmlé‚£ä¹ˆå°±å¯èƒ½äº§ç”Ÿé—®é¢˜ã€‚</p></li><li><p>è§£å†³xssæ”»å‡»çš„æ ¸å¿ƒæ–¹æ³•å°±æ˜¯å¤„ç†æ‰é‚£äº›å¯èƒ½äº§ç”Ÿé—®é¢˜çš„æ ‡ç­¾ï¼Œæˆ–è€…é€šè¿‡<strong>è½¬ä¹‰</strong>ï¼Œæˆ–è€…å°†<strong>åŠè§’çš„å°–æ‹¬å·è½¬åŒ–ä¸ºå…¨è§’</strong>ï¼Œåœ¨æˆ–è€…ç›´æ¥å¹²æ‰ä¸€äº›ç‰¹æ®Šæ ‡ç­¾ã€‚</p></li></ul><p>**æ³¨æ„ï¼š**è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ€ä¹ˆä¿è¯æ¯ä¸€ä¸ªè¯·æ±‚ä¸­æºå¸¦çš„æ•°æ®éƒ½è¿›è¡Œä¸€ä¸ªè½¬åŒ–ï¼Œä¸‹è¾¹æ˜¯ä¸€ä¸ªè¯·æ±‚çš„æµè½¬è¿‡ç¨‹ï¼Ÿ</p><p>ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡åˆ°è¾¾tomcatä¹‹åä¼šè¢«å°è£…æˆä¸€ä¸ªrequestå¯¹è±¡</p><p>1ã€è¯·æ±‚åˆ°è¾¾è¿‡æ»¤å™¨èƒ½ä¸èƒ½æ›¿æ¢ï¼Ÿå¯ä»¥ï¼Œè€Œä¸”æ–¹ä¾¿ï¼Œæ”¹å¤´æ¢é¢æœ€å¥½åœ¨é—¨å£å°±å¤„ç†å¥½äº†ã€‚</p><p>2ã€è¯·æ±‚åˆ°è¾¾dispatcherServletåèƒ½ä¸èƒ½æ›¿æ¢ï¼Ÿä¸å¥½æ›¿æ¢ï¼Œäº‹å®ä¸Šä¹Ÿè¡Œï¼Œæˆ‘ä»¬ç»§æ‰¿dispatcherServletç„¶åé‡å†™ä»–çš„ä¸€äº›æ–¹æ³•ä¹Ÿå¯ä»¥äº†ï¼Œä¸å»ºè®®ï¼Ÿ</p><p>3ã€è¯·æ±‚åˆ°è¾¾controlleråèƒ½ä¸èƒ½æ›¿æ¢ï¼Ÿèƒ½ï¼Œä½†æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½è¦æ‰§è¡Œå¤„ç†é€»è¾‘ã€‚</p><figure><img class="lazy" alt="image-20220221132911696" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/%E6%A1%86%E6%9E%B6/ssm%E9%A1%B9%E7%9B%AE/image-20220221132911696-3472019b.png" tabindex="0"/><figcaption>image-20220221132911696</figcaption></figure><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç¼–å†™ä¸€ä¸ªå·¥å…·ç±»ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²ä¸­çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬åªåšç®€å•å¤„ç†ï¼Œå°†åŠè§’çš„å°–æ‹¬å·è½¬åŒ–ä¸ºå…¨è§’ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XssUtil</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°†å®¹æ˜“å¼•èµ·xssæ¼æ´çš„åŠè§’å­—ç¬¦ç›´æ¥æ›¿æ¢æˆå…¨è§’å­—ç¬¦</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> s</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">xssEncode</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;&quot;</span>.equals(s)) &#123;<br>            <span class="hljs-keyword">return</span> s;<br>        &#125;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(s.length() + <span class="hljs-number">16</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; s.length(); i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> s.charAt(i);<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&amp;gt;&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;ï¼&#x27;</span>);<span class="hljs-comment">//å…¨è§’å¤§äºå·</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&amp;lt;&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;ï¼œ&#x27;</span>);<span class="hljs-comment">//å…¨è§’å°äºå·</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;\&#x27;&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;â€˜&#x27;</span>);<span class="hljs-comment">//å…¨è§’å•å¼•å·</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;\&quot;&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;â€œ&#x27;</span>);<span class="hljs-comment">//å…¨è§’åŒå¼•å·</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&amp;amp;&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;ï¼†&#x27;</span>);<span class="hljs-comment">//å…¨è§’</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;\\&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;ï¼¼&#x27;</span>);<span class="hljs-comment">//å…¨è§’æ–œçº¿</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<br>                    sb.append(<span class="hljs-string">&#x27;ï¼ƒ&#x27;</span>);<span class="hljs-comment">//å…¨è§’äº•å·</span><br>                    <span class="hljs-keyword">break</span>;<br>                <span class="hljs-keyword">default</span>:<br>                    sb.append(c);<br>                    <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯¹requestè¿›è¡Œä¸€ä¸ªåŒ…è£…ï¼Œåœ¨åŒ…è£…çš„requestä¸­å°†å‚æ•°ç»Ÿä¸€è¿›è¡Œå¤„ç†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XssHttpServletRequestWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServletRequestWrapper</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> HttpServletRequest orgRequest;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">XssHttpServletRequestWrapper</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>        <span class="hljs-built_in">super</span>(request);<br>        orgRequest = request;<br>    &#125;<br><br>    <span class="hljs-comment">// é‡å†™è¿™å‡ ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å¤„ç†xss</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getParameter</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-keyword">return</span> XssUtil.xssEncode(<span class="hljs-built_in">super</span>.getParameter(XssUtil.xssEncode(name)));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Map&amp;lt;String, String[]&amp;gt; getParameterMap() &#123;<br>        Map&amp;lt;String, String[]&amp;gt; parameterMap = <span class="hljs-built_in">super</span>.getParameterMap();<br>        Map&amp;lt;String, String[]&amp;gt; newParameterMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&amp;lt;&amp;gt;(<span class="hljs-number">8</span>);<br>        <span class="hljs-keyword">for</span>(Map.Entry&amp;lt;String, String[]&amp;gt; entry : parameterMap.entrySet())&#123;<br>            <span class="hljs-comment">// å¤„ç†keyçš„æ ‡ç­¾</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">newKey</span> <span class="hljs-operator">=</span> XssUtil.xssEncode(entry.getKey());<br>            <span class="hljs-comment">// å¤„ç†valueçš„æ ‡ç­¾</span><br>            String[] params = entry.getValue();<br>            String[] newParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[params.length];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; params.length; i++) &#123;<br>                newParams[i] = XssUtil.xssEncode(params[i]);<br>            &#125;<br>            newParameterMap.put(newKey,newParams);<br>        &#125;<br>        <span class="hljs-keyword">return</span> newParameterMap;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String[] getParameterValues(String name) &#123;<br>        String[] parameterValues = <span class="hljs-built_in">super</span>.getParameterValues(XssUtil.xssEncode(name));<br>        String[] newParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[parameterValues.length];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; parameterValues.length; i++) &#123;<br>            newParams[i] = XssUtil.xssEncode(parameterValues[i]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> newParams;<br>    &#125;<br><br>    <span class="hljs-comment">// å¦‚æœå°†æ¥æƒ³ç»§ç»­ä½¿ç”¨åŸå§‹çš„requestï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–</span><br>    <span class="hljs-keyword">public</span> HttpServletRequest <span class="hljs-title function_">getOrgRequest</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> orgRequest;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å†™ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå°†åŸç”Ÿçš„requestç»™ç½®æ¢æ‰</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XssFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        <span class="hljs-comment">// è¿™ä¸ªè¿‡æ»¤å™¨çš„å·¦å³ï¼Œä»…ä»…æ˜¯è®²åŸå§‹çš„requestè¿›è¡Œä¸€ä¸ªåŒ…è£…ï¼Œé€šè¿‡å­ç±»å»å¤„ç†æ¶æ„æ ‡ç­¾</span><br>        filterChain.doFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XssHttpServletRequestWrapper</span>((HttpServletRequest) servletRequest),servletResponse);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">å›é¡¾ä¸Šä¸€ç¯‡</div><a href="/wiki/YDLDoc2/%E6%A1%86%E6%9E%B6/spring/spring.html">spring</a></div><div class="item" id="next"><div class="note">æ¥ä¸‹æ¥é˜…è¯»</div><a href="/wiki/YDLDoc2/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">åŸºç¡€è®¾è®¡æ¨¡å¼</a></div></section></div>


  <div class="related-wrap md-text" id="comments">
    <section class='header cmt-title cap theme'>
      å¿«æ¥å‚ä¸è®¨è®ºå§
    </section>
    <section class='body cmt-body waline'>
      

<div id="waline_container" class="waline_thread"><svg class="loading" style="vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg></div>

    </section>
  </div>



<footer class="page-footer fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">åšå®¢</span><a href="/">è¿‘æœŸ</a><a href="/categories/">åˆ†ç±»</a><a href="/tags/">æ ‡ç­¾</a><a href="/archives/">å½’æ¡£</a></div><div class="sitemap-group"><span class="fs14">ç«™ç‚¹</span><a target="_blank" rel="noopener" href="https://status.thatcoder.cn/status/public/">å…¬å…±æœåŠ¡</a><a target="_blank" rel="noopener" href="https://ai.thatcoder.cn/">ChatGPT</a><a target="_blank" rel="noopener" href="https://alist.thatcoder.cn/">æ–‡ä»¶èµ„æº</a><a target="_blank" rel="noopener" href="https://docs.thatapi.cn/">å…¬å…±æ¥å£</a></div><div class="sitemap-group"><span class="fs14">ç¤¾äº¤</span><a href="/links/">å‹äººå¸</a><a href="/links/#comments">ç•™è¨€æ¿</a><a href="/animes/">åœ¨è¿½ç•ª</a><a href="/cinemas/">è¿˜è¿½å‰§</a></div><div class="sitemap-group"><span class="fs14">æ›´å¤š</span><a href="/about/#tab_1-1/">æœ¬ç«™åŠ¨æ€</a><a target="_blank" rel="noopener" href="https://muselink.cc/naive">è”ç³»åšä¸»</a><a target="_blank" rel="noopener" href="https://github.com/ThatCoders">GitHub</a><a target="_blank" rel="noopener" href="https://gitee.com/thatcoder">Gitee</a></div></div><div class="text"><p style="text-align:center" >
æœ¬ç«™ç”± <a style="font-weight: bold;" href="/author/ThatCoder/">é’Ÿæ„</a> ä½¿ç”¨ <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0">Stellar 1.25.0</a> ä¸»é¢˜åˆ›å»ºã€‚
<br>
ç”± <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral">åˆæ‹äº‘</a> æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡
<br>
ç”± <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral">vercel</a> æä¾›æ‰˜ç®¡æœåŠ¡
<br>
<a href="https://beian.miit.gov.cn/" target="_blank">æ¹˜ICPå¤‡2023019799å·-1</a>
<br>
<!--ä¸è’œå­è®¡æ•°å™¨-->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!--æ·»åŠ ä¸€ä¸ªè®¿é—®é‡-->
<span>æ€»è®¿é—® <span id="busuanzi_value_site_pv" style="font-weight: bold;"></span> æ¬¡ | æœ¬é¡µè®¿é—® <span id="busuanzi_value_page_pv" style="font-weight: bold;"></span> æ¬¡</span> 
<div id="siteruntime"></div>
</p>
<script>
function siteTime(){
    window.setTimeout("siteTime()", 1000);
    var seconds = 1000
    var minutes = seconds * 60
    var hours = minutes * 60
    var days = hours * 24
    var years = days * 365
    var today = new Date()
    var todayYear = today.getFullYear()
    var todayMonth = today.getMonth()
    var todayDate = today.getDate()
    var todayHour = today.getHours()
    var todayMinute = today.getMinutes()
    var todaySecond = today.getSeconds()
    var t1 = Date.UTC(2020,4,30,08,00,00)
    var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond)
    var diff = t2-t1
    var diffYears = Math.floor(diff/years)
    var diffDays = Math.floor((diff/days)-diffYears*365)
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours)
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes)
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds)
    document.getElementById("siteruntime").innerHTML="<p style=\"text-align:center\">å°ç ´ç«™å·²é¢ æ²›æµç¦» "+diffYears+" å¹´ "+diffDays+" å¤© "+diffHours+" å°æ—¶ "+diffMinutes+" åˆ†é’Ÿ "+diffSeconds+" ç§’</p>"
}
siteTime();
</script>
</div></footer>
<div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg t="1705412886951" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8331" width="200" height="200"><path d="M638.72 970.666667h-256c-118.186667 0-198.272-25.002667-251.946667-78.72S52.053333 758.186667 52.053333 640V384c0-118.186667 25.002667-198.272 78.72-251.946667S264.533333 53.333333 382.72 53.333333h256c118.186667 0 198.272 25.002667 251.946667 78.72S969.386667 265.813333 969.386667 384v256c0 118.186667-25.002667 198.272-78.72 251.946667S756.906667 970.666667 638.72 970.666667z m-256-853.333334c-100.096 0-165.802667 19.2-206.72 59.946667S116.053333 283.904 116.053333 384v256c0 100.096 19.072 165.802667 59.946667 206.72S282.624 906.666667 382.72 906.666667h256c100.096 0 165.802667-19.072 206.72-59.946667S905.386667 740.096 905.386667 640V384c0-100.096-19.072-165.802667-59.946667-206.72S738.816 117.333333 638.72 117.333333z" p-id="8332"></path><path d="M638.72 970.666667a32 32 0 0 1-32-32V85.333333a32 32 0 0 1 32-32 32 32 0 0 1 32 32v853.333334a32 32 0 0 1-32 32zM340.053333 653.226667a31.914667 31.914667 0 0 1-22.613333-9.386667 32 32 0 0 1 0-45.269333L404.053333 512 317.44 425.386667a32 32 0 0 1 0-45.226667 32 32 0 0 1 45.226667 0l109.226666 109.226667a32 32 0 0 1 0 45.269333L362.666667 643.84a31.914667 31.914667 0 0 1-22.613334 9.386667z" p-id="8333"></path></svg>
  </button>
</div>
<div class="main-mask" onclick="sidebar.toggle()"></div></div></div><div class="scripts">
<script type="text/javascript">
  const stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.25.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0';
  stellar.config = {
    date_suffix: {
      just: 'åˆšåˆš',
      min: 'åˆ†é’Ÿå‰',
      hour: 'å°æ—¶å‰',
      day: 'å¤©å‰',
      month: 'ä¸ªæœˆå‰',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"post, page, docs","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js","memos":"/js/plugins/memos.js","marked":"/js/plugins/marked.js","timetmpl":"/js/plugins/timetmpl.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@10.3/swiper-bundle.min.css","js":"https://unpkg.com/swiper@10.3/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.bootcdn.net/ajax/libs/scrollReveal.js/4.0.9/scrollreveal.min.js","distance":"16px","duration":800,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img, .md-text.content p>img, .md-text.content li img , .wl-content img, waline_container .vcontent img, .timeline .body .image img,  .timeline .gallery img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('false' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":false,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied","toast":"å¤åˆ¶æˆåŠŸ"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script type="module" defer="defer">
    import { init } from 'https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js';
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    stellar.loadCSS('https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.css');
    stellar.loadScript('https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js', {defer:true, type:"module"}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
        init(Object.assign({"js":"https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js","css":"https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.css","serverURL":"https://waline.thatapi.cn/","commentCount":true,"pageview":false,"custom":{"css":"/custom/css/ZYWaline.css"},"search":false,"locale":{"placeholder":"  é‡äº‹ä¸å†³, å¯é—®æ˜¥é£..."},"emoji":["https://upyun.thatcdn.cn/public/web/emojis/bilibili","https://upyun.thatcdn.cn/public/web/emojis/qq","https://upyun.thatcdn.cn/public/web/emojis/tieba","https://upyun.thatcdn.cn/public/web/emojis/weibo"],"reaction":["https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_cute.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_chuckle.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_sunglasses.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_crazy.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_pick_nose.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_not_care.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_trollface.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_thumbsup.png"],"meta":["nick","mail","link"],"imageUploader":{"fileName":"file","tokenName":"Authorization","api":"https://lsky.thatcoder.cn/api/v1/upload","token":"Bearer 6|x9vHGJGHAnjqbO0PGEE5vM7r9S9hdqFA9bmdESdm","resp":"data.links.url"}}, {
        el: '#waline_container',
        path: path,
        
          imageUploader: function(file) {
            let headers = new Headers();
            headers.set('Accept', 'application/json');
            
              headers.set('Authorization', 'Bearer 6|x9vHGJGHAnjqbO0PGEE5vM7r9S9hdqFA9bmdESdm')
            
            let formData = new FormData();
            formData.append('file', file);
            return fetch('https://lsky.thatcoder.cn/api/v1/upload',{
              method: 'POST',
              body: formData,
              headers: headers
              }).then((resp) => resp.json())
                .then((resp) => resp.data.links.url)
          },
        
      }));
    });
  }
  stellar.loadCSS('/custom/css/ZYWaline.css');
  window.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOM fully loaded and parsed');
    load_comment();
  });

</script>







<!-- inject -->
<script type="text/javascript" src="/custom/js/ZYUtil.js"></script><script type="text/javascript" src="/custom/js/ZYDark.js"></script><script type="text/javascript" src="/custom/js/ZYCategory.js"></script><script type="text/javascript" src="/custom/js/ZYCode.js"></script><script type="text/javascript" src="/custom/js/timetmpl.js"></script>
</div></body></html>
