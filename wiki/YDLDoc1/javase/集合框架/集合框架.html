
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0" theme-name="Stellar" theme-version="1.25.0">
  
  <meta name="generator" content="Hexo 7.1.1">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>YDLDoc1ï¼šé›†åˆæ¡†æ¶ - é‚£ä¸ªç å†œ</title>

  
    <meta name="description" content="# ç¬¬12ç«  Javaé›†åˆæ¡†æ¶æç¤ºè¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1cQ4y1273v?p&#x3D;67open in new window# ä¸€ã€é›†åˆå¤§çº²# 1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„image-20210717194609366å…¶å®æœ‰äº†æˆ‘ä»¬çš„è¶…çº§æ•°ç»„çš„å®æˆ˜ä¹‹åï¼Œæˆ‘ä»¬å­¦ä¹ é›†åˆå°†ä¼šå¾ˆå®¹æ˜“ï¼Œjavaçš„é›†åˆæ¡†æ¶å°±æ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€å¥—æ›´åŠ æ–¹ä¾¿çš„å­˜å‚¨æ•°æ®çš„ç±»è€Œå·²ã€‚é›†åˆçš„ç›®">
<meta property="og:type" content="website">
<meta property="og:title" content="é›†åˆæ¡†æ¶">
<meta property="og:url" content="https://blog.thatcoder.cn/wiki/YDLDoc1/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html">
<meta property="og:site_name" content="é‚£ä¸ªç å†œ">
<meta property="og:description" content="# ç¬¬12ç«  Javaé›†åˆæ¡†æ¶æç¤ºè¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1cQ4y1273v?p&#x3D;67open in new window# ä¸€ã€é›†åˆå¤§çº²# 1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„image-20210717194609366å…¶å®æœ‰äº†æˆ‘ä»¬çš„è¶…çº§æ•°ç»„çš„å®æˆ˜ä¹‹åï¼Œæˆ‘ä»¬å­¦ä¹ é›†åˆå°†ä¼šå¾ˆå®¹æ˜“ï¼Œjavaçš„é›†åˆæ¡†æ¶å°±æ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€å¥—æ›´åŠ æ–¹ä¾¿çš„å­˜å‚¨æ•°æ®çš„ç±»è€Œå·²ã€‚é›†åˆçš„ç›®">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210717194609366-93d65fe8.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719104716936-99a370f5.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719151258779-297d3f82.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719145647660-080f986a.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719155749879-59e2019e.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719162005725-52d420fb.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908231431143-be5f4d93.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908232010018-a0098cc0.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908232303482-5262fc76.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908180935125-49a6da24.png">
<meta property="og:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908182643127-583f0fbb.png">
<meta property="article:published_time" content="2023-12-16T19:23:02.720Z">
<meta property="article:modified_time" content="2023-12-16T19:23:02.720Z">
<meta property="article:author" content="é’Ÿæ„">
<meta property="article:tag" content="é‚£ä¸ªç å†œ">
<meta property="article:tag" content="ç å†œé’Ÿæ„">
<meta property="article:tag" content="é’Ÿæ„çš„åšå®¢">
<meta property="article:tag" content="é’Ÿæ„åšå®¢">
<meta property="article:tag" content="That Coder">
<meta property="article:tag" content="thatcoder">
<meta property="article:tag" content="æºæŸ’æ‹¾æŸ’é›…èˆ">
<meta property="article:tag" content="æºWebGary">
<meta property="article:tag" content="giligili.work">
<meta property="article:tag" content="seclusion.work">
<meta property="article:tag" content="GalGame">
<meta property="article:tag" content="Hexo Stellar">
<meta property="article:tag" content="æ±Ÿè¥¿æœ¨æ‘æ‹“å“‰">
<meta property="article:tag" content="æ±Ÿè¥¿å´å½¦ç¥–">
<meta property="article:tag" content="æ±Ÿè¥¿èƒ¡æ­Œ">
<meta property="article:tag" content="é¾™å—æœ¨æ‘æ‹“å“‰">
<meta property="article:tag" content="é¾™å—å´å½¦ç¥–">
<meta property="article:tag" content="é¾™å—èƒ¡æ­Œ">
<meta property="article:tag" content="ä¹æ±ŸèŒä¸šæŠ€æœ¯å­¦é™¢">
<meta property="article:tag" content="å—æ˜Œäº¤é€šå­¦é™¢">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210717194609366-93d65fe8.png">
  
  
  
  <meta name="keywords" content="é‚£ä¸ªç å†œ,ç å†œé’Ÿæ„,é’Ÿæ„çš„åšå®¢,é’Ÿæ„åšå®¢,That Coder,thatcoder,æºæŸ’æ‹¾æŸ’é›…èˆ,æºWebGary,giligili.work,seclusion.work,GalGame,Hexo Stellar,æ±Ÿè¥¿æœ¨æ‘æ‹“å“‰,æ±Ÿè¥¿å´å½¦ç¥–,æ±Ÿè¥¿èƒ¡æ­Œ,é¾™å—æœ¨æ‘æ‹“å“‰,é¾™å—å´å½¦ç¥–,é¾™å—èƒ¡æ­Œ,ä¹æ±ŸèŒä¸šæŠ€æœ¯å­¦é™¢,å—æ˜Œäº¤é€šå­¦é™¢">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="é‚£ä¸ªç å†œ" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://upyun.thatcdn.cn/hexo/stellar/image/favicon.webp">
  

  
    
<link rel="stylesheet" href="/custom/css/ZYCode.css">

  

  
  <link rel="Shortcut Icon" href="/favicon.ico" type="image/x-icon" /><link rel="stylesheet" href="https://upyun.thatcdn.cn/public/font/lxgw/result.css" /><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="/custom/css/ZYTimetmpl.css" /><meta itemprop="name" content="é’Ÿæ„åšå®¢"><meta itemprop="description" content="ç¬”åé’Ÿæ„, è®°å½•ä»£ç ä¸ç”Ÿæ´»."><meta itemprop="image" content="https://upyun.thatcdn.cn/hexo/stellar/image/shot.webp"><link rel="stylesheet" href="/custom/css/ZYGlobal.css"><link rel="stylesheet" href="/custom/css/ZYDark.css"><script type="text/javascript" src="/custom/js/header.js"></script><!-- Clarity tracking code for https://blog.thatcoder.cn/ -->
<script>    (function(c,l,a,r,i,t,y){        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);    })(window, document, "clarity", "script", "fi1zg7i5q5");</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H6GM3XZWV7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-H6GM3XZWV7');
</script>
<!-- BaiDu-ZhanZhang
<meta name="baidu-site-verification" content="codeva-8tnFVr706d" />
<!-- BaiDu-Tongji -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?233765a020502d5d6a92d4fe306d36c2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>



<div class="l_body content tech" id="start" layout="wiki" ><aside class="l_left"><div class="sidebar-container">


<header class="header"><div class="logo-wrap"><div class="icon"><img no-lazy class="icon" src="/custom/img/ydl.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></div><a class="title" href="/wiki/YDLDoc1/javase/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6.html"><div class="main" ff="title">YDLDoc1</div><div class="sub normal cap">å…³äºYDLDocçš„ç¬”è®°</div><div class="sub hover cap" style="opacity:0"> ä¸å¯¹ä¹‹å¤„è¯·æŒ‡å‡º</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" class="icon search-icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" data-filter="/wiki/YDLDoc1/" placeholder="åœ¨ /wiki/YDLDoc1/ ä¸­æœç´¢"></form><div id="search-result"></div><div class="search-no-result">æ²¡æœ‰æ‰¾åˆ°å†…å®¹ï¼</div></div>


<nav class="menu dis-select"><a class="nav-item" title="åšå®¢" href="/"><span>åšå®¢</span></a><a class="nav-item active" title="ç¬”è®°" href="/wiki/"><span>ç¬”è®°</span></a><a class="nav-item" title="ä¾¿ç­¾" href="/notes/"><span>ä¾¿ç­¾</span></a><a class="nav-item" title="ç¤¾äº¤" href="/links/"><span>ç¤¾äº¤</span></a></nav>
</div>
<div class="widgets">



<widget class="widget-wrapper toc multi" id="data-toc" collapse="auto"><div class="widget-body fs14"><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6.html#start"><span class="toc-text">å˜é‡å’Œæ ‡è¯†ç¬¦</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"><span class="toc-text">javaæ­£åˆ™è¡¨è¾¾å¼</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/IO%E6%B5%81/IO%E6%B5%81.html"><span class="toc-text">IOæµ</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E6%A0%91/%E6%A0%91.html"><span class="toc-text">æ ‘</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/nio/nio.html"><span class="toc-text">nio</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6/%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6.html"><span class="toc-text">å¼‚å¸¸æœºåˆ¶</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B.html"><span class="toc-text">å¤šçº¿ç¨‹</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E5%B8%B8%E7%94%A8api/%E5%B8%B8%E7%94%A8api.html"><span class="toc-text">å¸¸ç”¨api</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E5%8F%8D%E5%B0%84/%E5%8F%8D%E5%B0%84.html"><span class="toc-text">åå°„</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.html"><span class="toc-text">ç½‘ç»œç¼–ç¨‹</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5.html"><span class="toc-text">æµç¨‹æ§åˆ¶è¯­å¥</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E6%B3%9B%E5%9E%8B%E5%92%8C%E6%9E%9A%E4%B8%BE/%E6%B3%9B%E5%9E%8B%E5%92%8C%E6%9E%9A%E4%B8%BE.html"><span class="toc-text">æ³›å‹å’Œæšä¸¾</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E6%95%B0%E7%BB%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84%E5%92%8C%E7%AE%97%E6%B3%95.html"><span class="toc-text">æ•°ç»„å’Œç®—æ³•</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/mysql%E5%AD%A6%E4%B9%A0/JDBC/JDBC.html"><span class="toc-text">JDBC</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80.html"><span class="toc-text">è®¡ç®—æœºåŸºç¡€</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/web/bom/bom.html"><span class="toc-text">bom</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/mysql%E5%AD%A6%E4%B9%A0/mysql%E5%85%A5%E9%97%A8/mysql%E5%85%A5%E9%97%A8.html"><span class="toc-text">mysqlå…¥é—¨</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/mysql%E5%AD%A6%E4%B9%A0/mysql%E8%BF%9B%E9%98%B6/mysql%E8%BF%9B%E9%98%B6.html"><span class="toc-text">mysqlè¿›é˜¶</span></a></div><div class="doc-tree active"><a class="doc-tree-link active" href="/wiki/YDLDoc1/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.html"><span class="toc-text">é›†åˆæ¡†æ¶</span><svg t="1705415018387" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14793" width="200" height="200"><path d="M256 896a42.666667 42.666667 0 0 1-20.906667-5.546667A42.666667 42.666667 0 0 1 213.333333 853.333333V227.413333A97.28 97.28 0 0 1 307.2 128h409.6A97.28 97.28 0 0 1 810.666667 227.413333V853.333333a42.666667 42.666667 0 0 1-21.333334 36.693334 42.666667 42.666667 0 0 1-42.666666 0l-241.92-136.96-227.413334 136.533333A42.666667 42.666667 0 0 1 256 896z" p-id="14794"></path></svg></a><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%9B%86%E5%90%88%E5%A4%A7%E7%BA%B2"><span class="toc-text"> ä¸€ã€é›†åˆå¤§çº²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E9%9B%86%E5%90%88%E7%9A%84%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84"><span class="toc-text"> 1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 2ã€å¸¸ç”¨æ¥å£ä»‹ç»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%9B%86%E5%90%88%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-text"> äºŒã€é›†åˆçš„å¢åˆ æ”¹æŸ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text"> ä¸‰ã€æºç åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81arraylist"><span class="toc-text"> 1ã€Arraylist</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="toc-text"> ï¼ˆ1ï¼‰æˆå‘˜å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text"> ï¼ˆ2ï¼‰æ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-add%E6%96%B9%E6%B3%95"><span class="toc-text"> ï¼ˆ3ï¼‰addæ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-%E6%9F%A5%E6%89%BE%E5%92%8C%E5%88%A0%E9%99%A4"><span class="toc-text"> ï¼ˆ4ï¼‰æŸ¥æ‰¾å’Œåˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81linkedlist"><span class="toc-text"> 2ã€linkedlist</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F-1"><span class="toc-text"> ï¼ˆ1ï¼‰æˆå‘˜å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E6%9E%84%E9%80%A0%E5%99%A8-1"><span class="toc-text"> ï¼ˆ2ï¼‰æ„é€ å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text"> ï¼ˆ3ï¼‰æ·»åŠ çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-%E6%9F%A5%E6%89%BE%E5%92%8C%E5%88%A0%E9%99%A4-1"><span class="toc-text"> ï¼ˆ4ï¼‰æŸ¥æ‰¾å’Œåˆ é™¤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81hashmap"><span class="toc-text"> 3ã€hashmap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E5%88%9D%E6%AD%A5%E4%BA%86%E8%A7%A3"><span class="toc-text"> ï¼ˆ1ï¼‰åˆæ­¥äº†è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-text"> ï¼ˆ2ï¼‰æˆå‘˜å˜é‡çš„åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E6%9E%84%E9%80%A0"><span class="toc-text"> ï¼ˆ3ï¼‰æ„é€ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-put%E6%96%B9%E6%B3%95"><span class="toc-text"> ï¼ˆ4ï¼‰putæ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_5-%E6%89%A9%E5%AE%B9%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text"> ï¼ˆ5ï¼‰æ‰©å®¹çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_6-%E6%A0%91%E5%8C%96%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81"><span class="toc-text"> ï¼ˆ6ï¼‰æ ‘åŒ–çš„éƒ¨åˆ†ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81hashset"><span class="toc-text"> 4ã€hashset</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%9B%86%E5%90%88%E7%9A%84%E9%81%8D%E5%8E%86"><span class="toc-text"> å››ã€é›†åˆçš„éå†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E6%99%AE%E9%80%9Afor%E5%BE%AA%E7%8E%AF"><span class="toc-text"> 1ã€æ™®é€šforå¾ªç¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text"> 2ã€è¿­ä»£å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-text"> ï¼ˆ1ï¼‰è¿­ä»£å™¨ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text"> ï¼ˆ2ï¼‰è¿­ä»£å™¨çš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E5%A2%9E%E5%BC%BAfor%E5%BE%AA%E7%8E%AF"><span class="toc-text"> 3ã€å¢å¼ºforå¾ªç¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81%E8%BF%AD%E4%BB%A3%E4%B8%AD%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text"> 4ã€è¿­ä»£ä¸­åˆ é™¤å…ƒç´ </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-for%E5%BE%AA%E7%8E%AF%E4%B8%AD%E5%88%A0%E9%99%A4"><span class="toc-text"> ï¼ˆ1ï¼‰forå¾ªç¯ä¸­åˆ é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text"> ï¼ˆ2ï¼‰ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%85%B6%E4%BB%96%E7%9A%84%E9%9B%86%E5%90%88%E7%B1%BB"><span class="toc-text"> äº”ã€å…¶ä»–çš„é›†åˆç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81linkedhashmap"><span class="toc-text"> 1ã€Linkedhashmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81treemap"><span class="toc-text"> 2ã€TreeMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81collections"><span class="toc-text"> 3ã€Collections</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text"> å…­ã€çº¿ç¨‹å®‰å…¨é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E5%B9%B6%E5%8F%91%E4%BF%AE%E6%94%B9%E5%BC%82%E5%B8%B8"><span class="toc-text"> 1ã€å¹¶å‘ä¿®æ”¹å¼‚å¸¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E6%95%B0%E6%8D%AE%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text"> 2ã€æ•°æ®é”™è¯¯çš„é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81%E5%8A%A0%E9%94%81%E8%A7%A3%E5%86%B3"><span class="toc-text"> 3ã€åŠ é”è§£å†³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81%E7%9B%AE%E5%89%8D%E5%B8%B8%E7%94%A8%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%9B%86%E5%90%88"><span class="toc-text"> 4ã€ç›®å‰å¸¸ç”¨çš„çº¿ç¨‹å®‰å…¨é›†åˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-copyonwritelist"><span class="toc-text"> ï¼ˆ1ï¼‰CopyOnWriteList</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-concurrenthashmap"><span class="toc-text"> ï¼ˆ2ï¼‰ConcurrentHashMap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_5%E3%80%81guava%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%8D%E5%8F%AF%E5%8F%98%E9%9B%86%E5%90%88"><span class="toc-text"> 5ã€guavaæä¾›çš„ä¸å¯å˜é›†åˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-text"> ä¸ƒã€JUnitå•å…ƒæµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81junit-%E5%85%A5%E9%97%A8"><span class="toc-text"> 1ã€JUnit å…¥é—¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81junit-%E6%96%AD%E8%A8%80"><span class="toc-text"> 2ã€JUnit æ–­è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81junit-%E6%B3%A8%E8%A7%A3"><span class="toc-text"> 3ã€JUnit æ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_4%E3%80%81%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-text"> 4ã€å‘½åè§„èŒƒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94"><span class="toc-text"> å…­ã€æ€§èƒ½å¯¹æ¯”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81hashtable%E5%92%8Cconcurrenthashmap"><span class="toc-text"> 1ã€Hashtableå’ŒConcurrentHashMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81arraylist%E5%92%8Clinkedlist"><span class="toc-text"> 2ã€arraylistå’Œlinkedlist</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E9%A1%BA%E5%BA%8F%E6%B7%BB%E5%8A%A0"><span class="toc-text"> ï¼ˆ1ï¼‰é¡ºåºæ·»åŠ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E4%BD%BF%E7%94%A8for%E5%BE%AA%E7%8E%AF%E8%BF%AD%E4%BB%A3%E8%8E%B7%E5%8F%96"><span class="toc-text"> ï¼ˆ2ï¼‰ä½¿ç”¨forå¾ªç¯è¿­ä»£è·å–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E8%BF%AD%E4%BB%A3%E8%8E%B7%E5%8F%96"><span class="toc-text"> ï¼ˆ3ï¼‰ä½¿ç”¨è¿­ä»£å™¨è¿­ä»£è·å–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-%E5%A4%B4%E6%8F%92"><span class="toc-text"> ï¼ˆ4ï¼‰å¤´æ’</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_5-%E9%9A%8F%E6%9C%BA%E5%88%A0%E9%99%A4"><span class="toc-text"> ï¼ˆ5ï¼‰éšæœºåˆ é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_6-%E8%87%AA%E5%B8%A6%E7%9A%84%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95"><span class="toc-text"> ï¼ˆ6ï¼‰è‡ªå¸¦çš„æ’åºæ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_7-%E6%80%9D%E8%80%83"><span class="toc-text"> ï¼ˆ7ï¼‰æ€è€ƒ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81java8%E7%89%B9%E6%80%A7"><span class="toc-text"> ä¸ƒã€Java8ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81%E6%8E%A5%E5%8F%A3%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95"><span class="toc-text"> 1ã€æ¥å£é»˜è®¤æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3"><span class="toc-text"> 2ã€å‡½æ•°å¼æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81optional"><span class="toc-text"> 3ã€Optional</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E7%AE%80%E4%BB%8B"><span class="toc-text"> ï¼ˆ1ï¼‰ç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-optional%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-text"> ï¼ˆ2ï¼‰Optionalå¯¹è±¡çš„åˆ›å»º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-optional-%E7%B1%BB%E5%85%B8%E5%9E%8B%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text"> ï¼ˆ3ï¼‰Optional ç±»å…¸å‹æ¥å£çš„ä½¿ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81stream%E7%BC%96%E7%A8%8B"><span class="toc-text"> å…«ã€Streamç¼–ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#_1%E3%80%81stream%E6%B5%81%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-text"> 1ã€Streamæµçš„åˆ›å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_2%E3%80%81stream%E7%9A%84%E7%BB%88%E6%AD%A2%E6%93%8D%E4%BD%9C"><span class="toc-text"> 2ã€Streamçš„ç»ˆæ­¢æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E9%81%8D%E5%8E%86-%E5%8C%B9%E9%85%8D-foreach-find-match"><span class="toc-text"> ï¼ˆ1ï¼‰éå†&#x2F;åŒ¹é…ï¼ˆforeach&#x2F;find&#x2F;matchï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E5%BD%92%E9%9B%86-tolist-toset-tomap"><span class="toc-text"> ï¼ˆ2ï¼‰å½’é›†(toList&#x2F;toSet&#x2F;toMap)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E7%BB%9F%E8%AE%A1-count-averaging-sum-max-min"><span class="toc-text"> ï¼ˆ3ï¼‰ ç»Ÿè®¡(count&#x2F;averaging&#x2F;sum&#x2F;max&#x2F;minï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-%E5%BD%92%E7%BA%A6-reduce"><span class="toc-text"> ï¼ˆ4ï¼‰å½’çº¦(reduce)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_5-%E6%8E%A5%E5%90%88-joining"><span class="toc-text"> ï¼ˆ5ï¼‰æ¥åˆ(joining)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_6-%E5%88%86%E7%BB%84-partitioningby-groupingby"><span class="toc-text"> ï¼ˆ6ï¼‰åˆ†ç»„(partitioningBy&#x2F;groupingBy)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#_3%E3%80%81stream%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C"><span class="toc-text"> 3ã€Streamä¸­é—´æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#_1-%E7%AD%9B%E9%80%89-filter"><span class="toc-text"> ï¼ˆ1ï¼‰ç­›é€‰ï¼ˆfilterï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_2-%E6%98%A0%E5%B0%84-map-flatmap"><span class="toc-text"> ï¼ˆ2ï¼‰æ˜ å°„(map&#x2F;flatMap)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_3-%E6%8E%92%E5%BA%8F-sorted"><span class="toc-text"> ï¼ˆ3ï¼‰æ’åº(sorted)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_4-peek%E6%93%8D%E4%BD%9C"><span class="toc-text"> ï¼ˆ4ï¼‰peekæ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#_5-%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="toc-text"> ï¼ˆ5ï¼‰å…¶ä»–æ“ä½œ</span></a></li></ol></li></ol></li></ol></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/web/css/css.html"><span class="toc-text">css</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/%E5%85%B6%E4%BB%96/git%E5%85%A5%E9%97%A8/git%E5%85%A5%E9%97%A8.html"><span class="toc-text">gitå…¥é—¨</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/web/html/html.html"><span class="toc-text">html</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/javase/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html"><span class="toc-text">é¢å‘å¯¹è±¡</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/web/js/js.html"><span class="toc-text">js</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/%E5%85%B6%E4%BB%96/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html"><span class="toc-text">linuxæ“ä½œç³»ç»Ÿ</span></a></div><div class="doc-tree"><a class="doc-tree-link" href="/wiki/YDLDoc1/web/jsp/jsp.html"><span class="toc-text">jsp</span></a></div></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/ThatCoders" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-laptop-code"></i></a><a class="social" href="https://music.163.com/#/user/home?id=134968139" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-music"></i></a><a class="social" href="https://space.bilibili.com/1664687779" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-champagne-glasses"></i></a><a class="social" href="https://muselink.cc/naive" target="_blank" rel="external nofollow noopener noreferrer"><i class="fa-solid fa-comments-dollar"></i></a><a class="social" href="javaScript:hud.toast('ğŸŒ™ å¤œé—´æ¨¡å¼');" rel="noopener noreferrer"><img class="lazy" id="ThemeM" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/Moon.png"/></a><a class="social" href="javaScript:hud.toast('â˜€ æ—¥é—´æ¨¡å¼');" rel="noopener noreferrer"><img class="lazy" id="ThemeL" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/Sun.png"/></a><a class="social" href="javaScript:hud.toast('ğŸ’» è·Ÿéšç³»ç»Ÿ');" rel="noopener noreferrer"><img class="lazy" id="ThemeAI" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/icon/AI.png"/></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="bread-nav fs12"><div class="left"><div id="breadcrumb"><a class="cap breadcrumb" href="/">ä¸»é¡µ</a>
<span class="sep"></span><a class="cap breadcrumb" id="menu" href="/wiki">æ–‡æ¡£</a><span class="sep"></span><a class="cap breadcrumb" id="proj" href="/wiki/YDLDoc1/javase/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6/%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E8%AF%86%E7%AC%A6.html">YDLDoc1</a></div>
<div id="post-meta"><span class="author">æ›´æ–°äºï¼š</span><time datetime="2023-12-16T19:23:02.720Z">2023-12-17</time></span></div></div>
</div>
<article class="md-text content"><h1 class="article-title"><span>é›†åˆæ¡†æ¶</span></h1><div class="theme-hope-content"><h1 id="ç¬¬12ç« -javaé›†åˆæ¡†æ¶" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ç¬¬12ç« -javaé›†åˆæ¡†æ¶">#</a> ç¬¬12ç«  Javaé›†åˆæ¡†æ¶</h1><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>è¯¾ç¨‹è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1cQ4y1273v?p=67" rel="noopener noreferrer" target="_blank">https://www.bilibili.com/video/BV1cQ4y1273v?p=67<span><svg aria-hidden="true" class="external-link-icon" focusable="false" height="15" viewbox="0 0 100 100" width="15" x="0px" xmlns="http://www.w3.org/2000/svg" y="0px"><path d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z" fill="currentColor"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><h2 id="ä¸€ã€é›†åˆå¤§çº²" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸€ã€é›†åˆå¤§çº²">#</a> ä¸€ã€é›†åˆå¤§çº²</h2><h3 id="_1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„">#</a> 1ã€é›†åˆçš„ç»§æ‰¿ç»“æ„</h3><figure><img class="lazy" alt="image-20210717194609366" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210717194609366-93d65fe8.png" tabindex="0"/><figcaption>image-20210717194609366</figcaption></figure><p>å…¶å®æœ‰äº†æˆ‘ä»¬çš„è¶…çº§æ•°ç»„çš„å®æˆ˜ä¹‹åï¼Œæˆ‘ä»¬å­¦ä¹ é›†åˆå°†ä¼šå¾ˆå®¹æ˜“ï¼Œjavaçš„é›†åˆæ¡†æ¶å°±æ˜¯ç»™æˆ‘ä»¬æä¾›äº†ä¸€å¥—æ›´åŠ æ–¹ä¾¿çš„å­˜å‚¨æ•°æ®çš„ç±»è€Œå·²ã€‚</p><p>é›†åˆçš„ç›®çš„æ˜¯æ–¹ä¾¿çš„å­˜å‚¨å’Œæ“ä½œæ•°æ®ï¼Œå…¶å®è¯´åˆ°åº•æ— éå°±æ˜¯<code>å¢åˆ æ”¹æŸ¥</code>ã€‚</p><h3 id="_2ã€å¸¸ç”¨æ¥å£ä»‹ç»" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€å¸¸ç”¨æ¥å£ä»‹ç»">#</a> 2ã€å¸¸ç”¨æ¥å£ä»‹ç»</h3><p>Listï¼ˆ åˆ—è¡¨ï¼‰çº¿æ€§è¡¨ï¼š</p><ul><li>å’Œæ•°ç»„ç±»ä¼¼ï¼ŒListå¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾å…ƒç´ æ•ˆç‡é«˜ï¼Œæ’å…¥åˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚</li></ul><p>Setï¼ˆè¡¨ï¼‰ä¹Ÿæ˜¯çº¿æ€§è¡¨</p><ul><li>æ£€ç´¢å…ƒç´ æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤ä¸ä¼šå¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚</li></ul><p>Mapï¼ˆæ˜ å°„ï¼‰</p><ul><li>Mapï¼ˆæ˜ å°„ï¼‰ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼ŒMapé‡Œä¿å­˜ç€ä¸¤ç»„æ•°æ®ï¼škeyå’Œvalueï¼Œå®ƒä»¬éƒ½å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä½†keyä¸èƒ½é‡å¤ã€‚æ‰€ä»¥é€šè¿‡æŒ‡å®šçš„keyå°±å¯ä»¥å–å‡ºå¯¹åº”çš„valueã€‚</li><li>Listï¼ŒSetéƒ½æ˜¯ç»§æ‰¿è‡ªCollectionæ¥å£ï¼ŒMapåˆ™ä¸æ˜¯</li></ul><h2 id="äºŒã€é›†åˆçš„å¢åˆ æ”¹æŸ¥" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#äºŒã€é›†åˆçš„å¢åˆ æ”¹æŸ¥">#</a> äºŒã€é›†åˆçš„å¢åˆ æ”¹æŸ¥</h2><p>æ€è€ƒï¼Œå…¶å®æˆ‘ä»¬èƒ½ä»å‡ ä¸ªæ¥å£æºç ä¸­çœ‹æ˜ç™½é›†åˆåˆ°åº•æ˜¯æ€ä¹ˆè¿›è¡Œå¢åˆ æ”¹æŸ¥çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">List</span>&amp;lt;E&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span>&amp;lt;E&amp;gt; &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object o)</span>;<br><br>    Iterator&amp;lt;E&amp;gt; iterator();<br><br>    &amp;lt;T&amp;gt; T[] toArray(T[] a);<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Object o)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">containsAll</span><span class="hljs-params">(Collection&amp;lt;?&amp;gt; c)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">addAll</span><span class="hljs-params">(Collection&amp;lt;? extends E&amp;gt; c)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">addAll</span><span class="hljs-params">(<span class="hljs-type">int</span> index, Collection&amp;lt;? extends E&amp;gt; c)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">removeAll</span><span class="hljs-params">(Collection&amp;lt;?&amp;gt; c)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span>;<br><br>    E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;<br><br>    E <span class="hljs-title function_">set</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span>;<br><br>    E <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä½ ä¼šå‘ç°setå¤©ç„¶æ²¡æœ‰ä¿®æ”¹çš„æ–¹æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Set</span>&amp;lt;E&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span>&amp;lt;E&amp;gt; &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object o)</span>;<br><br>    Iterator&amp;lt;E&amp;gt; iterator();<br><br>    Object[] toArray();<br><br>    &amp;lt;T&amp;gt; T[] toArray(T[] a);<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Object o)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">containsAll</span><span class="hljs-params">(Collection&amp;lt;?&amp;gt; c)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">addAll</span><span class="hljs-params">(Collection&amp;lt;? extends E&amp;gt; c)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">removeAll</span><span class="hljs-params">(Collection&amp;lt;?&amp;gt; c)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Map</span>&amp;lt;K,V&amp;gt; &#123;<br><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">containsKey</span><span class="hljs-params">(Object key)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">containsValue</span><span class="hljs-params">(Object value)</span>;<br><br>    V <span class="hljs-title function_">get</span><span class="hljs-params">(Object key)</span>;<br><br>    V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span>;<br><br>    V <span class="hljs-title function_">remove</span><span class="hljs-params">(Object key)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">putAll</span><span class="hljs-params">(Map&amp;lt;? extends K, ? extends V&amp;gt; m)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span>;<br><br>    Set&amp;lt;K&amp;gt; keySet();<br><br>    Collection&amp;lt;V&amp;gt; values();<br><br>    Set&amp;lt;Map.Entry&amp;lt;K, V&amp;gt;&amp;gt; entrySet();<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€æºç åˆ†æ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸‰ã€æºç åˆ†æ">#</a> ä¸‰ã€æºç åˆ†æ</h2><p>æœ¬èŠ‚çŸ¥è¯†æ¯”è¾ƒéš¾ï¼Œå¤§å®¶é‡åŠ›è€Œè¡Œï¼Œèƒ½å­¦ä¼šå¤šå°‘æ˜¯å¤šå°‘ï¼Œç‰¹åˆ«æ˜¯hashmapã€‚<strong>æœ¬èŠ‚çš„å†…å®¹å¯ä»¥ç°åœ¨å­¦ä¹ ï¼Œä¹Ÿå¯ä»¥ä»¥åå­¦ä¹ ã€‚</strong></p><p><strong>ç¬¬ä¸€æ¬¡çœ‹æºç ï¼Œè¯´è¯´æ³¨æ„çš„é—®é¢˜ï¼š</strong></p><ul><li>ä¸€å®šè¦è·Ÿç€æˆ‘çš„èŠ‚å¥çœ‹ã€‚</li><li>ä¸€å®šè¦ä¸“æ³¨ï¼Œéœ€è¦ä¸Šä¸‹æ–‡çš„ç»“åˆé˜…è¯»ã€‚</li><li>ä¸è¦å¤ªæ‰£ç»†èŠ‚ï¼ŒæŠŠæºä»£ç çš„æ•´ä½“æ€è·¯é˜…è¯»ä¸‹æ¥å°±è¡Œäº†ã€‚</li><li>æœ‰æ—¶é—´å¤šè¯»å‡ æ¬¡ï¼Œæ…¢æ…¢è„±ç¦»æˆ‘çš„è§†é¢‘ã€‚</li></ul><h3 id="_1ã€arraylist" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€arraylist">#</a> 1ã€Arraylist</h3><h4 id="_1-æˆå‘˜å˜é‡" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-æˆå‘˜å˜é‡">#</a> ï¼ˆ1ï¼‰æˆå‘˜å˜é‡</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é»˜è®¤çš„ç©ºæ•°ç»„</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;<br><br><span class="hljs-comment">// å®é™…å­˜æ•°æ®çš„æ•°ç»„</span><br><span class="hljs-keyword">transient</span> Object[] elementData; <br><br><span class="hljs-comment">// é»˜è®¤å®¹é‡</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DEFAULT_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ„é€ å™¨" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-æ„é€ å™¨">#</a> ï¼ˆ2ï¼‰æ„é€ å™¨</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ç©ºæ•°ç»„</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123;<br>    <span class="hljs-keyword">if</span> (initialCapacity &amp;gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">this</span>.elementData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[initialCapacity];<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (initialCapacity == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">this</span>.elementData = EMPTY_ELEMENTDATA;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Illegal Capacity: &quot;</span>+<br>                                           initialCapacity);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// ArrayListè¿˜å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªé›†åˆ</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">(Collection&amp;lt;? extends E&amp;gt; c)</span> &#123;<br>    elementData = c.toArray();<br>    <span class="hljs-keyword">if</span> ((size = elementData.length) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// é›†åˆä¸­æœ‰æ•°æ®å°±æ‹·è´æ•°æ®</span><br>        <span class="hljs-keyword">if</span> (elementData.getClass() != Object[].class)<br>            elementData = Arrays.copyOf(elementData, size, Object[].class);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// replace with empty array.</span><br>        <span class="hljs-built_in">this</span>.elementData = EMPTY_ELEMENTDATA;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-addæ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-addæ–¹æ³•">#</a> ï¼ˆ3ï¼‰addæ–¹æ³•</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-comment">// ç¡®ä¿èƒ½ä¸èƒ½æ”¾è¿›å»</span><br>    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <br>    elementData[size++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureCapacityInternal</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));<br>&#125;<br><br><span class="hljs-comment">// æ ¹æ®æ•°ç»„é•¿åº¦å’Œä¼ å…¥çš„å®¹é‡å€¼è®¡ç®—å®¹é‡</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculateCapacity</span><span class="hljs-params">(Object[] elementData, <span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–æ—¶ å°±æ˜¯ç©ºå•Šï¼Œä»–ä¼šé€‰æ‹©10å½“ä»–çš„å®¹é‡å€¼ã€‚</span><br>    <span class="hljs-keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;<br>        <span class="hljs-keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);<br>    &#125;<br>    <span class="hljs-keyword">return</span> minCapacity;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureExplicitCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;ã€<br>    <span class="hljs-comment">// è®°å½•äº†é›†åˆè¢«ä¿®æ”¹çš„æ¬¡æ•°</span><br>    modCount++;<br>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &amp;gt; <span class="hljs-number">0</span>)<br>        grow(minCapacity);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-comment">// æ•°ç»„æ‰©å®¹çš„åœ°æ–¹</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">grow</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// è·å–æ—§çš„å®¹é‡</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCapacity</span> <span class="hljs-operator">=</span> elementData.length;<br>    <span class="hljs-comment">// å¾ˆæ˜æ˜¾æ‰©å®¹äº†1.5å€</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">newCapacity</span> <span class="hljs-operator">=</span> oldCapacity + (oldCapacity &amp;gt;&amp;gt; <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &amp;lt; <span class="hljs-number">0</span>)<br>        newCapacity = minCapacity;<br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &amp;gt; <span class="hljs-number">0</span>)<br>        newCapacity = hugeCapacity(minCapacity);<br>    <span class="hljs-comment">// æ‰©å®¹åæ‹·è´æ•°æ®</span><br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-æŸ¥æ‰¾å’Œåˆ é™¤" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-æŸ¥æ‰¾å’Œåˆ é™¤">#</a> ï¼ˆ4ï¼‰æŸ¥æ‰¾å’Œåˆ é™¤</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    rangeCheck(index);<br>    <span class="hljs-keyword">return</span> elementData(index);<br>&#125;<br><br>E <span class="hljs-title function_">elementData</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">return</span> (E) elementData[index];<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    rangeCheck(index);<br><br>    modCount++;<br>    <span class="hljs-type">E</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> elementData(index);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">numMoved</span> <span class="hljs-operator">=</span> size - index - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (numMoved &amp;gt; <span class="hljs-number">0</span>)<br>        <span class="hljs-comment">// System.arraycopy </span><br>        <span class="hljs-comment">//  Object src : åŸæ•°ç»„</span><br>        <span class="hljs-comment">//  int srcPos : ä»å…ƒæ•°æ®çš„èµ·å§‹ä½ç½®å¼€å§‹</span><br>ã€€ã€€     <span class="hljs-comment">//  Object dest : ç›®æ ‡æ•°ç»„</span><br>ã€€ã€€     <span class="hljs-comment">//  int destPos : ç›®æ ‡æ•°ç»„çš„å¼€å§‹èµ·å§‹ä½ç½®</span><br>ã€€ã€€     <span class="hljs-comment">//  int length  : è¦copyçš„æ•°ç»„çš„é•¿åº¦</span><br>        System.arraycopy(elementData, index+<span class="hljs-number">1</span>, elementData, index,<br>                         numMoved);<br>    elementData[--size] = <span class="hljs-literal">null</span>; <br>    <span class="hljs-keyword">return</span> oldValue;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æºç é‡Œèƒ½çœ‹åˆ°çš„ä¿¡æ¯ï¼š</p><p>1ã€arraylistæ˜¯åŸºäºæ•°ç»„å®ç°çš„ã€‚</p><p>2ã€é»˜è®¤å®¹é‡æ˜¯10ï¼Œæ¯æ¬¡æ‰©å®¹æ˜¯1.5å€çš„æ‰©å®¹ï¼ˆoldCapacity + (oldCapacity &gt;&gt; 1)ï¼‰ã€‚</p><h3 id="_2ã€linkedlist" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€linkedlist">#</a> 2ã€linkedlist</h3><h4 id="_1-æˆå‘˜å˜é‡-1" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-æˆå‘˜å˜é‡-1">#</a> ï¼ˆ1ï¼‰æˆå‘˜å˜é‡</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">transient</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">// ä¿å­˜å¤´ç»“ç‚¹</span><br><span class="hljs-keyword">transient</span> Node&amp;lt;E&amp;gt; first;<br><br><span class="hljs-comment">// ä¿å­˜å°¾èŠ‚ç‚¹</span><br><span class="hljs-keyword">transient</span> Node&amp;lt;E&amp;gt; last;<br><br><span class="hljs-comment">// èŠ‚ç‚¹çš„å®šä¹‰</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&amp;lt;E&amp;gt; &#123;<br>    E item;<br>    Node&amp;lt;E&amp;gt; next;<br>    Node&amp;lt;E&amp;gt; prev;<br><br>    Node(Node&amp;lt;E&amp;gt; prev, E element, Node&amp;lt;E&amp;gt; next) &#123;<br>        <span class="hljs-built_in">this</span>.item = element;<br>        <span class="hljs-built_in">this</span>.next = next;<br>        <span class="hljs-built_in">this</span>.prev = prev;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œèƒ½å¤Ÿçœ‹å‡ºlinkedlistæ˜¯åŸºäºåŒå‘é“¾è¡¨å®ç°çš„ã€‚</p><h4 id="_2-æ„é€ å™¨-1" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-æ„é€ å™¨-1">#</a> ï¼ˆ2ï¼‰æ„é€ å™¨</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * Constructs an empty list.</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedList</span><span class="hljs-params">()</span> &#123;<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * Constructs a list containing the elements of the specified</span><br><span class="hljs-comment">  * collection, in the order they are returned by the collection&#x27;s</span><br><span class="hljs-comment">  * iterator.</span><br><span class="hljs-comment">  *</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@param</span>  c the collection whose elements are to be placed into this list</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@throws</span> NullPointerException if the specified collection is null</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedList</span><span class="hljs-params">(Collection&amp;lt;? extends E&amp;gt; c)</span> &#123;<br>    <span class="hljs-built_in">this</span>();<br>    addAll(c);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ·»åŠ çš„æ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-æ·»åŠ çš„æ–¹æ³•">#</a> ï¼ˆ3ï¼‰æ·»åŠ çš„æ–¹æ³•</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¤´ä¸Šæ·»åŠ </span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">linkFirst</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; f = first;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&amp;lt;&amp;gt;(<span class="hljs-literal">null</span>, e, f);<br>    first = newNode;<br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>)<br>        last = newNode;<br>    <span class="hljs-keyword">else</span><br>        f.prev = newNode;<br>    size++;<br>    modCount++;<br>&#125;    <br><br><span class="hljs-comment">// å°¾å·´ä¸Šæ·»åŠ     </span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">linkLast</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; l = last;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&amp;lt;&amp;gt;(l, e, <span class="hljs-literal">null</span>);<br>    last = newNode;<br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-literal">null</span>)<br>        first = newNode;<br>    <span class="hljs-keyword">else</span><br>        l.next = newNode;<br>    size++;<br>    modCount++;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŸä¸ªå…ƒç´ ä¹‹å‰æ·»åŠ </span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">linkBefore</span><span class="hljs-params">(E e, Node&amp;lt;E&amp;gt; succ)</span> &#123;<br>    <span class="hljs-comment">// assert succ != null;</span><br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; pred = succ.prev;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&amp;lt;&amp;gt;(pred, e, succ);<br>    succ.prev = newNode;<br>    <span class="hljs-keyword">if</span> (pred == <span class="hljs-literal">null</span>)<br>        first = newNode;<br>    <span class="hljs-keyword">else</span><br>        pred.next = newNode;<br>    size++;<br>    modCount++;<br>&#125;<br><br><span class="hljs-comment">// æ–­å¼€å¤´éƒ¨</span><br><span class="hljs-keyword">private</span> E <span class="hljs-title function_">unlinkFirst</span><span class="hljs-params">(Node&amp;lt;E&amp;gt; f)</span> &#123;<br>    <span class="hljs-comment">// assert f == first &amp;amp;&amp;amp; f != null;</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">E</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> f.item;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; next = f.next;<br>    f.item = <span class="hljs-literal">null</span>;<br>    f.next = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC</span><br>    first = next;<br>    <span class="hljs-keyword">if</span> (next == <span class="hljs-literal">null</span>)<br>        last = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">else</span><br>        next.prev = <span class="hljs-literal">null</span>;<br>    size--;<br>    modCount++;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br><br><span class="hljs-comment">// æ–­å¼€å°¾å·´</span><br><span class="hljs-keyword">private</span> E <span class="hljs-title function_">unlinkLast</span><span class="hljs-params">(Node&amp;lt;E&amp;gt; l)</span> &#123;<br>    <span class="hljs-comment">// assert l == last &amp;amp;&amp;amp; l != null;</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">E</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> l.item;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; prev = l.prev;<br>    l.item = <span class="hljs-literal">null</span>;<br>    l.prev = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC</span><br>    last = prev;<br>    <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>)<br>        first = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">else</span><br>        prev.next = <span class="hljs-literal">null</span>;<br>    size--;<br>    modCount++;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br><br><span class="hljs-comment">// æ–­å¼€æŸä¸€ä¸ªèŠ‚ç‚¹</span><br>E <span class="hljs-title function_">unlink</span><span class="hljs-params">(Node&amp;lt;E&amp;gt; x)</span> &#123;<br>    <span class="hljs-comment">// assert x != null;</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">E</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> x.item;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; next = x.next;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; prev = x.prev;<br><br>    <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) &#123;<br>        first = next;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        prev.next = next;<br>        x.prev = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (next == <span class="hljs-literal">null</span>) &#123;<br>        last = prev;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        next.prev = prev;<br>        x.next = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    x.item = <span class="hljs-literal">null</span>;<br>    size--;<br>    modCount++;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br><br><span class="hljs-comment">// è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­listæ¥å£ä¸­æ²¡æœ‰ï¼Œæ˜¯LinkedListç±»ä¸­ç‰¹æœ‰çš„ã€‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(E e)</span> &#123;<br>    linkFirst(e);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(E e)</span> &#123;<br>    linkLast(e);<br>&#125;<br><br><span class="hljs-comment">// é»˜è®¤çš„æ·»åŠ æ˜¯ç»™å°¾å·´æ·»åŠ </span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    linkLast(e);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-æŸ¥æ‰¾å’Œåˆ é™¤-1" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-æŸ¥æ‰¾å’Œåˆ é™¤-1">#</a> ï¼ˆ4ï¼‰æŸ¥æ‰¾å’Œåˆ é™¤</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    checkElementIndex(index);<br>    <span class="hljs-keyword">return</span> node(index).item;<br>&#125;<br><span class="hljs-comment">// æ‰¾åˆ°ç¬¬å‡ ä¸ªnode</span><br>Node&amp;lt;E&amp;gt; node(<span class="hljs-type">int</span> index) &#123;<br>    <span class="hljs-comment">// çœ‹äººå®¶çš„æ£€ç´¢ï¼Œå°äºä¸€åŠå°±ä»å¤´æ£€ç´¢ï¼Œå¦åˆ™ä»å°¾å·´æ£€ç´¢</span><br>    <span class="hljs-keyword">if</span> (index &amp;lt; (size &amp;gt;&amp;gt; <span class="hljs-number">1</span>)) &#123;<br>        Node&amp;lt;E&amp;gt; x = first;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; index; i++)<br>            x = x.next;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        Node&amp;lt;E&amp;gt; x = last;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> size - <span class="hljs-number">1</span>; i &amp;gt; index; i--)<br>            x = x.prev;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è·å–å¤´ç»“ç‚¹</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">getFirst</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; f = first;<br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>    <span class="hljs-keyword">return</span> f.item;<br>&#125;<br><br><span class="hljs-comment">// è·å–å°¾èŠ‚ç‚¹</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">getLast</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; l = last;<br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>    <span class="hljs-keyword">return</span> l.item;<br>&#125;<br><br><span class="hljs-comment">// åˆ é™¤é»˜è®¤åˆ é™¤å¤´</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> removeFirst();<br>&#125;<br><span class="hljs-comment">// æ ¹æ®indexåˆ é™¤</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    checkElementIndex(index);<br>    <span class="hljs-keyword">return</span> unlink(node(index));<br>&#125;<br><br><span class="hljs-comment">// è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­listæ¥å£ä¸­æ²¡æœ‰ï¼Œæ˜¯LinkedListç±»ä¸­ç‰¹æœ‰çš„ã€‚</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">removeFirst</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; f = first;<br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>    <span class="hljs-keyword">return</span> unlinkFirst(f);<br>&#125;<br><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">removeLast</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&amp;lt;E&amp;gt; l = last;<br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>    <span class="hljs-keyword">return</span> unlinkLast(l);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€hashmap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€hashmap">#</a> 3ã€hashmap</h3><h4 id="_1-åˆæ­¥äº†è§£" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-åˆæ­¥äº†è§£">#</a> ï¼ˆ1ï¼‰åˆæ­¥äº†è§£</h4><p>hashmapçš„å®ç°æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚</p><figure><img class="lazy" alt="image-20210719104716936" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719104716936-99a370f5.png" tabindex="0"/><figcaption>image-20210719104716936</figcaption></figure><p>åœ¨è¯»mapæºç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€å¼ å›¾ï¼Œäº†è§£hashmapçš„å­˜å‚¨ç»“æ„ï¼š</p><blockquote><p>ç®€è€Œè¨€ä¹‹æ˜¯è¿™æ ·çš„ï¼ˆä¸å¤ªå¯¹ï¼Œä½†æ˜¯æœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ï¼‰ï¼š</p></blockquote><p>ç¬¬ä¸€æ­¥ï¼šhashmapæ„é€ æ—¶ï¼ˆå…¶å®ä¸æ˜¯æ„é€ çš„æ—¶å€™ï¼‰ä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º16æ•°ç»„ï¼Œåå­—å«tableï¼Œä¹Ÿå«hashè¡¨;</p><p>ç¬¬äºŒæ­¥ï¼šhashmapåœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œé¦–å…ˆæ ¹æ®keyè®¡ç®—hashcodeï¼Œç„¶åæ ¹æ®hashcodeé€‰æ‹©ä¸€ä¸ªæ§½ä½ã€‚</p><p>â€‹ å‡è®¾hashmapä½¿ç”¨å–ä½™çš„æ–¹å¼è®¡ç®—ã€‚ï¼ˆäº‹å®ä¸Šï¼Œhashmapä¸æ˜¯ï¼‰</p><pre><code>        æˆ‘ä»¬éƒ½çŸ¥é“hashcodeä¼šè¿”å›ä¸€ä¸ªintå€¼ï¼Œä½¿ç”¨intå€¼é™¤ä»¥16å–ä½™å°±èƒ½å¾—åˆ°ä¸€ä¸ª0~15çš„æ•°å­—ï¼Œå°±èƒ½å»å®šä¸€ä¸ªå…·ä½“çš„æ§½ä½ã€‚
</code></pre><p>ç¬¬ä¸‰æ­¥ï¼šç¡®å®šäº†å…·ä½“çš„æ§½ä½ä¹‹åï¼Œæˆ‘ä»¬å°±ä¼šå°è£…ä¸€ä¸ªnodeï¼ˆèŠ‚ç‚¹ï¼‰ï¼Œé‡Œè¾¹ä¿å­˜äº†hashï¼Œkeyï¼Œvalueç­‰æ•°æ®å­˜å…¥è¿™ä¸ªæ§½ä¸­ã€‚</p><p>ç¬¬å››æ­¥ï¼šå½“å­˜å…¥æ–°çš„æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨æ–°çš„hashè®¡ç®—çš„æ§½ä½å‘ç°å·²ç»æœ‰äº†æ•°æ®ï¼Œè¿™ä¸ªç°è±¡å«åšhashç¢°æ’ï¼Œä¼šä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨ã€‚</p><p>ç¬¬äº”æ­¥ï¼šå½“é“¾è¡¨çš„ä¸ªæ•°åˆ°è¾¾äº†8ä¸ªï¼Œé“¾è¡¨å¼€å§‹æ ‘åŒ–ï¼Œå˜æˆä¸€ä¸ªçº¢é»‘æ ‘ã€‚</p><p>é€šè¿‡è¿™äº”ä¸ªæ­¥éª¤ï¼Œå¤§å®¶å…ˆæœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œæ›´å¤šçš„ç»†èŠ‚æˆ‘ä»¬ä¸‹æ¥çœ‹æºç ã€‚</p><h4 id="_2-æˆå‘˜å˜é‡çš„åˆ†æ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-æˆå‘˜å˜é‡çš„åˆ†æ">#</a> ï¼ˆ2ï¼‰æˆå‘˜å˜é‡çš„åˆ†æ</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é»˜è®¤å®¹é‡</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DEFAULT_INITIAL_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> &amp;lt;&amp;lt; <span class="hljs-number">4</span>; <span class="hljs-comment">// aka 16</span><br><br><span class="hljs-comment">// æœ€å¤§å®¹é‡</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAXIMUM_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> &amp;lt;&amp;lt; <span class="hljs-number">30</span>;<br><br><span class="hljs-comment">// é»˜è®¤çš„åŠ è½½å› å­</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">DEFAULT_LOAD_FACTOR</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.75f</span>;<br><br><span class="hljs-comment">// é»˜è®¤çš„ä¸€ä¸ªæ ‘åŒ–çš„ä¸€ä¸ªé˜ˆå€¼ ï¼ˆTHRESHOLD é˜ˆå€¼ï¼‰</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TREEIFY_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;<br><br><span class="hljs-comment">// éæ ‘åŒ–çš„ä¸€ä¸ªé˜ˆå€¼</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">UNTREEIFY_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;<br><br><span class="hljs-comment">// æ ‘åŒ–çš„æœ€å°å®¹é‡ï¼Œèƒ½çœ‹åˆ°ä¸€äº›ä¿¡æ¯ï¼Œæ ‘åŒ–é™¤äº†é“¾è¡¨é•¿åº¦ï¼Œå¯¹å®¹é‡ä¹Ÿæœ‰è¦æ±‚</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MIN_TREEIFY_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">64</span>;<br><br><span class="hljs-comment">// å­˜å‚¨æ•°æ®çš„hashè¡¨ï¼Œå°±æ˜¯ä¸€ä¸ªæ•°ç»„</span><br><span class="hljs-keyword">transient</span> Node&amp;lt;K,V&amp;gt;[] table;<br><br><span class="hljs-comment">// çœŸå®çš„è´Ÿè½½å› å­</span><br><span class="hljs-keyword">final</span> <span class="hljs-type">float</span> loadFactor;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ„é€ " tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-æ„é€ ">#</a> ï¼ˆ3ï¼‰æ„é€ </h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åªæ˜¯å°†é»˜è®¤çš„è´Ÿè½½å› å­ä¼ é€’ç»™äº†loadFactor</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashMap</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="hljs-comment">// all other fields defaulted</span><br>&#125;<br><br><span class="hljs-comment">// æœ‰ä¼ å…¥çš„åˆå§‹åŒ–å®¹é‡</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashMap</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123;<br>    <span class="hljs-built_in">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);<br>&#125;<br><br><span class="hljs-comment">// æœ‰ä¼ å…¥çš„åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashMap</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity, <span class="hljs-type">float</span> loadFactor)</span> &#123;<br>    <span class="hljs-keyword">if</span> (initialCapacity &amp;lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Illegal initial capacity: &quot;</span> +<br>                                           initialCapacity);<br>    <span class="hljs-keyword">if</span> (initialCapacity &amp;gt; MAXIMUM_CAPACITY)<br>        initialCapacity = MAXIMUM_CAPACITY;<br>    <span class="hljs-keyword">if</span> (loadFactor &amp;lt;= <span class="hljs-number">0</span> || Float.isNaN(loadFactor))<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Illegal load factor: &quot;</span> +<br>                                           loadFactor);<br>    <span class="hljs-comment">// è®¡ç®—æ–°çš„è´Ÿè½½å› å­å’Œå®¹é‡</span><br>    <span class="hljs-built_in">this</span>.loadFactor = loadFactor;<br>    <span class="hljs-built_in">this</span>.threshold = tableSizeFor(initialCapacity);<br>&#125;  <br><br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * è¿”å›ä¸€ä¸ªå€¼ï¼Œå¤§äºç­‰äºä¼ å…¥çš„æ•°å­—çš„ä¸€ä¸ª2çš„æ¬¡å¹‚çš„æ•°å­—ï¼Œä½ ä¼ å…¥15è¿”å›16ï¼Œä¼ å…¥7è¿”å›8ã€</span><br><span class="hljs-comment">  * ä¿è¯äº†å®¹é‡æ˜¯2çš„æ¬¡å¹‚ã€‚ä¸ºäº†åæ¥è®¡ç®—hashæ§½åšå‡†å¤‡</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">tableSizeFor</span><span class="hljs-params">(<span class="hljs-type">int</span> cap)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> cap - <span class="hljs-number">1</span>;<br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">1</span>;<br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">2</span>;<br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">4</span>;<br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">8</span>;<br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">16</span>;<br>    <span class="hljs-keyword">return</span> (n &amp;lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : (n &amp;gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="hljs-number">1</span>;<br>&#125;<br><br><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">tableSizeFor</span><span class="hljs-params">(<span class="hljs-type">int</span> cap)</span> &#123;<br>    <span class="hljs-comment">// 00010000 11101001 10001001 10000101  -- &amp;gt; 00010000 11101001 10001001 10000100  283,740,549</span><br>    <span class="hljs-comment">// çœ‹å®Œäº†</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> cap - <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 00010000 11101001 10001001 10000101     n</span><br>    <span class="hljs-comment">// 00001000 01110100 11000100 11000010     å³ç§»1ä½ï¼Œä¿éšœ2ä½æ˜¯1</span><br>    <span class="hljs-comment">// 00011000 11101101 11001101 11000111     n</span><br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 00011000 11101101 11001101 11000111     n</span><br>    <span class="hljs-comment">// 00000110 00111011 01110011 01110001     å³ç§»2ä½ï¼Œä¿éšœ4ä½æ˜¯1</span><br>    <span class="hljs-comment">// 00011110 11111111 11111111 11110111     n</span><br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">2</span>;<br>    <span class="hljs-comment">// 00011110 11111111 11111111 11110111     n</span><br>    <span class="hljs-comment">// 00000001 11101111 11111111 11111111     å³ç§»4ä½ï¼Œä¿éšœ8ä½æ˜¯1</span><br>    <span class="hljs-comment">// 00011111 11111111 11111111 11111111     n</span><br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">4</span>;<br>    <span class="hljs-comment">// 00011111 11111111 11111111 11111111     n</span><br>    <span class="hljs-comment">// 00000000 00011111 11111111 11111111     å³ç§»8ä½ï¼Œä¿éšœ16ä½æ˜¯1</span><br>    <span class="hljs-comment">// 00011111 11111111 11111111 11111111     n</span><br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">8</span>;<br>    <span class="hljs-comment">// 00011111 11111111 11111111 11111111     n</span><br>    <span class="hljs-comment">// 00000000 00000000 00011111 11111111     å³ç§»8ä½ï¼Œä¿éšœ32ä½æ˜¯1</span><br>    <span class="hljs-comment">// 00011111 11111111 11111111 11111111     n</span><br>    n |= n &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">16</span>;<br>    <span class="hljs-keyword">return</span>  n + <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ„é€ çš„æ•´ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œå¹¶æ²¡æœ‰åˆå§‹åŒ–hashè¡¨tableã€‚</p><h4 id="_4-putæ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-putæ–¹æ³•">#</a> ï¼ˆ4ï¼‰putæ–¹æ³•</h4><p>è¿™ä¸ªæ–¹æ³•æ˜¯æ ¸å¿ƒï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ‰€éœ€è¦ç ”ç©¶çš„ã€‚å¾ˆå¤šçš„é—®é¢˜éƒ½æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•å½“ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<br>    <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);<br>&#125;<br><br><span class="hljs-comment">// ç¬¬ä¸€ä¸ªå…³é”®ç‚¹ï¼škey == nullï¼Œè¯´æ˜æˆ‘ä»¬çš„hashmapæ”¯æŒkeyä¸ºnull</span><br><span class="hljs-comment">// ç¬¬äºŒä¸ªå…³é”®ç‚¹ï¼š (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; 16) ,è¿™ä¸€ç‚¹å­¦å®Œï¼Œå­¦å®ŒputValæ–¹æ³•å†çœ‹</span><br><span class="hljs-comment">// h          1010 0010 0001 1001 0010 1100 1010 1001</span><br><span class="hljs-comment">// h &amp;gt;&amp;gt;&amp;gt; 16   0000 0000 0000 0000 1010 0010 0001 1001 ( 0010 1100 1010 1001)</span><br><span class="hljs-comment">// å¼‚æˆ–è¿ç®—     1010 0010 0001 1001 1000 1110 1011 0000 </span><br><span class="hljs-comment">// ç›®çš„ï¼š è®©é«˜16ä½å’Œä½16ä½åŒæ—¶å‚ä¸è®¡ç®—ï¼Œå°†æ¥è®¡ç®—hashæ§½æ—¶æ›´åŠ å‡åŒ€</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(Object key)</span> &#123;<br>    <span class="hljs-type">int</span> h;<br>    <span class="hljs-keyword">return</span> (key == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">16</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">                  <span class="hljs-type">boolean</span> evict)</span> &#123;<br>    <span class="hljs-comment">// tabå¾ˆæ˜æ˜¾å°±æ˜¯hashè¡¨</span><br>    Node&amp;lt;K,V&amp;gt;[] tab; <br>    <span class="hljs-comment">// å°±æ˜¯ä¸ªå¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ï¼Œ</span><br>    Node&amp;lt;K,V&amp;gt; p; <br>    <span class="hljs-comment">// å…ˆä¸è¦ç®¡,nä»£è¡¨hashè¡¨çš„é•¿åº¦ï¼ˆtabï¼‰</span><br>    <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-comment">// (tab = table) == null å°†hashè¡¨èµ‹å€¼ç»™tabï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯ä¸æ˜¯null</span><br>    <span class="hljs-comment">// æˆ–è€…é•¿åº¦ç­‰äº0ï¼Œæˆ‘å°±è¦æ‰©å®¹ï¼Œæ„é€ æ²¡æœ‰åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-comment">// é‚£å°±æ‰©å®¹ï¼Œè¿˜å…¼ä»»åˆå§‹åŒ–çš„è´£ä»»ï¼ˆ16ï¼‰</span><br>        n = (tab = resize()).length;<br>    &#125;<br>    <span class="hljs-comment">// p == null,åªä¸è¿‡æœ‰ä¸ªç»™pèµ‹å€¼çš„è¿‡ç¨‹</span><br>    <span class="hljs-comment">// p = tab[i = (n - 1) &amp;amp; hash]</span><br>    <span class="hljs-comment">// å…¶å® iæ˜¯è®¡ç®—çš„æ§½ä½ï¼Œä½ çš„æ•°æ®å¾€å“ªä¸ªæ ¼å­é‡Œæ”¾</span><br>    <span class="hljs-comment">// (n - 1) &amp;amp; hash è¿™æ˜¯çœŸå®çš„è®¡ç®—è¿‡ç¨‹ï¼Œnç¡®å®šæ˜¯ä¸€ä¸ª2çš„næ¬¡å¹‚(100..)ï¼Œhashæ˜¯ä¸€ä¸ªintå€¼</span><br>    <span class="hljs-comment">// (n-1)      0000 0000 0000 0000 0000 0000 0000 1111</span><br>    <span class="hljs-comment">// (hash)     0010 0010 0010 0010 0000 0110 0000 1011</span><br>    <span class="hljs-comment">// (result)   0000 0000 0000 0000 0000 0000 0000 1011       </span><br>    <span class="hljs-comment">// ä¸è¿ç®—ä¹‹åçš„ç»“æœå°±æ˜¯0~15ï¼Œæ­£å¥½è®¡ç®—äº†ä¸€ä¸ªæ§½ä½</span><br>    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæ€è€ƒçš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆå®¹é‡å¿…é¡»æ˜¯2çš„æ¬¡å¹‚ï¼Ÿ 0...01...1</span><br>    <span class="hljs-comment">// ç¬¬äºŒä¸ªæ€è€ƒçš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆä½¿ç”¨ä½ç§»è¿ç®—è€Œä¸é€‚ç”¨ä½™è¿ç®—ï¼Ÿæ•ˆç‡</span><br>    <span class="hljs-comment">// æ‰¾åˆ°æ§½ä½ï¼Œå¹¶ä¸”æ§½ä½æ²¡æœ‰æ•°æ®ï¼Œå°±ç›´æ¥newnodeæ”¾è¿›å»</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp;amp; hash]) == <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-comment">// åˆ›å»ºäº†ä¸€ä¸ªnode</span><br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// åªè¦è¿›å…¥elseï¼Œè¯´æ˜è¿™ä¸ªæ§½ä½æœ‰æ•°æ®äº†ï¼Œå°±è¦æé“¾è¡¨äº†</span><br>        <span class="hljs-comment">// </span><br>        Node&amp;lt;K,V&amp;gt; e;<br>        <span class="hljs-comment">// é”®ï¼Œæ³›å‹ï¼Œå½“å‰æ’å…¥æ•°æ®çš„é”®</span><br>        K k;<br>        <span class="hljs-comment">// æ ¹æ®p = tab[i = (n - 1) &amp;amp; hash]ï¼ŒçŸ¥é“pæ˜¯æ”¾åœ¨æ§½ä½ä¸Šçš„node</span><br>        <span class="hljs-comment">// p.hash == hash è¯´æ˜å‘ç”Ÿäº†hashç¢°æ’</span><br>        <span class="hljs-comment">// (k = p.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)) åˆ¤æ–­çš„æ˜¯keyé‡å¤äº†</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;amp;&amp;amp;<br>            ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;amp;&amp;amp; key.equals(k))))&#123;<br>            <span class="hljs-comment">// è¦†ç›–</span><br>            e = p;<br><br>        <span class="hljs-comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯æ ‘å½¢èŠ‚ç‚¹</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)&#123;<br>            e = ((TreeNode&amp;lt;K,V&amp;gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br><br>        <span class="hljs-comment">// å¦åˆ™å°±æ˜¯é“¾è¡¨çš„æ–¹å¼</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;<br>                <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-comment">// è¿™ä¸å°±æ˜¯é“¾è¡¨å—ï¼Ÿå¾ˆæ˜æ˜¾è¿™æ˜¯å°¾æ’</span><br>                    p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>                    <span class="hljs-keyword">if</span> (binCount &amp;gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                        <span class="hljs-comment">// æ ‘åŒ–</span><br>                        treeifyBin(tab, hash);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-comment">// åˆ¤æ–­é“¾è¡¨ä¸­æœ‰æ²¡æœ‰keyä¸€æ ·çš„ï¼Œè¦†ç›–</span><br>                <span class="hljs-keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;<br>                    ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;amp;&amp;amp; key.equals(k))))<br>                    <span class="hljs-keyword">break</span>;<br>                p = e;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)<br>                e.value = value;<br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-keyword">if</span> (++size &amp;gt; threshold)<br>        resize();<br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-æ‰©å®¹çš„æ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5-æ‰©å®¹çš„æ–¹æ³•">#</a> ï¼ˆ5ï¼‰æ‰©å®¹çš„æ–¹æ³•</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> Node&amp;lt;K,V&amp;gt;[] resize() &#123;<br>    Node&amp;lt;K,V&amp;gt;[] oldTab = table;<br>    <span class="hljs-comment">// æ—§çš„å®¹é‡</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCap</span> <span class="hljs-operator">=</span> (oldTab == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : oldTab.length;<br>    <span class="hljs-comment">// æ—§çš„é˜ˆå€¼</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldThr</span> <span class="hljs-operator">=</span> threshold;<br>    <span class="hljs-type">int</span> newCap, newThr = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (oldCap &amp;gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// å®¹é‡å¤§äºæœ€å¤§å€¼å°±å–æœ€å¤§å€¼</span><br>        <span class="hljs-keyword">if</span> (oldCap &amp;gt;= MAXIMUM_CAPACITY) &#123;<br>            threshold = Integer.MAX_VALUE;<br>            <span class="hljs-keyword">return</span> oldTab;<br><br>        <span class="hljs-comment">// è¿™é‡Œä½“ç°äº†æ‰©å®¹çš„å¤§å°</span><br>        <span class="hljs-comment">// newCap = oldCap &amp;lt;&amp;lt; 1 ç›¸å½“äº2å€</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((newCap = oldCap &amp;lt;&amp;lt; <span class="hljs-number">1</span>) &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp;<br>                 oldCap &amp;gt;= DEFAULT_INITIAL_CAPACITY)<br>            <span class="hljs-comment">// é˜ˆå€¼æœˆæ‰©å®¹äºŒå€</span><br>            newThr = oldThr &amp;lt;&amp;lt; <span class="hljs-number">1</span>; <span class="hljs-comment">// double threshold</span><br>    <span class="hljs-comment">// æ—§çš„é˜ˆå€¼å¤§äºé›¶</span><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oldThr &amp;gt; <span class="hljs-number">0</span>)&#123; <span class="hljs-comment">// initial capacity was placed in threshold</span><br>        <span class="hljs-comment">// æ—§çš„é˜ˆå€¼ = æ–°çš„å®¹é‡</span><br>        newCap = oldThr;<br><br>    <span class="hljs-comment">// å¦åˆ™å°±æ˜¯åˆå§‹åŒ–ï¼Œå› ä¸º == 0</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;               <span class="hljs-comment">// zero initial threshold signifies using defaults</span><br>        <span class="hljs-comment">// å¦åˆ™æ–°çš„å®¹é‡å°±æ˜¯é»˜è®¤çš„å®¹é‡</span><br>        newCap = DEFAULT_INITIAL_CAPACITY;<br>        <span class="hljs-comment">// æ–°çš„é˜ˆå€¼å°±æ˜¯ å®¹é‡*è´Ÿè½½å› å­</span><br>        newThr = (<span class="hljs-type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);<br>    &#125;<br><br>    <span class="hljs-comment">// è®¡ç®—æ–°çš„é˜ˆå€¼ï¼Œè¦ä¹ˆæ˜¯ç›¸ä¹˜ï¼Œè¦ä¹ˆIntegeræœ€å¤§å€¼</span><br>    <span class="hljs-keyword">if</span> (newThr == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-type">float</span> <span class="hljs-variable">ft</span> <span class="hljs-operator">=</span> (<span class="hljs-type">float</span>)newCap * loadFactor;<br>        newThr = (newCap &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; ft &amp;lt; (<span class="hljs-type">float</span>)MAXIMUM_CAPACITY ?<br>                  (<span class="hljs-type">int</span>)ft : Integer.MAX_VALUE);<br>    &#125;<br><br>    <span class="hljs-comment">// å°†è®¡ç®—å¥½çš„é˜ˆå€¼èµ‹å€¼ç»™ threshold</span><br>    threshold = newThr;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span><br><br>    <span class="hljs-comment">// æ ¹æ®æ–°çš„å®¹é‡åˆ›å»ºäº†æ–°çš„hashè¡¨</span><br>    Node&amp;lt;K,V&amp;gt;[] newTab = (Node&amp;lt;K,V&amp;gt;[])<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[newCap];<br>    table = newTab;<br>    <span class="hljs-comment">// ä»¥ä¸‹æ˜¯é‡æ–°æ‹·è´çš„è¿‡ç¨‹</span><br>    <span class="hljs-keyword">if</span> (oldTab != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &amp;lt; oldCap; ++j) &#123;<br>            Node&amp;lt;K,V&amp;gt; e;<br>            <span class="hljs-keyword">if</span> ((e = oldTab[j]) != <span class="hljs-literal">null</span>) &#123;<br>                oldTab[j] = <span class="hljs-literal">null</span>;<br>                <span class="hljs-keyword">if</span> (e.next == <span class="hljs-literal">null</span>)<br>                    newTab[e.hash &amp;amp; (newCap - <span class="hljs-number">1</span>)] = e;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> TreeNode)<br>                    ((TreeNode&amp;lt;K,V&amp;gt;)e).split(<span class="hljs-built_in">this</span>, newTab, j, oldCap);<br>                <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// preserve order</span><br>                    Node&amp;lt;K,V&amp;gt; loHead = <span class="hljs-literal">null</span>, loTail = <span class="hljs-literal">null</span>;<br>                    Node&amp;lt;K,V&amp;gt; hiHead = <span class="hljs-literal">null</span>, hiTail = <span class="hljs-literal">null</span>;<br>                    Node&amp;lt;K,V&amp;gt; next;<br>                    <span class="hljs-keyword">do</span> &#123;<br>                        next = e.next;<br>                        <span class="hljs-keyword">if</span> ((e.hash &amp;amp; oldCap) == <span class="hljs-number">0</span>) &#123;<br>                            <span class="hljs-keyword">if</span> (loTail == <span class="hljs-literal">null</span>)<br>                                loHead = e;<br>                            <span class="hljs-keyword">else</span><br>                                loTail.next = e;<br>                            loTail = e;<br>                        &#125;<br>                        <span class="hljs-keyword">else</span> &#123;<br>                            <span class="hljs-keyword">if</span> (hiTail == <span class="hljs-literal">null</span>)<br>                                hiHead = e;<br>                            <span class="hljs-keyword">else</span><br>                                hiTail.next = e;<br>                            hiTail = e;<br>                        &#125;<br>                    &#125; <span class="hljs-keyword">while</span> ((e = next) != <span class="hljs-literal">null</span>);<br>                    <span class="hljs-keyword">if</span> (loTail != <span class="hljs-literal">null</span>) &#123;<br>                        loTail.next = <span class="hljs-literal">null</span>;<br>                        newTab[j] = loHead;<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (hiTail != <span class="hljs-literal">null</span>) &#123;<br>                        hiTail.next = <span class="hljs-literal">null</span>;<br>                        newTab[j + oldCap] = hiHead;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> newTab;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-æ ‘åŒ–çš„éƒ¨åˆ†ä»£ç " tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_6-æ ‘åŒ–çš„éƒ¨åˆ†ä»£ç ">#</a> ï¼ˆ6ï¼‰æ ‘åŒ–çš„éƒ¨åˆ†ä»£ç </h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * Replaces all linked nodes in bin at index for given hash unless</span><br><span class="hljs-comment">  * table is too small, in which case resizes instead.</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">treeifyBin</span><span class="hljs-params">(Node&amp;lt;K,V&amp;gt;[] tab, <span class="hljs-type">int</span> hash)</span> &#123;<br>    <span class="hljs-type">int</span> n, index; Node&amp;lt;K,V&amp;gt; e;<br>    <span class="hljs-keyword">if</span> (tab == <span class="hljs-literal">null</span> || (n = tab.length) &amp;lt; MIN_TREEIFY_CAPACITY)<br>        <span class="hljs-comment">// ä¼˜å…ˆæ‰©å®¹</span><br>        resize();<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((e = tab[index = (n - <span class="hljs-number">1</span>) &amp;amp; hash]) != <span class="hljs-literal">null</span>) &#123;<br>        TreeNode&amp;lt;K,V&amp;gt; hd = <span class="hljs-literal">null</span>, tl = <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">do</span> &#123;<br>            TreeNode&amp;lt;K,V&amp;gt; p = replacementTreeNode(e, <span class="hljs-literal">null</span>);<br>            <span class="hljs-keyword">if</span> (tl == <span class="hljs-literal">null</span>)<br>                hd = p;<br>            <span class="hljs-keyword">else</span> &#123;<br>                p.prev = tl;<br>                tl.next = p;<br>            &#125;<br>            tl = p;<br>        &#125; <span class="hljs-keyword">while</span> ((e = e.next) != <span class="hljs-literal">null</span>);<br>        <span class="hljs-keyword">if</span> ((tab[index] = hd) != <span class="hljs-literal">null</span>)<br>            hd.treeify(tab);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºä»€ä¹ˆé€‰æ‹©æ ‘åŒ–çš„é•¿åº¦æ˜¯8ï¼Œæ³Šæ¾åˆ†å¸ƒ</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs text">* 0:    0.60653066<br>* 1:    0.30326533<br>* 2:    0.07581633<br>* 3:    0.01263606<br>* 4:    0.00157952<br>* 5:    0.00015795<br>* 6:    0.00001316<br>* 7:    0.00000094<br>* 8:    0.00000006<br>* more: less than 1 in ten million<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ™®é€šèŠ‚ç‚¹</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>.Entry&amp;lt;K,V&amp;gt; &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> hash;<br>    <span class="hljs-keyword">final</span> K key;<br>    V value;<br>    Node&amp;lt;K,V&amp;gt; next;<br><br>    Node(<span class="hljs-type">int</span> hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123;<br>        <span class="hljs-built_in">this</span>.hash = hash;<br>        <span class="hljs-built_in">this</span>.key = key;<br>        <span class="hljs-built_in">this</span>.value = value;<br>        <span class="hljs-built_in">this</span>.next = next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ‘å½¢èŠ‚ç‚¹</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LinkedHashMap</span>.Entry&amp;lt;K,V&amp;gt; &#123;<br>    TreeNode&amp;lt;K,V&amp;gt; parent;  <span class="hljs-comment">// red-black tree links</span><br>    TreeNode&amp;lt;K,V&amp;gt; left;<br>    TreeNode&amp;lt;K,V&amp;gt; right;<br>    TreeNode&amp;lt;K,V&amp;gt; prev;    <span class="hljs-comment">// needed to unlink next upon deletion</span><br>    <span class="hljs-type">boolean</span> red;<br>&#125;<br><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HashMap</span>.Node&amp;lt;K,V&amp;gt; &#123;<br>    Entry&amp;lt;K,V&amp;gt; before, after;<br>    Entry(<span class="hljs-type">int</span> hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123;<br>        <span class="hljs-built_in">super</span>(hash, key, value, next);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ€è€ƒé¢˜ï¼š</strong></p><p>1ã€hashmapçš„keyçš„hashæ€ä¹ˆè®¡ç®—ï¼Ÿ</p><p>2ã€hashmapçš„hashè¡¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ‰©å®¹ï¼Ÿ</p><p>3ã€hashmapä¸­ä»€ä¹ˆæ—¶å€™ä¼šæ ‘åŒ–ï¼Ÿ</p><p>4ã€ä¸ºä»€ä¹ˆé€‰æ‹©0.75ä¸ºè´Ÿè½½å› å­ï¼Œ8ä¸ºæ ‘åŒ–é˜ˆå€¼ï¼Ÿ</p><h3 id="_4ã€hashset" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€hashset">#</a> 4ã€hashset</h3><p>åªè¦ç†è§£äº†hashmapï¼Œhashsetä¸æ”»è‡ªç ´ã€‚</p><p>ï¼ˆ1ï¼‰é¦–å…ˆæˆ‘ä»¬çœ‹åˆ°hashsetå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªhashmapï¼Œå…¶å®è¯´æ˜äº†hashsetçš„å®ç°æ˜¯åŸºäºhashmapçš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> HashMap&amp;lt;E,Object&amp;gt; map;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰æˆ‘ä»¬çœ‹åˆ°hashsetçš„æ„é€ å™¨å…¶å®åªæ˜¯newäº†ä¸€ä¸ªhashmap();</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&amp;lt;&amp;gt;();<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰æˆ‘ä»¬ä»¥æ·»åŠ ä¸ºä¾‹</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">PRESENT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">return</span> map.put(e, PRESENT)==<span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å››ã€é›†åˆçš„éå†" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å››ã€é›†åˆçš„éå†">#</a> å››ã€é›†åˆçš„éå†</h2><h3 id="_1ã€æ™®é€šforå¾ªç¯" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€æ™®é€šforå¾ªç¯">#</a> 1ã€æ™®é€šforå¾ªç¯</h3><p>èƒ½å¤Ÿä½¿ç”¨æ™®é€šforå¾ªç¯çš„å‰ææ˜¯å¿…é¡»å¯ä»¥é€šè¿‡ä¸‹æ ‡è·å–æ•°æ®ï¼ŒListå¤©ç„¶æ»¡è¶³è¿™ä¸ªç‰¹æ€§ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ListTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">public</span> List&amp;lt;String&amp;gt; names;<br>        names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>        names.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;jerry&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; names.size(); i++) &#123;<br>            System.out.println(names.get(i));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒç†ï¼š</p><p>æˆ‘ä»¬å°† <code>names = new ArrayList&lt;&gt;();</code>æ”¹ä¸º<code> names = new LinkedList&lt;&gt;();</code>ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p><strong>æ€è€ƒé—®é¢˜ï¼š</strong></p><p>hashmapå’Œhashsetæ€ä¹ˆè¿›è¡Œéå†ï¼Ÿå®ƒä»¬æ²¡æœ‰ä¸‹æ ‡å•Šã€‚</p><p>è¿™é‡Œå°±å¿…é¡»ä½¿ç”¨è¿­ä»£å™¨äº†ã€‚</p><h3 id="_2ã€è¿­ä»£å™¨" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€è¿­ä»£å™¨">#</a> 2ã€è¿­ä»£å™¨</h3><h4 id="_1-è¿­ä»£å™¨ä»‹ç»" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-è¿­ä»£å™¨ä»‹ç»">#</a> ï¼ˆ1ï¼‰è¿­ä»£å™¨ä»‹ç»</h4><p>è¿­ä»£å™¨å…¶å®æ˜¯ä¸€ç§æ€æƒ³ã€‚</p><p>å…ˆçœ‹ä¸€ä¸‹è¿­ä»£å™¨è¿™ä¸ªæ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Iterator</span>&amp;lt;E&amp;gt; &#123;<br>    <span class="hljs-comment">// æ˜¯ä¸æ˜¯æœ‰ä¸‹ä¸€ä¸ª</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// æ‹¿åˆ°ä¸‹ä¸€ä¸ª</span><br>    E <span class="hljs-title function_">next</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// ä½ å¯ä»¥ç»§æ‰¿é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;remove&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼š</p><img class="lazy" alt="image-20210719151258779" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719151258779-297d3f82.png" style="zoom:33%;"/><p>å°ä¸½æ‹¿äº†ä¸€ç¯®å­è‹¹æœï¼Œä½ æƒ³æŠŠå°ä¸½çš„è‹¹æœåˆ†ç»™å¤§å®¶åƒã€‚</p><ul><li>æˆ‘ï¼šå°ä¸½ï¼Œç¯®å­é‡Œè¿˜æœ‰å—ï¼Ÿ</li><li>å°ä¸½ï¼š æœ‰å‘¢ã€‚ hasNext()</li><li>æˆ‘ï¼šç»™æˆ‘ã€‚</li><li>å°ä¸½ï¼šå¥½å‘¢ã€‚ next()</li><li>å°ä¸½ï¼šå“ï¼Œè¿™ä¸ªåäº†ï¼Œæˆ‘æ‰”äº†å§ï¼ remove()</li></ul><p>å…¶å®å°ä¸½å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è¿­ä»£å™¨ã€‚</p><h4 id="_2-è¿­ä»£å™¨çš„ä½¿ç”¨" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-è¿­ä»£å™¨çš„ä½¿ç”¨">#</a> ï¼ˆ2ï¼‰è¿­ä»£å™¨çš„ä½¿ç”¨</h4><p>è¿˜æ˜¯ä¸Šè¾¹çš„ä¾‹å­ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIterator</span><span class="hljs-params">()</span>&#123;<br>    Iterator&amp;lt;String&amp;gt; iterator = names.iterator();<br>    <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ¤æ–­ä¸€ä¸‹æ˜¯ä¸æ˜¯æœ‰ä¸‹ä¸€ä¸ªï¼Œæœ‰çš„è¯ï¼Œç»§ç»­éå†</span><br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ª</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> iterator.next();<br>        System.out.println(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶æ¢æˆLinkedListä¹Ÿæ˜¯å¯è¡Œçš„ã€‚</p><blockquote><p>çœ‹çœ‹hashSetï¼Œå±…ç„¶ä¹Ÿè¡Œ</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> itnanls</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> 2021/7/16</span><br><span class="hljs-comment"> **/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SetTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> Set&amp;lt;String&amp;gt; names;<br><br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> &#123;<br>        names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&amp;lt;&amp;gt;();<br>        names.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;jerry&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIterator</span><span class="hljs-params">()</span>&#123;<br>        Iterator&amp;lt;String&amp;gt; iterator = names.iterator();<br>        <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ¤æ–­ä¸€ä¸‹æ˜¯ä¸æ˜¯æœ‰ä¸‹ä¸€ä¸ªï¼Œæœ‰çš„è¯ï¼Œç»§ç»­éå†</span><br>        <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>            <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ª</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å†çœ‹çœ‹hashmapï¼Œä¹Ÿæ˜¯å¯ä»¥çš„</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> Map&amp;lt;String,String&amp;gt; user;<br><br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> &#123;<br>        user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&amp;lt;&amp;gt;();<br>        user.put(<span class="hljs-string">&quot;username&quot;</span>,<span class="hljs-string">&quot;ydlclass&quot;</span>);<br>        user.put(<span class="hljs-string">&quot;password&quot;</span>,<span class="hljs-string">&quot;ydl666888&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIterator</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">// æ‹¿åˆ°ä¸€ä¸ªå­˜æœ‰æ‰€æœ‰entryçš„seté›†åˆã€‚</span><br>        <span class="hljs-comment">// entryå°±æ˜¯ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹node</span><br>        Set&amp;lt;Map.Entry&amp;lt;String, String&amp;gt;&amp;gt; entries = user.entrySet();<br><br>        Iterator&amp;lt;Map.Entry&amp;lt;String, String&amp;gt;&amp;gt; iterator = entries.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>            Map.Entry&amp;lt;String, String&amp;gt; next = iterator.next();<br>            System.out.println(next.getKey());<br>            System.out.println(next.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥å…ˆè·å–ä¸€ä¸ªkeyçš„setå³å¯ï¼Œå†ç”¨è¿­ä»£å™¨è¿›è¡Œéå†ã€‚</p><p>è¿™ç§æ–¹å¼ç›¸å½“äºéå†äº†ä¸¤æ¬¡ï¼Œæ•ˆç‡ä½ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testIterator2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// è·å–ä¸€ä¸ªå«æœ‰æ‰€æœ‰keyçš„seté›†åˆï¼Œå»è¿­ä»£</span><br>    Set&amp;lt;String&amp;gt; keys = user.keySet();<br>    Iterator&amp;lt;String&amp;gt; iterator = keys.iterator();<br><br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> iterator.next();<br>        System.out.println(key);<br>        System.out.println(user.get(key));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åƒä¸‡åˆ«ä»¥ä¸ºè¿­ä»£å™¨ç‰›é€¼çš„ä¸è¡Œï¼Œå…¶å®è¿­ä»£å™¨åªæ˜¯ä¸ªæ¥å£ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½è¦æœ‰å¯¹åº”çš„å®ç°ã€‚</p><p>ç®€å•çš„çœ‹ä¸€ä¸‹arraylistçš„å®ç°</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Itr</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&amp;lt;E&amp;gt; &#123;<br><br>        <span class="hljs-comment">// åªè¦æœ‰æ ‡æ²¡åˆ°æœ€åä¸€ä¸ªå°±è¡Œ</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> cursor != size();<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>            checkForComodification();<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// å¤§æ¦‚ç‡å°±æ˜¯ä½¿ç”¨æ¸¸æ ‡æ§åˆ¶ä¸‹ä¸€ä¸ªçš„ä½ç½®</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> cursor;<br>                <span class="hljs-comment">// å…¶å®å°±æ˜¯è¿”å›äº†ä¸‹ä¸€ä¸ª</span><br>                <span class="hljs-type">E</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> get(i);<br>                lastRet = i;<br>                cursor = i + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">return</span> next;<br>            &#125; <span class="hljs-keyword">catch</span> (IndexOutOfBoundsException e) &#123;<br>                checkForComodification();<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">if</span> (lastRet &amp;lt; <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>();<br>            checkForComodification();<br><br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// ç›´æ¥æŠŠå½“å‰çš„åˆ é™¤å°±è¡Œäº†</span><br>                AbstractList.<span class="hljs-built_in">this</span>.remove(lastRet);<br>                <span class="hljs-keyword">if</span> (lastRet &amp;lt; cursor)<br>                    cursor--;<br>                lastRet = -<span class="hljs-number">1</span>;<br>                expectedModCount = modCount;<br>            &#125; <span class="hljs-keyword">catch</span> (IndexOutOfBoundsException e) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentModificationException</span>();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkForComodification</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">if</span> (modCount != expectedModCount)<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentModificationException</span>();<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€å¢å¼ºforå¾ªç¯" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€å¢å¼ºforå¾ªç¯">#</a> 3ã€å¢å¼ºforå¾ªç¯</h3><p>Javaæä¾›äº†ä¸€ç§<code>è¯­æ³•ç³–</code>ï¼ˆç”¨èµ·æ¥ç”œç”œçš„ï¼Œå¾ˆç®€å•ï¼‰å»å¸®åŠ©æˆ‘ä»¬éå†ï¼Œå«å¢å¼ºforå¾ªç¯ï¼š</p><p>Listã€Setéƒ½å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œéå†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testEnhancedFor</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">for</span> (String name : names)&#123;<br>        System.out.println(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mapä½¿ç”¨è¿™æ ·çš„å†™æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testEnhancedFor</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">for</span> (Map.Entry&amp;lt;String,String&amp;gt; entry : user.entrySet())&#123;<br>        System.out.println(entry.getKey());<br>        System.out.println(entry.getValue());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¢å¼ºforå¾ªç¯å…¶å®ä¹Ÿæ˜¯ä½¿ç”¨äº†è¿­ä»£å™¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ArrayListä¸­çš„è¿­ä»£å™¨ä¸­æ‰“ä¸€ä¸ªæ–­ç‚¹ï¼Œdebugè¿è¡Œä¸€ä¸‹å³å¯ã€‚</p><p>å¢å¼ºforå¾ªç¯åªæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œç”¨èµ·æ¥ç”œç”œçš„ç®€å•è€Œå·²ã€‚</p><figure><img class="lazy" alt="image-20210719145647660" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719145647660-080f986a.png" tabindex="0"/><figcaption>image-20210719145647660</figcaption></figure><h3 id="_4ã€è¿­ä»£ä¸­åˆ é™¤å…ƒç´ " tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€è¿­ä»£ä¸­åˆ é™¤å…ƒç´ ">#</a> 4ã€è¿­ä»£ä¸­åˆ é™¤å…ƒç´ </h3><p>æœ‰åŒä¸€ä¸ªé¢˜ç›®ï¼šæˆ‘æƒ³æŠŠä¸‹è¾¹çš„é›†åˆä¸­çš„lucyå…¨éƒ¨åˆ é™¤ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> &#123;<br>    List&amp;lt;String&amp;gt; names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    names.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>    names.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>    names.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>    names.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>    names.add(<span class="hljs-string">&quot;jerry&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-forå¾ªç¯ä¸­åˆ é™¤" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-forå¾ªç¯ä¸­åˆ é™¤">#</a> ï¼ˆ1ï¼‰forå¾ªç¯ä¸­åˆ é™¤</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelByFor</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; names.size(); i++) &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(names.get(i)))&#123;<br>            names.remove(i);<br>        &#125;<br>    &#125;<br>    System.out.println(names);<br>&#125;<br><br>ç»“æœï¼š<br>[tom, lucy, jerry]<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°å¹¶æ²¡æœ‰åˆ é™¤å¹²å‡€ï¼Œä¸­é—´çš„lucyå¥½åƒè¢«é—å¿˜äº†ã€‚</p><figure><img class="lazy" alt="image-20210719155749879" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719155749879-59e2019e.png" tabindex="0"/><figcaption>image-20210719155749879</figcaption></figure><p>åˆé€‚çš„è§£å†³æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><p>ç¬¬ä¸€ç§ï¼šå›è°ƒæŒ‡é’ˆ</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; names.size(); i++) &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(names.get(i)))&#123;<br>        names.remove(i);<br>        <span class="hljs-comment">// å›è°ƒæŒ‡é’ˆï¼š</span><br>        i--;<br>    &#125;<br>&#125;<br>System.out.println(names);<br><br><br>ç»“æœï¼š<br>[tom, jerry]    <br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼šé€†åºéå†</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> names.size()-<span class="hljs-number">1</span>; i &amp;gt; <span class="hljs-number">0</span>; i--) &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(names.get(i)))&#123;<br>        names.remove(i);<br>    &#125;<br>&#125;<br>System.out.println(names);<br><br>ç»“æœï¼š<br>[tom, jerry] <br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯æœ€å¥½çš„åˆ é™¤æ–¹æ³•æ˜¯ä½¿ç”¨è¿­ä»£å™¨ã€‚</p><h4 id="_2-ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ " tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ ">#</a> ï¼ˆ2ï¼‰ä½¿ç”¨è¿­ä»£å™¨åˆ é™¤å…ƒç´ </h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>    Iterator&amp;lt;String&amp;gt; iterator = names.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-comment">// è®°ä½next(),åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½ä¼šé€‰æ‹©ä¸‹ä¸€ä¸ª</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> iterator.next();<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(name))&#123;<br>            iterator.remove();<br>        &#125;<br>    &#125;<br>    System.out.println(names);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äº”ã€å…¶ä»–çš„é›†åˆç±»" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#äº”ã€å…¶ä»–çš„é›†åˆç±»">#</a> äº”ã€å…¶ä»–çš„é›†åˆç±»</h2><h3 id="_1ã€linkedhashmap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€linkedhashmap">#</a> 1ã€Linkedhashmap</h3><p>Linkedhashmapåœ¨åŸæ¥çš„åŸºç¡€ä¸Šç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œç”¨æ¥ç»´æŠ¤ï¼Œæ’å…¥çš„é¡ºåºã€‚</p><img class="lazy" alt="image-20210719162005725" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210719162005725-52d420fb.png" style="zoom:50%;"/><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedHashMapTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        Map&amp;lt;String,String&amp;gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&amp;lt;&amp;gt;(<span class="hljs-number">16</span>);<br>        map.put(<span class="hljs-string">&quot;m&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;g&quot;</span>,<span class="hljs-string">&quot;bcd&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;s&quot;</span>,<span class="hljs-string">&quot;cde&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;z&quot;</span>,<span class="hljs-string">&quot;def&quot;</span>);<br><br>        Iterator&amp;lt;Map.Entry&amp;lt;String, String&amp;gt;&amp;gt; iterator = map.entrySet().iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>            Map.Entry&amp;lt;String, String&amp;gt; next = iterator.next();<br>            System.out.println(next.getKey());<br>            System.out.println(next.getValue());<br>        &#125;<br>    &#125;<br>&#125;<br><br>ç»“æœï¼šç»“æœæ˜¯æœ‰åºçš„<br>m<br>abc<br>a<br>abc<br>g<br>bcd<br>s<br>cde<br>z<br>def<br><br>Map&amp;lt;String,String&amp;gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&amp;lt;&amp;gt;(); <br>å¦‚æœæ¢æˆhashmapçš„ç»“æœæ˜¯ï¼šå¾ˆæ˜æ˜¾æ— åº    <br>a<br>abc<br>s<br>cde<br>g<br>bcd<br>z<br>def<br>m<br>abc   <br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedHashMap</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">super</span>();<br>    accessOrder = <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HashMap</span>.Node&amp;lt;K,V&amp;gt; &#123;<br>    Entry&amp;lt;K,V&amp;gt; before, after;<br>    Entry(<span class="hljs-type">int</span> hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) &#123;<br>        <span class="hljs-built_in">super</span>(hash, key, value, next);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">transient</span> LinkedHashMap.Entry&amp;lt;K,V&amp;gt; head;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">     * The tail (youngest) of the doubly linked list.</span><br><span class="hljs-comment">     */</span><br><span class="hljs-keyword">transient</span> LinkedHashMap.Entry&amp;lt;K,V&amp;gt; tail;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœaccessOrderä¸ºtrueçš„è¯ï¼Œåˆ™ä¼šæŠŠè®¿é—®è¿‡çš„å…ƒç´ æ”¾åœ¨é“¾è¡¨åé¢ï¼Œæ”¾ç½®é¡ºåºæ˜¯è®¿é—®çš„é¡ºåº å¦‚æœaccessOrderä¸ºflaseçš„è¯ï¼Œåˆ™æŒ‰æ’å…¥é¡ºåºæ¥éå†</p><p>åœ¨Linkedhashmapä¸­æœ‰å‡ ä¸ªé¡ºåºï¼Œä¸€ä¸ªæ˜¯æ’å…¥é¡ºåºï¼Œä¸€ä¸ªæ˜¯è®¿é—®é¡ºåºã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨linkedhashmapå®ç°LRUç®—æ³•çš„ç¼“å­˜ï¼Œæ‰€è°“LRU:Least Recently Used,æœ€è¿‘æœ€å°‘ä½¿ç”¨,å³å½“ç¼“å­˜äº†,ä¼šä¼˜å…ˆæ·˜æ±°é‚£äº›æœ€è¿‘ä¸å¸¸è®¿é—®çš„æ•°æ®.å³å†·æ•°æ®ä¼˜å…ˆæ·˜æ±°.</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs text">public class LRU&amp;lt;K,V&amp;gt; extends LinkedHashMap&amp;lt;K,V&amp;gt; &#123;<br><br>    private int max_capacity;<br><br>    public LRU(int initialCapacity,int max_capacity) &#123;<br>        super(initialCapacity, 0.75F, true);<br>        this.max_capacity = max_capacity;<br>    &#125;<br><br>    public LRU() &#123;<br>        super(16, 0.75F, true);<br>        max_capacity = 8;<br>    &#125;<br><br>    @Override<br>    protected boolean removeEldestEntry(Map.Entry&amp;lt;K, V&amp;gt; eldest) &#123;<br>        return size() &amp;gt; max_capacity;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€treemap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€treemap">#</a> 2ã€TreeMap</h3><p>TreeMapåº•å±‚å®ç°æ˜¯çº¢é»‘æ ‘ï¼Œæ‰€ä»¥å¤©ç„¶æ”¯æŒæ’åºã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">TreeMap</span><span class="hljs-params">()</span> &#123;<br>    comparator = <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">TreeMap</span><span class="hljs-params">(Comparator&amp;lt;? <span class="hljs-built_in">super</span> K&amp;gt; comparator)</span> &#123;<br>    <span class="hljs-built_in">this</span>.comparator = comparator;<br>&#125; <br><br><br><br><span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object k1, Object k2)</span> &#123;<br>    <span class="hljs-keyword">return</span> comparator==<span class="hljs-literal">null</span> ? ((Comparable&amp;lt;? <span class="hljs-built_in">super</span> K&amp;gt;)k1).compareTo((K)k2)<br>        : comparator.compare((K)k1, (K)k2);<br>&#125;<br><br>    ä¼šå§key1å¼ºè½¬ä¸ºComparable<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°è¯•æŠŠä¸€ä¸ªæ²¡æœ‰å®ç°Comparableçš„ç±»ä¼ å…¥TreeMapä¸­ï¼Œå‘ç°ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">Map&amp;lt;Dog,String&amp;gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&amp;lt;&amp;gt;();<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">100</span>; i++) &#123;<br>    map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(),<span class="hljs-string">&quot;a&quot;</span>);<br>&#125;<br><br><br>Exception in thread <span class="hljs-string">&quot;main&quot;</span> java.lang.ClassCastException: bb.Dog cannot be cast to java.lang.Comparable<br>    at java.util.TreeMap.compare(TreeMap.java:<span class="hljs-number">1294</span>)<br>    at java.util.TreeMap.put(TreeMap.java:<span class="hljs-number">538</span>)<br>    at bb.Animal.main(Animal.java:<span class="hljs-number">14</span>)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„ç­–ç•¥è®¾è®¡æ¨¡å¼å•Šï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œå®ç°keyçš„æœ‰åºæ€§ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    Map&amp;lt;Integer,String&amp;gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&amp;lt;&amp;gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&amp;lt;Integer&amp;gt;() &#123;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer o1, Integer o2)</span> &#123;<br>            <span class="hljs-keyword">return</span> o1 - o2;<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">100</span>; i++) &#123;<br>        map.put(i,<span class="hljs-string">&quot;a&quot;</span>);<br>    &#125;<br>    System.out.println(map);<br><br>&#125;<br><br>&#123;<span class="hljs-number">0</span>=a, <span class="hljs-number">1</span>=a, <span class="hljs-number">2</span>=a, <span class="hljs-number">3</span>=a, <span class="hljs-number">4</span>=a, <span class="hljs-number">5</span>=a, <span class="hljs-number">6</span>=a, <span class="hljs-number">7</span>=a, <span class="hljs-number">8</span>=a, <span class="hljs-number">9</span>=a, <span class="hljs-number">10</span>=a, <span class="hljs-number">11</span>=a, <span class="hljs-number">12</span>=a, <span class="hljs-number">13</span>=a, <span class="hljs-number">14</span>=a, <span class="hljs-number">15</span>=a,<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œç«‹é©¬å°±å‘ç”Ÿäº†å˜åŒ–ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">return o2 - o1;<br>&#123;99=a, 98=a, 97=a, 96=a, 95=a, 94=a, 93=a, 92=a, 91=a, 90=a, 89=a<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å½“ç„¶å¯ä»¥è®©Dogç±»å®ç°Comparableæ¥å£æ¥ä½¿Dogä½œä¸ºkeyä¼ å…¥Mapä¸­ã€‚</p><h3 id="_3ã€collections" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€collections">#</a> 3ã€Collections</h3><p>Collectionsæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†ä¸€äº›å¸¸ç”¨çš„å¥½ç”¨çš„æ“ä½œé›†åˆçš„æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java">ArrayList&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>list.add(<span class="hljs-number">12</span>);<br>list.add(<span class="hljs-number">4</span>);<br>list.add(<span class="hljs-number">3</span>);<br>list.add(<span class="hljs-number">5</span>);<br><span class="hljs-comment">//å°†é›†åˆæŒ‰ç…§é»˜è®¤çš„è§„åˆ™æ’åº,æŒ‰ç…§æ•°å­—ä»å°åˆ°å¤§çš„é¡ºåºæ’åº</span><br>Collections.sort(list);<br>System.out.println(<span class="hljs-string">&quot;list = &quot;</span> + list);<br>System.out.println(<span class="hljs-string">&quot;===================&quot;</span>);<br><span class="hljs-comment">//å°†é›†åˆä¸­çš„å…ƒç´ åè½¬</span><br>Collections.reverse(list);<br>System.out.println(<span class="hljs-string">&quot;list = &quot;</span> + list);<br><span class="hljs-comment">//addAllæ–¹æ³•å¯ä»¥å¾€é›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Œä¹Ÿå¯å¾€é›†åˆä¸­æ·»åŠ ä¸€ä¸ªé›†åˆ</span><br>Collections.addAll(list,<span class="hljs-number">9</span>,<span class="hljs-number">20</span>,<span class="hljs-number">56</span>);<br><span class="hljs-comment">//æ‰“ä¹±é›†åˆä¸­çš„å…ƒç´ </span><br>Collections.shuffle(list);<br>System.out.println(<span class="hljs-string">&quot;list = &quot;</span> + list);<br><br><span class="hljs-comment">//Arrays.asListæ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªé•¿åº¦å†…å®¹å›ºå®šçš„Listé›†åˆ</span><br>List&amp;lt;String&amp;gt; list2 = Arrays.asList(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;kobe&quot;</span>, <span class="hljs-string">&quot;jordan&quot;</span>, <span class="hljs-string">&quot;tracy&quot;</span>,<span class="hljs-string">&quot;westbook&quot;</span>,<span class="hljs-string">&quot;yaoming&quot;</span>,<span class="hljs-string">&quot;ace&quot;</span>,<span class="hljs-string">&quot;stephen&quot;</span>);<br><span class="hljs-comment">//æŒ‰ç…§å­—ç¬¦ä¸²é¦–å­—ç¬¦çš„å‡åºæ’åˆ—</span><br>Collections.sort(list2);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å°é—®é¢˜ï¼š</strong></p><p>Arrays.asList(...)è¿”å›çš„æ˜¯ArrayListå—ï¼Ÿ</p><h2 id="å…­ã€çº¿ç¨‹å®‰å…¨é—®é¢˜" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å…­ã€çº¿ç¨‹å®‰å…¨é—®é¢˜">#</a> å…­ã€çº¿ç¨‹å®‰å…¨é—®é¢˜</h2><h3 id="_1ã€å¹¶å‘ä¿®æ”¹å¼‚å¸¸" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€å¹¶å‘ä¿®æ”¹å¼‚å¸¸">#</a> 1ã€å¹¶å‘ä¿®æ”¹å¼‚å¸¸</h3><p>ä½¿ç”¨å¢å¼ºforå¾ªç¯ä¸­åˆ é™¤å…ƒç´ ä¼šæŠ›å¼‚å¸¸</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelByEnhancedFor</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">for</span> (String name : names)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(name))&#123;<br>            names.remove(name);<br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">// å¹¶å‘ä¿®æ”¹å¼‚å¸¸</span><br>java.util.ConcurrentModificationException<br>    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:<span class="hljs-number">909</span>)<br>    at java.util.ArrayList$Itr.next(ArrayList.java:<span class="hljs-number">859</span>)<br>    at com.ydlclass.ListTest.testDelByEnhancedFor(ListTest.java:<span class="hljs-number">51</span>)<br>    ......<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®ä¸ä»…ä»…æ˜¯ä¸Šè¾¹çš„æƒ…å†µï¼Œä¸‹è¾¹çš„æƒ…å†µä¹Ÿä¼šå‡ºç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDelByEnhancedFor</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">for</span> (String name : names)&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(name))&#123;<br>            names.add(name);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelByIterator</span><span class="hljs-params">()</span>&#123;<br>    Iterator&amp;lt;String&amp;gt; iterator = names.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-comment">// è®°ä½next(),åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½ä¼šé€‰æ‹©ä¸‹ä¸€ä¸ª</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> iterator.next();<br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;lucy&quot;</span>.equals(name))&#123;<br>            names.add(<span class="hljs-string">&quot;hello&quot;</span>);<br>        &#125;<br>    &#125;<br>    System.out.println(names);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äº§ç”Ÿçš„åŸå› ï¼š</p><p>æˆ‘ä»¬å¯ä»¥æŠŠæ™®é€šçš„æ–¹æ³•å’Œè¿­ä»£å™¨çš„æ–¹æ³•çœ‹æˆä¸¤ä¸ªäººï¼Œä¸€ä¸ªå°ä¸½ï¼Œä¸€ä¸ªå°çº¢ã€‚</p><p>ä½ ç”¨å°ä¸½è¿­ä»£çš„æ—¶å€™ï¼Œç”¨å°çº¢çš„æ–¹æ³•åˆ é™¤ï¼Œæˆ–è€…ç”¨å°çº¢çš„æ–¹æ³•è¿­ä»£ï¼Œç”¨å°ä¸½çš„æ–¹æ³•åˆ é™¤å°±ä¼šå‡ºé”™ã€‚</p><p>è¿­ä»£å™¨æ˜¯ä¾èµ–äºé›†åˆè€Œå­˜åœ¨çš„ï¼Œåœ¨åˆ¤æ–­æˆåŠŸåï¼Œé›†åˆçš„ä¸­æ–°æ·»åŠ äº†å…ƒç´ ï¼Œè€Œè¿­ä»£å™¨å´ä¸çŸ¥é“ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ï¼Œè¿™ä¸ªé”™å«å¹¶å‘ä¿®æ”¹å¼‚å¸¸ã€‚</p><p>å¦‚ä½•è§£å†³å‘¢?</p><ul><li>è¿­ä»£å™¨è¿­ä»£å…ƒç´ ï¼Œè¿­ä»£å™¨ä¿®æ”¹å…ƒç´ ã€‚</li><li>é›†åˆéå†å…ƒç´ ï¼Œé›†åˆä¿®æ”¹å…ƒç´ (æ™®é€šfor)ã€‚</li></ul><h3 id="_2ã€æ•°æ®é”™è¯¯çš„é—®é¢˜" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€æ•°æ®é”™è¯¯çš„é—®é¢˜">#</a> 2ã€æ•°æ®é”™è¯¯çš„é—®é¢˜</h3><p>æˆ‘ä»¬å­¦äº†å¹¶å‘ç¼–ç¨‹ï¼ŒçŸ¥é“å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œå…±äº«èµ„æºæ—¶ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    <span class="hljs-keyword">final</span> ArrayList&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">200</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">200</span>; i++) &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&amp;gt;&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">10</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            list.add(<span class="hljs-number">1</span>);<br>            countDownLatch.countDown();<br>        &#125;).start();<br>    &#125;<br>    countDownLatch.await();<br>    System.out.println(list.size());<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€æ¬¡ï¼Œæˆ‘ä»¬å±…ç„¶å‘ç°arraylistä¹Ÿä¼šæœ‰ç©ºæŒ‡é’ˆï¼Œç›²çŒœå¤§æ¦‚æ˜¯ï¼Œè·å–å¤§å°çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œæ’å…¥çš„æ—¶å€™æœ‰äººæ·è¶³å…ˆç™»ï¼Œä½ å°±æ’ä¸è¿›å»äº†ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">Exception in thread &quot;Thread-193&quot; java.lang.ArrayIndexOutOfBoundsException: 163<br>    at java.util.ArrayList.add(ArrayList.java:463)<br>    at aaa.Test.lambda$main$0(Test.java:21)<br>    at java.lang.Thread.run(Thread.java:748)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ¬¡</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">195<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><p>é‚£æ€ä¹ˆè§£å†³çº¿ç¨‹å®‰å…¨çš„é—®é¢˜å•Šã€‚</p><p>åŠ é”ï¼Œå…¶å®JDKå¼€å§‹ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„ï¼Œäºæ˜¯æœ‰è¿™ä¸¤ä¸ªç±»ã€‚</p><h3 id="_3ã€åŠ é”è§£å†³" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€åŠ é”è§£å†³">#</a> 3ã€åŠ é”è§£å†³</h3><p>HashTableå’ŒVectorï¼Œè¿™æ˜¯ä¸¤ä¸ªå¾ˆå¤è€çš„ç±»</p><p>HashTable</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hashtable</span>&amp;lt;K,V&amp;gt;<br>    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Dictionary</span>&amp;lt;K,V&amp;gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>&amp;lt;K,V&amp;gt;, Cloneable, java.io.Serializable &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> V <span class="hljs-title function_">get</span><span class="hljs-params">(Object key)</span> &#123;<br>        Entry&amp;lt;?,?&amp;gt; tab[] = table;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> key.hashCode();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> (hash &amp;amp; <span class="hljs-number">0x7FFFFFFF</span>) % tab.length;<br>        <span class="hljs-keyword">for</span> (Entry&amp;lt;?,?&amp;gt; e = tab[index] ; e != <span class="hljs-literal">null</span> ; e = e.next) &#123;<br>            <span class="hljs-keyword">if</span> ((e.hash == hash) &amp;amp;&amp;amp; e.key.equals(key)) &#123;<br>                <span class="hljs-keyword">return</span> (V)e.value;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;    <br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vector</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span>&amp;lt;E&amp;gt;<br>    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractList</span>&amp;lt;E&amp;gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">List</span>&amp;lt;E&amp;gt;, RandomAccess, Cloneable, java.io.Serializable<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> elementCount;<br>&#125;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    modCount++;<br>    ensureCapacityHelper(elementCount + <span class="hljs-number">1</span>);<br>    elementData[elementCount++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">removeElement</span><span class="hljs-params">(Object obj)</span> &#123;<br>    modCount++;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> indexOf(obj);<br>    <span class="hljs-keyword">if</span> (i &amp;gt;= <span class="hljs-number">0</span>) &#123;<br>        removeElementAt(i);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ è¿™ä¸¤ä¸ªç±»ï¼Œå…¶å®å¾ˆä¹…æ²¡æ›´æ–°äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é¢è¯•ä¼šé—®ï¼Œå…¶å®è¿™ä¸¤ä¸ªç±»éƒ½æœ‰å†å²æ¸Šæºï¼Œæœ€å¼€å§‹å°±æ˜¯åœ¨ArrayListå’ŒHashMapçš„åŸºç¡€ä¸Šå¢åŠ äº†Syncronizedï¼Œä½†æ˜¯åæ¥ArrayListå’ŒhashMapä¸€ç›´åœ¨æ”¹è¿›ï¼Œè¿™ä¸¤ä¸ªå°±æˆäº†å†å²äº†ï¼Œåè€Œç°åœ¨é—®å®ƒä»¬çš„åŒºåˆ«å…¶å®æ„ä¹‰ä¸å¤§äº†ã€‚</p><blockquote><p>HashMapå’ŒHashTableåŒºåˆ«</p></blockquote><ol><li>HashMapå…è®¸å°† null ä½œä¸ºä¸€ä¸ª entry çš„ key æˆ–è€… valueï¼Œè€Œ Hashtable ä¸å…è®¸ã€‚</li><li>HashMap æŠŠ Hashtable çš„ contains æ–¹æ³•å»æ‰äº†ï¼Œæ”¹æˆ containsValue å’Œ containsKeyã€‚å› ä¸º contains æ–¹æ³•å®¹æ˜“è®©äººå¼•èµ·è¯¯è§£ã€‚</li><li>HashTable ç»§æ‰¿è‡ª Dictionary ç±»ï¼Œè€Œ HashMap æ˜¯ Java1.2 å¼•è¿›çš„ Map interface çš„ä¸€ä¸ªå®ç°ã€‚</li><li>HashTable çš„æ–¹æ³•æ˜¯ Synchronizedä¿®é¥° çš„ï¼Œè€Œ HashMap ä¸æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯æ˜¯å¦èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨çš„é‡è¦ä¿éšœã€‚</li><li>Hashtable å’Œ HashMap é‡‡ç”¨çš„ hash/rehash ç®—æ³•éƒ½ä¸ä¸€æ ·ã€‚</li><li>è·å–æ•°ç»„ä¸‹æ ‡çš„ç®—æ³•ä¸åŒï¼Œ</li></ol><blockquote><p>ArrayListå’ŒVectorçš„åŒºåˆ«</p></blockquote><ol><li><p>Vectoræ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„ï¼Œçº¿ç¨‹å®‰å…¨å°±æ˜¯è¯´å¤šçº¿ç¨‹è®¿é—®åŒä¸€ä»£ç ï¼Œä¸ä¼šäº§ç”Ÿä¸ç¡®å®šçš„ç»“æœã€‚è€ŒArrayListä¸æ˜¯ï¼Œè¿™ä¸ªå¯ä»¥ä»æºç ä¸­çœ‹å‡ºï¼ŒVectorç±»ä¸­çš„æ–¹æ³•å¾ˆå¤šï¼Œæœ‰synchronizedè¿›è¡Œä¿®é¥°ï¼Œè¿™æ ·å°±å¯¼è‡´äº†Vectoråœ¨æ•ˆç‡ä¸Šæ— æ³•ä¸ArrayListç›¸æ¯”ï¼›</p></li><li><p>ä¸¤ä¸ªéƒ½æ˜¯é‡‡ç”¨çº¿æ€§è¿ç»­ç©ºé—´å­˜å‚¨å…ƒç´ ï¼Œä½†æ˜¯å½“ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œä¸¤ä¸ªç±»çš„æ‰©å®¹æ–¹å¼æ˜¯ä¸åŒçš„ã€‚</p></li><li><p>Vectoræ˜¯ä¸€ç§è€çš„åŠ¨æ€æ•°ç»„ï¼Œæ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œæ•ˆç‡å¾ˆä½ï¼Œä¸€èˆ¬ä¸èµæˆä½¿ç”¨ã€‚</p></li></ol><h3 id="_4ã€ç›®å‰å¸¸ç”¨çš„çº¿ç¨‹å®‰å…¨é›†åˆ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€ç›®å‰å¸¸ç”¨çš„çº¿ç¨‹å®‰å…¨é›†åˆ">#</a> 4ã€ç›®å‰å¸¸ç”¨çš„çº¿ç¨‹å®‰å…¨é›†åˆ</h3><h4 id="_1-copyonwritelist" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-copyonwritelist">#</a> ï¼ˆ1ï¼‰CopyOnWriteList</h4><p>ç›®å‰æˆ‘ä»¬æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼š</p><p>CopyOnWriteListçš„æ ¸å¿ƒå°±æ˜¯å†™å…¥çš„æ—¶å€™åŠ é”ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¯»å–çš„æ—¶å€™ä¸åŠ é”ã€‚ä¸æ˜¯ä¸€è‚¡è„‘ï¼Œç»™æ‰€æœ‰çš„æ–¹æ³•åŠ é”ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.lock;<br>    lock.lock();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œåœ¨æ–°çš„ç‹¬ç«‹ç©ºé—´è¿›è¡Œæ·»åŠ æ“ä½œ</span><br>        Object[] elements = getArray();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> elements.length;<br>        Object[] newElements = Arrays.copyOf(elements, len + <span class="hljs-number">1</span>);<br>        newElements[len] = e;<br>        <span class="hljs-comment">// ä¿®æ”¹å¼•ç”¨</span><br>        setArray(newElements);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setArray</span><span class="hljs-params">(Object[] a)</span> &#123;<br>    array = a;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-concurrenthashmap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-concurrenthashmap">#</a> ï¼ˆ2ï¼‰ConcurrentHashMap</h4><p>1.8ä¸­çš„ConcurrentHashMapå’ŒHashMapçš„ä»£ç åŸºæœ¬ä¸€æ ·ï¼Œåªä¸è¿‡åœ¨æœ‰äº›æ“ä½œä¸Šä½¿ç”¨äº†casï¼Œæœ‰äº›åœ°æ–¹åŠ äº†é”ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcurrentHashMap</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMap</span>&amp;lt;K,V&amp;gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ConcurrentMap</span>&amp;lt;K,V&amp;gt;, Serializable &#123;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„é€ å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcurrentHashMap</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123;<br>    <span class="hljs-keyword">if</span> (initialCapacity &amp;lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">cap</span> <span class="hljs-operator">=</span> ((initialCapacity &amp;gt;= (MAXIMUM_CAPACITY &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">1</span>)) ?<br>               MAXIMUM_CAPACITY :<br>               tableSizeFor(initialCapacity + (initialCapacity &amp;gt;&amp;gt;&amp;gt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>));<br>    <span class="hljs-built_in">this</span>.sizeCtl = cap;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ç®€å•çœ‹çœ‹putValç®—æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent)</span> &#123;<br>    <span class="hljs-keyword">if</span> (key == <span class="hljs-literal">null</span> || value == <span class="hljs-literal">null</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullPointerException</span>();<br>    <span class="hljs-comment">// è®¡ç®—hash</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> spread(key.hashCode());<br>    <span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (Node&amp;lt;K,V&amp;gt;[] tab = table;;) &#123;<br>        Node&amp;lt;K,V&amp;gt; f; <span class="hljs-type">int</span> n, i, fh;<br>        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰hashè¡¨ï¼Œå°±åˆ›å»ºä¸€ä¸ª</span><br>        <span class="hljs-keyword">if</span> (tab == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>            tab = initTable();<br>        <span class="hljs-comment">// ç»™fèµ‹å€¼å°±æ˜¯hashè¡¨ä¸­çš„å…ƒç´ </span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((f = tabAt(tab, i = (n - <span class="hljs-number">1</span>) &amp;amp; hash)) == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// è¿™é‡Œä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„</span><br>            <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å°±ä½¿ç”¨casçš„æ–¹å¼æ·»åŠ </span><br>            <span class="hljs-keyword">if</span> (casTabAt(tab, i, <span class="hljs-literal">null</span>,<br>                         <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&amp;lt;K,V&amp;gt;(hash, key, value, <span class="hljs-literal">null</span>)))<br>                <span class="hljs-keyword">break</span>;                   <span class="hljs-comment">// no lock when adding to empty bin</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((fh = f.hash) == MOVED)<br>            tab = helpTransfer(tab, f);<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldVal</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-comment">// çœ‹è¿™æ˜¯å…³é”®ï¼Œè¿™åŠ äº†é”ï¼Œfæ˜¯ä»€ä¹ˆå•Šï¼Ÿ</span><br>            <span class="hljs-comment">// fæ˜¯å¤´èŠ‚ç‚¹</span><br>            <span class="hljs-keyword">synchronized</span> (f) &#123;<br>                <span class="hljs-keyword">if</span> (tabAt(tab, i) == f) &#123;<br>                    <span class="hljs-keyword">if</span> (fh &amp;gt;= <span class="hljs-number">0</span>) &#123;<br>                        binCount = <span class="hljs-number">1</span>;<br>                        <span class="hljs-keyword">for</span> (Node&amp;lt;K,V&amp;gt; e = f;; ++binCount) &#123;<br>                            K ek;<br>                            <span class="hljs-keyword">if</span> (e.hash == hash &amp;amp;&amp;amp;<br>                                ((ek = e.key) == key ||<br>                                 (ek != <span class="hljs-literal">null</span> &amp;amp;&amp;amp; key.equals(ek)))) &#123;<br>                                oldVal = e.val;<br>                                <span class="hljs-keyword">if</span> (!onlyIfAbsent)<br>                                    e.val = value;<br>                                <span class="hljs-keyword">break</span>;<br>                            &#125;<br>                            Node&amp;lt;K,V&amp;gt; pred = e;<br>                            <span class="hljs-keyword">if</span> ((e = e.next) == <span class="hljs-literal">null</span>) &#123;<br>                                pred.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&amp;lt;K,V&amp;gt;(hash, key,<br>                                                          value, <span class="hljs-literal">null</span>);<br>                                <span class="hljs-keyword">break</span>;<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (f <span class="hljs-keyword">instanceof</span> TreeBin) &#123;<br>                        Node&amp;lt;K,V&amp;gt; p;<br>                        binCount = <span class="hljs-number">2</span>;<br>                        <span class="hljs-keyword">if</span> ((p = ((TreeBin&amp;lt;K,V&amp;gt;)f).putTreeVal(hash, key,<br>                                                              value)) != <span class="hljs-literal">null</span>) &#123;<br>                            oldVal = p.val;<br>                            <span class="hljs-keyword">if</span> (!onlyIfAbsent)<br>                                p.val = value;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (binCount != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">if</span> (binCount &amp;gt;= TREEIFY_THRESHOLD)<br>                    treeifyBin(tab, i);<br>                <span class="hljs-keyword">if</span> (oldVal != <span class="hljs-literal">null</span>)<br>                    <span class="hljs-keyword">return</span> oldVal;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    addCount(<span class="hljs-number">1L</span>, binCount);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®ï¼Œé¢è¯•å¾ˆå–œæ¬¢é—®1.7å’Œ1.8çš„åŒºåˆ«</p><p>ä¸»è¦æ˜¯1.7çš„åˆ†æ®µé”æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„æ¡ˆä¾‹ï¼Œé€ æˆè¿™ä¸ªçš„åŸå› è¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„å°±æ˜¯JDK1.7ä½¿ç”¨çš„æ˜¯å¤´æ’ï¼Œè€Œ1.8æ”¹æˆå°¾æ’</p><p>æˆ‘ä»¬ç®€å•çš„çœ‹ä¸€ä¸‹1.7çš„putæ–¹æ³•å®ç°ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (key == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">return</span> putForNullKey(value);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> hash(key);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> indexFor(hash, table.length);<br>    <span class="hljs-comment">// æ‰¾åˆ°ç›¸åŒçš„keyï¼Œè¦†ç›–</span><br>    <span class="hljs-keyword">for</span> (Entry&amp;lt;K,V&amp;gt; e = table[i]; e != <span class="hljs-literal">null</span>; e = e.next) &#123;<br>        Object k;<br>        <span class="hljs-keyword">if</span> (e.hash == hash &amp;amp;&amp;amp; ((k = e.key) == key || key.equals(k))) &#123;<br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            e.value = value;<br>            e.recordAccess(<span class="hljs-built_in">this</span>);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br><br>    modCount++;<br>    <span class="hljs-comment">// å¦åˆ™å°±æ˜¯æ–°å¢</span><br>    addEntry(hash, key, value, i);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">addEntry</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">int</span> bucketIndex)</span> &#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span><br>    <span class="hljs-keyword">if</span> ((size &amp;gt;= threshold) &amp;amp;&amp;amp; (<span class="hljs-literal">null</span> != table[bucketIndex])) &#123;<br>        resize(<span class="hljs-number">2</span> * table.length);<br>        hash = (<span class="hljs-literal">null</span> != key) ? hash(key) : <span class="hljs-number">0</span>;<br>        bucketIndex = indexFor(hash, table.length);<br>    &#125;<br>    <span class="hljs-comment">// åˆ›å»º</span><br>    createEntry(hash, key, value, bucketIndex);<br>&#125;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">createEntry</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">int</span> bucketIndex)</span> &#123;<br>    Entry&amp;lt;K,V&amp;gt; e = table[bucketIndex];<br>    <span class="hljs-comment">// å¤´æ’å•Š</span><br>    table[bucketIndex] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>&amp;lt;&amp;gt;(hash, key, value, e);<br>    size++;<br>&#125;<br><br><span class="hljs-comment">// 1.7ä¸­å±…ç„¶ç›´æ¥å°±æ˜¯Entryä¸æ˜¯node</span><br>Entry(<span class="hljs-type">int</span> h, K k, V v, Entry&amp;lt;K,V&amp;gt; n) &#123;<br>    value = v;<br>    next = n;<br>    key = k;<br>    hash = h;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JDK8ä»¥å‰æ˜¯å¤´æ’æ³•ï¼ŒJDK8åæ˜¯å°¾æ’æ³•ï¼Œé‚£ä¸ºä»€ä¹ˆè¦ä»å¤´æ’æ³•æ”¹æˆå°¾æ’æ³•ï¼Ÿ</p><ol><li>å› ä¸ºå¤´æ’æ³•ä¼šé€ æˆå¾ªç¯é“¾è¡¨</li><li>JDK7ç”¨å¤´æ’æ˜¯è€ƒè™‘åˆ°äº†ä¸€ä¸ªæ‰€è°“çš„çƒ­ç‚¹æ•°æ®çš„ç‚¹(æ–°æ’å…¥çš„æ•°æ®å¯èƒ½ä¼šæ›´æ—©ç”¨åˆ°)ï¼Œä½†è¿™å…¶å®æ˜¯ä¸ªä¼ªå‘½é¢˜,å› ä¸ºJDK7ä¸­rehashçš„æ—¶å€™ï¼Œæ—§é“¾è¡¨è¿ç§»æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ–°è¡¨çš„æ•°ç»„ç´¢å¼•ä½ç½®ç›¸åŒï¼Œåˆ™é“¾è¡¨å…ƒç´ ä¼šå€’ç½®(å°±æ˜¯å› ä¸ºå¤´æ’)ï¼Œ æ‰€ä»¥æœ€åçš„ç»“æœ è¿˜æ˜¯æ‰“ä¹±äº†æ’å…¥çš„é¡ºåº ï¼Œæ‰€ä»¥æ€»çš„æ¥çœ‹æ”¯æ’‘JDK7ä½¿ç”¨å¤´æ’çš„è¿™ç‚¹åŸå› ä¹Ÿä¸è¶³ä»¥æ”¯æ’‘ä¸‹å»äº† ï¼Œæ‰€ä»¥å°±å¹²è„†æ¢æˆå°¾æ’ ä¸€ä¸¾å¤šå¾—ã€‚</li></ol><p>1.7çš„åŠ é”å®ç°</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs text">/**<br>* Mask value for indexing into segments. The upper bits of a<br>* key&#x27;s hash code are used to choose the segment.<br>*/<br>final int segmentMask;<br><br>/**<br>* Shift value for indexing within segments.<br>*/<br>final int segmentShift;<br><br>/**<br>* The segments, each of which is a specialized hash table.<br>*/<br>final Segment&amp;lt;K,V&amp;gt;[] segments;<br><br>transient Set&amp;lt;K&amp;gt; keySet;<br>transient Set&amp;lt;Map.Entry&amp;lt;K,V&amp;gt;&amp;gt; entrySet;<br>transient Collection&amp;lt;V&amp;gt; values;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Segment</span>&amp;lt;K,V&amp;gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ReentrantLock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">2249069246763182397L</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_SCAN_RETRIES</span> <span class="hljs-operator">=</span><br>        Runtime.getRuntime().availableProcessors() &amp;gt; <span class="hljs-number">1</span> ? <span class="hljs-number">64</span> : <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// æˆ‘ä»¬é™¡ç„¶å‘ç°æ¯ä¸€ä¸ªåˆ†æ®µé‡Œè¾¹ä¿å­˜äº†ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸å°±æ˜¯æ•°ç»„å¥—æ•°ç»„å—ï¼Ÿ</span><br>    <span class="hljs-keyword">transient</span> <span class="hljs-keyword">volatile</span> HashEntry&amp;lt;K,V&amp;gt;[] table;<br><br>    <span class="hljs-keyword">transient</span> <span class="hljs-type">int</span> count;<br><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> loadFactor;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcurrentHashMap</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity,</span><br><span class="hljs-params">                         <span class="hljs-type">float</span> loadFactor, <span class="hljs-type">int</span> concurrencyLevel)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!(loadFactor &amp;gt; <span class="hljs-number">0</span>) || initialCapacity &amp;lt; <span class="hljs-number">0</span> || concurrencyLevel &amp;lt;= <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>();<br>    <span class="hljs-keyword">if</span> (concurrencyLevel &amp;gt; MAX_SEGMENTS)<br>        concurrencyLevel = MAX_SEGMENTS;<br>    <span class="hljs-comment">// Find power-of-two sizes best matching arguments</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">sshift</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">ssize</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (ssize &amp;lt; concurrencyLevel) &#123;<br>        ++sshift;<br>        ssize &amp;lt;&amp;lt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-built_in">this</span>.segmentShift = <span class="hljs-number">32</span> - sshift;<br>    <span class="hljs-built_in">this</span>.segmentMask = ssize - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (initialCapacity &amp;gt; MAXIMUM_CAPACITY)<br>        initialCapacity = MAXIMUM_CAPACITY;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> initialCapacity / ssize;<br>    <span class="hljs-keyword">if</span> (c * ssize &amp;lt; initialCapacity)<br>        ++c;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">cap</span> <span class="hljs-operator">=</span> MIN_SEGMENT_TABLE_CAPACITY;<br>    <span class="hljs-keyword">while</span> (cap &amp;lt; c)<br>        cap &amp;lt;&amp;lt;= <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// create segments and segments[0]</span><br>    Segment&amp;lt;K,V&amp;gt; s0 =<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Segment</span>&amp;lt;K,V&amp;gt;(loadFactor, (<span class="hljs-type">int</span>)(cap * loadFactor),<br>                         (HashEntry&amp;lt;K,V&amp;gt;[])<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashEntry</span>[cap]);<br>    Segment&amp;lt;K,V&amp;gt;[] ss = (Segment&amp;lt;K,V&amp;gt;[])<span class="hljs-keyword">new</span> <span class="hljs-title class_">Segment</span>[ssize];<br>    UNSAFE.putOrderedObject(ss, SBASE, s0); <span class="hljs-comment">// ordered write of segments[0]</span><br>    <span class="hljs-built_in">this</span>.segments = ss;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<br>    Segment&amp;lt;K,V&amp;gt; s;<br>    <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullPointerException</span>();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> hash(key);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> (hash &amp;gt;&amp;gt;&amp;gt; segmentShift) &amp;amp; segmentMask;<br>    <span class="hljs-keyword">if</span> ((s = (Segment&amp;lt;K,V&amp;gt;)UNSAFE.getObject          <span class="hljs-comment">// nonvolatile; recheck</span><br>         (segments, (j &amp;lt;&amp;lt; SSHIFT) + SBASE)) == <span class="hljs-literal">null</span>) <span class="hljs-comment">//  in ensureSegment</span><br>        s = ensureSegment(j);<br>    <span class="hljs-keyword">return</span> s.put(key, hash, value, <span class="hljs-literal">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, <span class="hljs-type">int</span> hash, V value, <span class="hljs-type">boolean</span> onlyIfAbsent)</span> &#123;<br>    <span class="hljs-comment">// å…ˆå°è¯•åŠ é”ï¼ŒåŠ ä¸ä¸Šå†ç–¯ç‹‚åŠ é”ï¼Œåæ­£èƒ½åŠ ä¸Šé”ï¼Œä»–ç»§æ‰¿äº†ReentrantLock</span><br>    HashEntry&amp;lt;K,V&amp;gt; node = tryLock() ? <span class="hljs-literal">null</span> :<br>    scanAndLockForPut(key, hash, value);<br>    V oldValue;<br>    <span class="hljs-keyword">try</span> &#123;<br>        HashEntry&amp;lt;K,V&amp;gt;[] tab = table;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> (tab.length - <span class="hljs-number">1</span>) &amp;amp; hash;<br>        HashEntry&amp;lt;K,V&amp;gt; first = entryAt(tab, index);<br>        <span class="hljs-keyword">for</span> (HashEntry&amp;lt;K,V&amp;gt; e = first;;) &#123;<br>            <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123;<br>                K k;<br>                <span class="hljs-keyword">if</span> ((k = e.key) == key ||<br>                    (e.hash == hash &amp;amp;&amp;amp; key.equals(k))) &#123;<br>                    oldValue = e.value;<br>                    <span class="hljs-keyword">if</span> (!onlyIfAbsent) &#123;<br>                        e.value = value;<br>                        ++modCount;<br>                    &#125;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                e = e.next;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span>)<br>                    node.setNext(first);<br>                <span class="hljs-keyword">else</span><br>                    node = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashEntry</span>&amp;lt;K,V&amp;gt;(hash, key, value, first);<br>                <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> count + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span> (c &amp;gt; threshold &amp;amp;&amp;amp; tab.length &amp;lt; MAXIMUM_CAPACITY)<br>                    rehash(node);<br>                <span class="hljs-keyword">else</span><br>                    setEntryAt(tab, index, node);<br>                ++modCount;<br>                count = c;<br>                oldValue = <span class="hljs-literal">null</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        unlock();<br>    &#125;<br>    <span class="hljs-keyword">return</span> oldValue;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> HashEntry&amp;lt;K,V&amp;gt; scanAndLockForPut(K key, <span class="hljs-type">int</span> hash, V value) &#123;<br>    HashEntry&amp;lt;K,V&amp;gt; first = entryForHash(<span class="hljs-built_in">this</span>, hash);<br>    HashEntry&amp;lt;K,V&amp;gt; e = first;<br>    HashEntry&amp;lt;K,V&amp;gt; node = <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">retries</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>; <span class="hljs-comment">// negative while locating node</span><br>    <span class="hljs-comment">// ä¸å®šçš„é‡æ–°æŠ¢é”ï¼ŒæŠ¢é”çš„è¿‡ç¨‹å½“ä¸­å®Œæˆå¾ˆå¤šåˆå§‹åŒ–çš„å·¥ä½œ</span><br><br>    <span class="hljs-keyword">while</span> (!tryLock()) &#123;<br>        HashEntry&amp;lt;K,V&amp;gt; f; <span class="hljs-comment">// to recheck first below</span><br>        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡å†æ¬¡æŠ¢é”æ—¶é¡ºä¾¿åˆå§‹åŒ–äº†entry</span><br>        <span class="hljs-keyword">if</span> (retries &amp;lt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> (e == <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <span class="hljs-comment">// speculatively create node</span><br>                    node = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashEntry</span>&amp;lt;K,V&amp;gt;(hash, key, value, <span class="hljs-literal">null</span>);<br>                retries = <span class="hljs-number">0</span>;<br>            &#125;<br>            <span class="hljs-comment">// å‘ç°é‡å¤çš„keyå°±ä¸ç”¨åˆè¯†åŒ–entryäº†</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.equals(e.key))<br>                retries = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span><br>                e = e.next;<br>        &#125;<br>        <span class="hljs-comment">// å¦‚æœè¶…è¿‡æœ€å¤§çš„æŠ¢é”çš„æ¬¡æ•°ç›´æ¥è°ƒç”¨lock</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (++retries &amp;gt; MAX_SCAN_RETRIES) &#123;<br>            lock();<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((retries &amp;amp; <span class="hljs-number">1</span>) == <span class="hljs-number">0</span> &amp;amp;&amp;amp;<br>                 (f = entryForHash(<span class="hljs-built_in">this</span>, hash)) != first) &#123;<br>            e = first = f; <span class="hljs-comment">// re-traverse if entry changed</span><br>            retries = -<span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> node;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€guavaæä¾›çš„ä¸å¯å˜é›†åˆ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5ã€guavaæä¾›çš„ä¸å¯å˜é›†åˆ">#</a> 5ã€guavaæä¾›çš„ä¸å¯å˜é›†åˆ</h3><h1 id="" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#">#</a></h1><h2 id="ä¸ƒã€junitå•å…ƒæµ‹è¯•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸ƒã€junitå•å…ƒæµ‹è¯•">#</a> ä¸ƒã€JUnitå•å…ƒæµ‹è¯•</h2><h3 id="_1ã€junit-å…¥é—¨" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€junit-å…¥é—¨">#</a> 1ã€JUnit å…¥é—¨</h3><blockquote><p>JUnit æ˜¯ä¸€ä¸ª Java ç¼–ç¨‹è¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚JUnit åœ¨æµ‹è¯•é©±åŠ¨çš„å¼€å‘æ–¹é¢æœ‰å¾ˆé‡è¦çš„å‘å±•ï¼Œæ˜¯èµ·æºäº JUnit çš„ä¸€ä¸ªç»Ÿç§°ä¸º xUnit çš„å•å…ƒæµ‹è¯•æ¡†æ¶ä¹‹ä¸€ã€‚</p></blockquote><blockquote><p>JUnitçš„å¥½å¤„ï¼š</p></blockquote><ol><li>å¯ä»¥ä¹¦å†™ä¸€ç³»åˆ—çš„æµ‹è¯•æ–¹æ³•ï¼Œå¯¹é¡¹ç›®æ‰€æœ‰çš„æ¥å£æˆ–è€…æ–¹æ³•è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li><li>å¯åŠ¨åï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¹¶åˆ¤æ–­æ‰§è¡Œç»“æœ, ä¸éœ€è¦äººä¸ºçš„å¹²é¢„ã€‚</li><li>åªéœ€è¦æŸ¥çœ‹æœ€åç»“æœï¼Œå°±çŸ¥é“æ•´ä¸ªé¡¹ç›®çš„æ–¹æ³•æ¥å£æ˜¯å¦é€šç•…ã€‚</li><li>æ¯ä¸ªå•å…ƒæµ‹è¯•ç”¨ä¾‹ç›¸å¯¹ç‹¬ç«‹ï¼Œç”±Junit å¯åŠ¨ï¼Œè‡ªåŠ¨è°ƒç”¨ã€‚ä¸éœ€è¦æ·»åŠ é¢å¤–çš„è°ƒç”¨è¯­å¥ã€‚</li><li>æ·»åŠ ï¼Œåˆ é™¤ï¼Œå±è”½æµ‹è¯•æ–¹æ³•ï¼Œä¸å½±å“å…¶ä»–çš„æµ‹è¯•æ–¹æ³•ã€‚ å¼€æºæ¡†æ¶éƒ½å¯¹JUnit æœ‰ç›¸åº”çš„æ”¯æŒã€‚</li></ol><p>JUnitå…¶å®å°±æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œideaä¸­å¯ä»¥é€šè¿‡è‡ªåŠ¨ä¿®å¤åŠŸèƒ½ç›´æ¥æ·»åŠ ã€‚ä½†æ˜¯ä¸ºäº†æ¼”ç¤ºæ¸…æ¥šï¼Œæˆ‘ä»¬è¿˜æ˜¯å®‰è£…è§„çŸ©å¼•å…¥jaråŒ…å®Œæˆã€‚</p><p>ä½¿ç”¨JUnitæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸‹è¾¹ä¸¤ä¸ªjaråŒ…å³å¯ï¼š</p><ol><li>hamcrest-core-1.1.jar</li><li>junit-4.12.jar</li></ol><p>ç½‘ç«™æœ‰æä¾›ã€‚</p><p>åŠ å…¥JUnitåï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæµ‹è¯•ç±»ï¼Œæµ‹è¯•æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæµ‹è¯•æ–¹æ³•éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼š</p><figure><img class="lazy" alt="image-20210908231431143" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908231431143-be5f4d93.png" tabindex="0"/><figcaption>image-20210908231431143</figcaption></figure><h3 id="_2ã€junit-æ–­è¨€" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€junit-æ–­è¨€">#</a> 2ã€JUnit æ–­è¨€</h3><p>Junitæ‰€æœ‰çš„æ–­è¨€éƒ½åŒ…å«åœ¨ Assert ç±»ä¸­ã€‚</p><p>è¿™ä¸ªç±»æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„æ–­è¨€æ–¹æ³•æ¥ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚åªæœ‰å¤±è´¥çš„æ–­è¨€æ‰ä¼šè¢«è®°å½•ã€‚Assert ç±»ä¸­çš„ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•åˆ—å¼å¦‚ä¸‹ï¼š</p><ol><li><code>void assertEquals(boolean expected, boolean actual)</code>:æ£€æŸ¥ä¸¤ä¸ªå˜é‡æˆ–è€…ç­‰å¼æ˜¯å¦å¹³è¡¡</li><li><code>void assertTrue(boolean expected, boolean actual)</code>:æ£€æŸ¥æ¡ä»¶ä¸ºçœŸ</li><li><code>void assertFalse(boolean condition)</code>:æ£€æŸ¥æ¡ä»¶ä¸ºå‡</li><li><code>void assertNotNull(Object object)</code>:æ£€æŸ¥å¯¹è±¡ä¸ä¸ºç©º</li><li><code>void assertNull(Object object)</code>:æ£€æŸ¥å¯¹è±¡ä¸ºç©º</li><li><code>void assertSame(boolean condition)</code>:assertSame() æ–¹æ³•æ£€æŸ¥ä¸¤ä¸ªç›¸å…³å¯¹è±¡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li><li><code>void assertNotSame(boolean condition)</code>:assertNotSame() æ–¹æ³•æ£€æŸ¥ä¸¤ä¸ªç›¸å…³å¯¹è±¡æ˜¯å¦ä¸æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li><li><code>void assertArrayEquals(expectedArray, resultArray)</code>:assertArrayEquals() æ–¹æ³•æ£€æŸ¥ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰</li></ol><p>æ–­è¨€ä¸æˆåŠŸä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¼šæœ‰çº¢è‰²çš„è¿›åº¦æ¡ï¼Œæ–­è¨€èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾ˆå¥½çš„é¢„åˆ¤ç»“æœï¼Œå³ä½¿ç¨‹åºæ­£å¸¸è¿è¡Œä½†æ˜¯ç»“æœä¸æ­£ç¡®ï¼Œä¹Ÿä¼šä»¥å¤±è´¥ç»“æŸã€‚</p><figure><img class="lazy" alt="image-20210908232010018" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908232010018-a0098cc0.png" tabindex="0"/><figcaption>image-20210908232010018</figcaption></figure><h3 id="_3ã€junit-æ³¨è§£" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€junit-æ³¨è§£">#</a> 3ã€JUnit æ³¨è§£</h3><ol><li><code>@Test</code>:è¿™ä¸ªæ³¨é‡Šè¯´æ˜ä¾é™„åœ¨ JUnit çš„ public void æ–¹æ³•å¯ä»¥ä½œä¸ºä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹ã€‚</li><li><code>@Before</code>:æœ‰äº›æµ‹è¯•åœ¨è¿è¡Œå‰éœ€è¦åˆ›é€ å‡ ä¸ªç›¸ä¼¼çš„å¯¹è±¡ã€‚åœ¨ public void æ–¹æ³•åŠ è¯¥æ³¨é‡Šæ˜¯å› ä¸ºè¯¥æ–¹æ³•éœ€è¦åœ¨ test æ–¹æ³•å‰è¿è¡Œã€‚</li><li><code>@After</code>:å¦‚æœä½ å°†å¤–éƒ¨èµ„æºåœ¨ Before æ–¹æ³•ä¸­åˆ†é…ï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨æµ‹è¯•è¿è¡Œåé‡Šæ”¾ä»–ä»¬ã€‚åœ¨ public void æ–¹æ³•åŠ è¯¥æ³¨é‡Šæ˜¯å› ä¸ºè¯¥æ–¹æ³•éœ€è¦åœ¨ test æ–¹æ³•åè¿è¡Œã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JunitTest</span> &#123;<br><br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;before junit!&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;hello junit!&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@After</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;after junit!&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img class="lazy" alt="image-20210908232303482" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908232303482-5262fc76.png" tabindex="0"/><figcaption>image-20210908232303482</figcaption></figure><h3 id="_4ã€å‘½åè§„èŒƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4ã€å‘½åè§„èŒƒ">#</a> 4ã€å‘½åè§„èŒƒ</h3><p>å•å…ƒæµ‹è¯•ç±»çš„å‘½åè§„èŒƒä¸ºï¼šè¢«æµ‹è¯•ç±»çš„ç±»å+Testã€‚.</p><p>å•å…ƒæµ‹è¯•ç±»ä¸­æµ‹è¯•æ–¹æ³•çš„å‘½åè§„èŒƒä¸ºï¼štest+è¢«æµ‹è¯•æ–¹æ³•çš„æ–¹æ³•å+AAAï¼Œå…¶ä¸­AAAä¸ºå¯¹åŒä¸€ä¸ªæ–¹æ³•çš„ä¸åŒçš„å•å…ƒæµ‹è¯•ç”¨ä¾‹çš„è‡ªå®šä¹‰åç§°ã€‚.</p><h2 id="å…­ã€æ€§èƒ½å¯¹æ¯”" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å…­ã€æ€§èƒ½å¯¹æ¯”">#</a> å…­ã€æ€§èƒ½å¯¹æ¯”</h2><h3 id="_1ã€hashtableå’Œconcurrenthashmap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€hashtableå’Œconcurrenthashmap">#</a> 1ã€Hashtableå’ŒConcurrentHashMap</h3><p>æˆ‘ä»¬å°è¯•å¼€è¾Ÿ50ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å‘é›†åˆä¸­put100000ä¸ªå…ƒç´ ï¼Œæµ‹è¯•ä¸¤ä¸ªç±»æ‰€éœ€è¦çš„æ—¶é—´ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hashtableTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    <span class="hljs-keyword">final</span> Map&amp;lt;Integer,Integer&amp;gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>&amp;lt;&amp;gt;(<span class="hljs-number">500000</span>);<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">50</span>);<br>    System.out.println(<span class="hljs-string">&quot;----------------å¼€å§‹æµ‹è¯•Hashtable------------------&quot;</span>);<br>    <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">50</span>; i++) &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&amp;gt;&#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &amp;lt; <span class="hljs-number">100000</span>; k++) &#123;<br>                map.put(j*k,<span class="hljs-number">1</span>);<br>            &#125;<br>            countDownLatch.countDown();<br>        &#125;).start();<br>    &#125;<br>    countDownLatch.await();<br>    <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.println(<span class="hljs-string">&quot;hashtable:(end-start) = &quot;</span> + (end - start));<br><br>    <span class="hljs-comment">// ----------------å¼€å§‹æµ‹è¯•ConcurrentHashMap------------------</span><br>    System.out.println(<span class="hljs-string">&quot;----------------å¼€å§‹æµ‹è¯•ConcurrentHashMap------------------&quot;</span>);<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span> <span class="hljs-variable">map2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&amp;lt;&amp;gt;(<span class="hljs-number">500000</span>);<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">countDownLatch2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">50</span>);<br>    start = System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">50</span>; i++) &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&amp;gt;&#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &amp;lt; <span class="hljs-number">100000</span>; k++) &#123;<br>                map2.put(j*k,<span class="hljs-number">1</span>);<br>            &#125;<br>            countDownLatch2.countDown();<br>        &#125;).start();<br>    &#125;<br>    countDownLatch.await();<br>    end = System.currentTimeMillis();<br>    System.out.println(<span class="hljs-string">&quot;ConcurrentHashMap:(end-start) = &quot;</span> + (end - start));<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾—åˆ°çš„ç»“æœï¼šæ€§èƒ½çœŸçš„å·®è·å¾ˆå¤§</p><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">----------------å¼€å§‹æµ‹è¯•Hashtable------------------<br>hashtable:(end-start) = 777<br>----------------å¼€å§‹æµ‹è¯•ConcurrentHashMap------------------<br>ConcurrentHashMap:(end-start) = 2<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€arraylistå’Œlinkedlist" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€arraylistå’Œlinkedlist">#</a> 2ã€arraylistå’Œlinkedlist</h3><h4 id="_1-é¡ºåºæ·»åŠ " tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-é¡ºåºæ·»åŠ ">#</a> ï¼ˆ1ï¼‰é¡ºåºæ·»åŠ </h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListAdd</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">243</span>æ¯«ç§’ã€‚<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListAdd</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">2524</span>æ¯«ç§’ã€‚<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-ä½¿ç”¨forå¾ªç¯è¿­ä»£è·å–" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-ä½¿ç”¨forå¾ªç¯è¿­ä»£è·å–">#</a> ï¼ˆ2ï¼‰ä½¿ç”¨forå¾ªç¯è¿­ä»£è·å–</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListFor</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;å¼€å§‹------&quot;</span>);<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; list.size(); i++) &#123;<br>        list.get(i);<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">2</span>æ¯«ç§’ã€‚<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListFor</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;å¼€å§‹------&quot;</span>);<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; list.size(); i++) &#123;<br>        list.get(i);<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    æ— æ³•è®¡ç®—æ—¶é—´ã€‚<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-ä½¿ç”¨è¿­ä»£å™¨è¿­ä»£è·å–" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-ä½¿ç”¨è¿­ä»£å™¨è¿­ä»£è·å–">#</a> ï¼ˆ3ï¼‰ä½¿ç”¨è¿­ä»£å™¨è¿­ä»£è·å–</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListIterator</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;å¼€å§‹------&quot;</span>);<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    Iterator&amp;lt;Integer&amp;gt; iterator = list.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        iterator.next();<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    å¼€å§‹------<br>    ç”¨æ—¶<span class="hljs-number">4</span>æ¯«ç§’ã€‚<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListIterator</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add((<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;å¼€å§‹------&quot;</span>);<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    Iterator&amp;lt;Integer&amp;gt; iterator = list.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        iterator.next();<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br><br>ç»“æœï¼š<br>    å¼€å§‹------<br>    ç”¨æ—¶<span class="hljs-number">42</span>æ¯«ç§’ã€‚<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-å¤´æ’" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-å¤´æ’">#</a> ï¼ˆ4ï¼‰å¤´æ’</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListAddHeader</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    æ— æ³•ç®—å‡ºï¼Œå¤ªæ…¢<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListAddHeader</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">2487</span>æ¯«ç§’ã€‚<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-éšæœºåˆ é™¤" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5-éšæœºåˆ é™¤">#</a> ï¼ˆ5ï¼‰éšæœºåˆ é™¤</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListDel</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-comment">// ä¸ç”¨ç®¡ä¸ºå•¥ï¼Œè¿™å°±æ˜¯æ’åºï¼Œå¤åˆ¶è¿‡æ¥ç”¨å°±è¡Œï¼Œå†™ä¸ªå†’æ³¡ä¹Ÿè¡Œ</span><br>    Iterator&amp;lt;Integer&amp;gt; iterator = list.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-keyword">if</span>(iterator.next()&amp;gt;<span class="hljs-number">5000000</span>)&#123;<br>            iterator.remove();<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">45</span>æ¯«ç§’ã€‚<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListDel</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">10000000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-comment">// ä¸ç”¨ç®¡ä¸ºå•¥ï¼Œè¿™å°±æ˜¯æ’åºï¼Œå¤åˆ¶è¿‡æ¥ç”¨å°±è¡Œï¼Œå†™ä¸ªå†’æ³¡ä¹Ÿè¡Œ</span><br>    Iterator&amp;lt;Integer&amp;gt; iterator = list.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>        <span class="hljs-keyword">if</span>(iterator.next()&amp;gt;<span class="hljs-number">5000000</span>)&#123;<br>            iterator.remove();<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    å¤ªæ…¢ï¼Œæ—¶é—´æ²¡å‡ºæ¥<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-è‡ªå¸¦çš„æ’åºæ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_6-è‡ªå¸¦çš„æ’åºæ–¹æ³•">#</a> ï¼ˆ6ï¼‰è‡ªå¸¦çš„æ’åºæ–¹æ³•</h4><p>æ’åºæ¯”è¾ƒè€—è´¹èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠé‡çº§è°ƒæ•´åˆ°äº†åä¸‡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testArrayListSort</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">100000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-comment">// ä¸ç”¨ç®¡ä¸ºå•¥ï¼Œè¿™å°±æ˜¯æ’åºï¼Œå¤åˆ¶è¿‡æ¥ç”¨å°±è¡Œï¼Œå†™ä¸ªå†’æ³¡ä¹Ÿè¡Œ</span><br>    list.sort(Comparator.comparingInt(num -&amp;gt; num));<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">49</span>æ¯«ç§’ã€‚<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLinkedListSort</span><span class="hljs-params">()</span>&#123;<br>    List&amp;lt;Integer&amp;gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&amp;lt;&amp;gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &amp;lt; <span class="hljs-number">100000</span>; i++) &#123;<br>        list.add(<span class="hljs-number">0</span>,(<span class="hljs-type">int</span>)(Math.random()*<span class="hljs-number">100</span>));<br>    &#125;<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-comment">// ä¸ç”¨ç®¡ä¸ºå•¥ï¼Œè¿™å°±æ˜¯æ’åºï¼Œå¤åˆ¶è¿‡æ¥ç”¨å°±è¡Œï¼Œå†™ä¸ªå†’æ³¡ä¹Ÿè¡Œ</span><br>    list.sort(Comparator.comparingInt(num -&amp;gt; num));<br>    <span class="hljs-type">Long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    System.out.printf(<span class="hljs-string">&quot;ç”¨æ—¶%dæ¯«ç§’ã€‚&quot;</span>,end-start);<br>&#125;<br><br>ç»“æœï¼š<br>    ç”¨æ—¶<span class="hljs-number">53</span>æ¯«ç§’ã€‚<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-æ€è€ƒ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_7-æ€è€ƒ">#</a> ï¼ˆ7ï¼‰æ€è€ƒ</h4><p>å…¶å®æˆ‘ä»¬å­¦ä¹ æ—¶ï¼Œæ€»æ˜¯å»èƒŒè¯µæ¦‚å¿µï¼š</p><p>æ•°ç»„æŸ¥è¯¢å¿«ï¼Œæ’å…¥æ…¢ã€‚é“¾è¡¨æ’å…¥æ…¢ï¼ŒæŸ¥è¯¢å¿«ã€‚</p><ul><li>ä½†æ˜¯ç»è¿‡æµ‹è¯•ï¼Œå°¾æ’åè€Œæ˜¯æ•°ç»„å¿«ï¼Œè€Œå°¾æ’çš„ä½¿ç”¨åœºæ™¯æå¤šã€‚</li><li>æµ‹è¯•äº†å„ç§è¿­ä»£ï¼Œéå†æ–¹æ³•ï¼ŒArrayListåŸºæœ¬éƒ½æ˜¯æ¯”LinkedListè¦å¿«ã€‚</li><li>éšæœºæ’å…¥ï¼Œé“¾è¡¨ä¼šå¿«å¾ˆå¤šï¼Œç¡®å®æœ‰ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯LinkedListæ›´åˆé€‚ï¼Œæ¯”å¦‚ä»¥åæˆ‘ä»¬å­¦çš„è¿‡æ»¤å™¨é“¾ã€‚</li><li>éšæœºåˆ é™¤ï¼Œé“¾è¡¨çš„æ•ˆç‡ä¹Ÿæ˜¯æ— æ¯”ä¼˜äºæ•°ç»„ï¼Œå¦‚æœæˆ‘ä»¬å­˜åœ¨éœ€è¦è¿‡æ»¤åˆ é™¤å¤§é‡éšæœºå…ƒç´ çš„åœºæ™¯ä¹Ÿèƒ½ä½¿ç”¨linkedlistã€‚</li><li>æˆ‘ä»¬å·¥ä½œä¸­çš„ä½¿ç”¨è¿˜æ˜¯ä»¥ArrayListä¸ºä¸»ï¼Œå› ä¸ºå®ƒçš„ä½¿ç”¨åœºæ™¯æœ€å¤šã€‚</li></ul><h2 id="ä¸ƒã€java8ç‰¹æ€§" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#ä¸ƒã€java8ç‰¹æ€§">#</a> ä¸ƒã€Java8ç‰¹æ€§</h2><h3 id="_1ã€æ¥å£é»˜è®¤æ–¹æ³•" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€æ¥å£é»˜è®¤æ–¹æ³•">#</a> 1ã€æ¥å£é»˜è®¤æ–¹æ³•</h3><p>â€‹ åœ¨JDK8ä¹‹å‰ï¼Œæ¥å£ä¸èƒ½å®šä¹‰ä»»ä½•å®ç°ï¼Œè¿™æ„å‘³ç€ä¹‹å‰æ‰€æœ‰çš„JAVAç‰ˆæœ¬ä¸­ï¼Œæ¥å£åˆ¶å®šçš„æ–¹æ³•æ˜¯æŠ½è±¡çš„ï¼Œä¸åŒ…å«æ–¹æ³•ä½“ã€‚ä»JKD8å¼€å§‹ï¼Œæ·»åŠ äº†ä¸€ç§æ–°åŠŸèƒ½-é»˜è®¤æ–¹æ³•ã€‚é»˜è®¤æ–¹æ³•å…è®¸æ¥å£æ–¹æ³•å®šä¹‰é»˜è®¤å®ç°ï¼Œè€Œæ‰€æœ‰å­ç±»éƒ½å°†æ‹¥æœ‰è¯¥æ–¹æ³•åŠå®ç°ã€‚</p><p>â€‹ é»˜è®¤æ–¹æ³•çš„ä¸»è¦ä¼˜åŠ¿æ˜¯æä¾›ä¸€ç§æ‹“å±•æ¥å£çš„æ–¹æ³•ï¼Œè€Œä¸ç ´åç°æœ‰ä»£ç ã€‚å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå·²ç»æŠ•å…¥ä½¿ç”¨æ¥å£ï¼Œéœ€è¦æ‹“å±•ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œåœ¨JDK8ä»¥å‰ï¼Œå¦‚æœä¸ºä¸€ä¸ªä½¿ç”¨çš„æ¥å£å¢åŠ ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œåˆ™æˆ‘ä»¬å¿…é¡»åœ¨æ‰€æœ‰å®ç°ç±»ä¸­æ·»åŠ è¯¥æ–¹æ³•çš„å®ç°ï¼Œå¦åˆ™ç¼–è¯‘ä¼šå‡ºç°å¼‚å¸¸ã€‚å¦‚æœå®ç°ç±»æ•°é‡å°‘å¹¶ä¸”æˆ‘ä»¬æœ‰æƒé™ä¿®æ”¹ï¼Œå¯èƒ½ä¼šå·¥ä½œé‡ç›¸å¯¹è¾ƒå°‘ã€‚å¦‚æœå®ç°ç±»æ¯”è¾ƒå¤šæˆ–è€…æˆ‘ä»¬æ²¡æœ‰æƒé™ä¿®æ”¹å®ç°ç±»æºä»£ç ï¼Œè¿™æ ·å¯èƒ½å°±æ¯”è¾ƒéº»çƒ¦ã€‚è€Œé»˜è®¤æ–¹æ³•åˆ™è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå®ç°ï¼Œå½“æ²¡æœ‰æ˜¾ç¤ºæä¾›å…¶ä»–å®ç°æ—¶å°±é‡‡ç”¨è¿™ä¸ªå®ç°ã€‚è¿™æ ·æ–°æ·»åŠ çš„æ–¹æ³•å°†ä¸ä¼šç ´åç°æœ‰ä»£ç ã€‚</p><h3 id="_2ã€å‡½æ•°å¼æ¥å£" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€å‡½æ•°å¼æ¥å£">#</a> 2ã€å‡½æ•°å¼æ¥å£</h3><p>â€‹ å‡½æ•°å¼æ¥å£åœ¨Javaä¸­æ˜¯æŒ‡ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£</p><p>â€‹ å‡½æ•°å¼æ¥å£ï¼Œå³é€‚ç”¨äºå‡½æ•°å¼ç¼–ç¨‹åœºæ™¯çš„æ¥å£ã€‚è€ŒJavaä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ä½“ç°å°±æ˜¯Lambdaï¼Œæ‰€ä»¥å‡½æ•°å¼æ¥å£å°±æ˜¯å¯ä»¥é€‚ç”¨äºLambdaä½¿ç”¨çš„æ¥å£ã€‚åªæœ‰ç¡®ä¿æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒJavaä¸­çš„Lambdaæ‰èƒ½é¡ºåˆ©åœ°è¿›è¡Œæ¨å¯¼ã€‚</p><p>æ¥ä¸‹æ¥ç»™å¤§å®¶ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ï¼Œåœ¨æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„Lamdbaè¡¨è¾¾å¼ä¸­å¤§é‡ä½¿ç”¨ã€‚</p><blockquote><p>æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹æ•°æ®</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Consumer</span>&amp;lt;T&amp;gt; &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(T t)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¾›åº”å•†ï¼Œç»™æˆ‘ä»¬äº§ç”Ÿæ•°æ®</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Supplier</span>&amp;lt;T&amp;gt; &#123;<br>    T <span class="hljs-title function_">get</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ–­è¨€ï¼Œåˆ¤æ–­ä¼ å…¥çš„tæ˜¯ä¸æ˜¯æ»¡è¶³æ¡ä»¶</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Predicate</span>&amp;lt;T&amp;gt; &#123;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">test</span><span class="hljs-params">(T t)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å‡½æ•°ï¼Œå°±æ˜¯å°†ä¸€ä¸ªæ•°æ®è½¬åŒ–æˆå¦ä¸€ä¸ªæ•°æ®</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Function</span>&amp;lt;T, R&amp;gt; &#123;<br>    R <span class="hljs-title function_">apply</span><span class="hljs-params">(T t)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ æˆ‘ä»¬åœ¨æ€è€ƒä¸Šè¾¹çš„ä»£ç çš„æ—¶å€™ï¼Œä¸è¦èƒ¡æ€ä¹±æƒ³ï¼Œå®ƒä»¬å°±æ˜¯ä¸€ç»„æ¥å£ï¼Œå’Œæˆ‘ä»¬çš„æ™®é€šæ¥å£ä¸€æ ·ï¼Œæ¯ä¸ªæ¥å£ä»£è¡¨ä¸€ç§èƒ½åŠ›ï¼Œéœ€è¦å­ç±»å»å®ç°ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥åŒ¿åå†…éƒ¨ç±»éƒ½å¯ä»¥å†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ã€‚</p><h3 id="_3ã€optional" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€optional">#</a> 3ã€Optional</h3><h4 id="_1-ç®€ä»‹" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-ç®€ä»‹">#</a> ï¼ˆ1ï¼‰ç®€ä»‹</h4><pre><code>     Optionalç±»æ˜¯Java8ä¸ºäº†è§£å†³nullå€¼åˆ¤æ–­é—®é¢˜ï¼Œå€Ÿé‰´google guavaç±»åº“çš„Optionalç±»è€Œå¼•å…¥çš„ä¸€ä¸ªåŒåOptionalç±»ï¼Œä½¿ç”¨Optionalç±»å¯ä»¥é¿å…æ˜¾å¼çš„nullå€¼åˆ¤æ–­ï¼ˆnullçš„é˜²å¾¡æ€§æ£€æŸ¥ï¼‰ï¼Œé¿å…nullå¯¼è‡´çš„NPEï¼ˆNullPointerExceptionï¼‰ã€‚
</code></pre><h4 id="_2-optionalå¯¹è±¡çš„åˆ›å»º" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-optionalå¯¹è±¡çš„åˆ›å»º">#</a> ï¼ˆ2ï¼‰Optionalå¯¹è±¡çš„åˆ›å»º</h4><p>Optionalç±»æä¾›äº†ä¸‰ä¸ªé™æ€æ–¹æ³•empty()ã€of(T value)ã€ofNullable(T value)æ¥åˆ›å»ºOptinalå¯¹è±¡ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-dart line-numbers-mode" data-ext="dart"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight dart"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// 1ã€åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡å€¼ä¸ºç©ºçš„Optionalå¯¹è±¡</span><br>Optional&amp;lt;<span class="hljs-built_in">String</span>&amp;gt; optStr = Optional.empty();<br><span class="hljs-comment">// 2ã€åˆ›å»ºåŒ…è£…å¯¹è±¡å€¼éç©ºçš„Optionalå¯¹è±¡</span><br>Optional&amp;lt;<span class="hljs-built_in">String</span>&amp;gt; optStr1 = Optional.of(<span class="hljs-string">&quot;optional&quot;</span>);<br><span class="hljs-comment">// 3ã€åˆ›å»ºåŒ…è£…å¯¹è±¡å€¼å…è®¸ä¸ºç©ºçš„Optionalå¯¹è±¡</span><br>Optional&amp;lt;<span class="hljs-built_in">String</span>&amp;gt; optStr2 = Optional.ofNullable(<span class="hljs-keyword">null</span>);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-optional-ç±»å…¸å‹æ¥å£çš„ä½¿ç”¨" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-optional-ç±»å…¸å‹æ¥å£çš„ä½¿ç”¨">#</a> ï¼ˆ3ï¼‰Optional ç±»å…¸å‹æ¥å£çš„ä½¿ç”¨</h4><p>ä¸‹é¢ä»¥ä¸€äº›å…¸å‹åœºæ™¯ä¸ºä¾‹ï¼Œåˆ—å‡ºOptional APIå¸¸ç”¨æ¥å£çš„ç”¨æ³•ï¼Œå¹¶é™„ä¸Šç›¸åº”ä»£ç ã€‚</p><blockquote><p>get()æ–¹æ³•</p></blockquote><p>ç®€å•çœ‹ä¸‹get()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">get</span>()</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NoSuchElementException(<span class="hljs-string">&quot;No value present&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œget()æ–¹æ³•ä¸»è¦ç”¨äºè¿”å›åŒ…è£…å¯¹è±¡çš„å®é™…å€¼ï¼Œä½†æ˜¯å¦‚æœåŒ…è£…å¯¹è±¡å€¼ä¸ºnullï¼Œä¼šæŠ›å‡ºNoSuchElementExceptionå¼‚å¸¸ã€‚</p><blockquote><p>isPresent()æ–¹æ³•</p></blockquote><p>isPresent()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">isPresent</span>()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼ŒisPresent()æ–¹æ³•ç”¨äºåˆ¤æ–­åŒ…è£…å¯¹è±¡çš„å€¼æ˜¯å¦éç©ºã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€æ®µç³Ÿç³•çš„ä»£ç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getGender</span>(<span class="hljs-params">Student student</span>)</span>&#123;<br>    Optional&amp;lt;Student&amp;gt; stuOpt =  Optional.ofNullable(student);<br>    <span class="hljs-keyword">if</span>(stuOpt.isPresent())<br>    &#123;<br>        <span class="hljs-keyword">return</span> stuOpt.<span class="hljs-keyword">get</span>().getGender();<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Unkown&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç å®ç°çš„æ˜¯ç¬¬ä¸€ç« (ç®€ä»‹)ä¸­çš„é€»è¾‘ï¼Œä½†æ˜¯<strong>è¿™ç§ç”¨æ³•ä¸ä½†æ²¡æœ‰å‡å°‘nullçš„é˜²å¾¡æ€§æ£€æŸ¥ï¼Œè€Œä¸”å¢åŠ äº†OptionalåŒ…è£…çš„è¿‡ç¨‹ï¼Œè¿èƒŒäº†Optionalè®¾è®¡çš„åˆè¡·ï¼Œå› æ­¤å¼€å‘ä¸­è¦é¿å…è¿™ç§ç³Ÿç³•çš„ä½¿ç”¨</strong></p><blockquote><p>ifPresent()æ–¹æ³•</p></blockquote><p>ifPresent()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ifPresent</span>(<span class="hljs-params">Consumer&amp;lt;? super T&amp;gt; consumer</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span>)<br>        consumer.accept(<span class="hljs-keyword">value</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ifPresent()æ–¹æ³•æ¥å—ä¸€ä¸ªConsumerå¯¹è±¡ï¼ˆæ¶ˆè´¹å‡½æ•°ï¼‰ï¼Œå¦‚æœåŒ…è£…å¯¹è±¡çš„å€¼éç©ºï¼Œè¿è¡ŒConsumerå¯¹è±¡çš„accept()æ–¹æ³•ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printName</span>(<span class="hljs-params">Student student</span>)</span>&#123;<br>    Optional.ofNullable(student).ifPresent(u -&amp;gt;  System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;The student name is : &quot;</span> + u.getName()));<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ç¤ºä¾‹ç”¨äºæ‰“å°å­¦ç”Ÿå§“åï¼Œç”±äºifPresent()æ–¹æ³•å†…éƒ¨åšäº†nullå€¼æ£€æŸ¥ï¼Œè°ƒç”¨å‰æ— éœ€æ‹…å¿ƒNPEé—®é¢˜ã€‚</p><blockquote><p>orElse()æ–¹æ³•</p></blockquote><p>orElse()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">orElse</span>(<span class="hljs-params">T other</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span> ? <span class="hljs-keyword">value</span> : other;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>orElse()æ–¹æ³•åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå³å¦‚æœåŒ…è£…å¯¹è±¡å€¼éç©ºï¼Œè¿”å›åŒ…è£…å¯¹è±¡å€¼ï¼Œå¦åˆ™è¿”å›å…¥å‚otherçš„å€¼ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight cpp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> String <span class="hljs-title">getGender</span><span class="hljs-params">(Student student)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> Optional.<span class="hljs-built_in">ofNullable</span>(student).<span class="hljs-built_in">map</span>(u -&amp;gt; u.<span class="hljs-built_in">getGender</span>()).<span class="hljs-built_in">orElse</span>(<span class="hljs-string">&quot;Unkown&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>orElseGet()æ–¹æ³•</p></blockquote><p>orElseGet()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">orElseGet</span>(<span class="hljs-params">Supplier&amp;lt;? extends T&amp;gt; other</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span> ? <span class="hljs-keyword">value</span> : other.<span class="hljs-keyword">get</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>orElseGet()æ–¹æ³•ä¸orElse()æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºorElseGet()æ–¹æ³•çš„å…¥å‚ä¸ºä¸€ä¸ªSupplierå¯¹è±¡ï¼Œç”¨Supplierå¯¹è±¡çš„get()æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚ï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight cpp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> String <span class="hljs-title">getGender</span><span class="hljs-params">(Student student)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> Optional.<span class="hljs-built_in">ofNullable</span>(student).<span class="hljs-built_in">map</span>(u -&amp;gt; u.<span class="hljs-built_in">getGender</span>()).<span class="hljs-built_in">orElseGet</span>(() -&amp;gt; <span class="hljs-string">&quot;Unkown&quot;</span>);      <br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>orElseThrow()æ–¹æ³•</p></blockquote><p>orElseThrow()æ–¹æ³•çš„æºç ï¼š</p><div class="language-csharp line-numbers-mode" data-ext="cs"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight csharp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> &amp;lt;X extends Throwable&amp;gt; <span class="hljs-function">T <span class="hljs-title">orElseThrow</span>(<span class="hljs-params">Supplier&amp;lt;? extends X&amp;gt; exceptionSupplier</span>) throws X</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">throw</span> exceptionSupplier.<span class="hljs-keyword">get</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ orElseThrow()æ–¹æ³•å…¶å®ä¸orElseGet()æ–¹æ³•éå¸¸ç›¸ä¼¼äº†ï¼Œå…¥å‚éƒ½æ˜¯Supplierå¯¹è±¡ï¼Œåªä¸è¿‡orElseThrow()çš„Supplierå¯¹è±¡å¿…é¡»è¿”å›ä¸€ä¸ªThrowableå¼‚å¸¸ï¼Œå¹¶åœ¨orElseThrow()ä¸­å°†å¼‚å¸¸æŠ›å‡ºï¼š</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight cpp"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> String <span class="hljs-title">getGender1</span><span class="hljs-params">(Student student)</span></span>&#123;<br>    <span class="hljs-keyword">return</span> Optional.<span class="hljs-built_in">ofNullable</span>(student).<span class="hljs-built_in">map</span>(u -&amp;gt; u.<span class="hljs-built_in">getGender</span>()).<span class="hljs-built_in">orElseThrow</span>(() -&amp;gt; <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">&quot;Unkown&quot;</span>));      <br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>orElseThrow()æ–¹æ³•é€‚ç”¨äºåŒ…è£…å¯¹è±¡å€¼ä¸ºç©ºæ—¶éœ€è¦æŠ›å‡ºç‰¹å®šå¼‚å¸¸çš„åœºæ™¯ã€‚</p><h2 id="å…«ã€streamç¼–ç¨‹" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#å…«ã€streamç¼–ç¨‹">#</a> å…«ã€Streamç¼–ç¨‹</h2><p>â€‹ Java8ä¸­çš„Streamæ˜¯å¯¹å®¹å™¨å¯¹è±¡åŠŸèƒ½çš„å¢å¼ºï¼Œå®ƒä¸“æ³¨äºå¯¹å®¹å™¨å¯¹è±¡è¿›è¡Œå„ç§éå¸¸ä¾¿åˆ©ã€é«˜æ•ˆçš„ èšåˆæ“ä½œï¼ˆaggregate operationï¼‰ï¼Œæˆ–è€…å¤§æ‰¹é‡æ•°æ®æ“ä½œ (bulk data operation)ã€‚Stream APIå€ŸåŠ©äºåŒæ ·æ–°å‡ºç°çš„Lambdaè¡¨è¾¾å¼ï¼Œæå¤§çš„æé«˜ç¼–ç¨‹æ•ˆç‡å’Œç¨‹åºå¯è¯»æ€§ã€‚åŒæ—¶ï¼Œå®ƒæä¾›ä¸²è¡Œå’Œå¹¶è¡Œä¸¤ç§æ¨¡å¼è¿›è¡Œæ±‡èšæ“ä½œï¼Œå¹¶å‘æ¨¡å¼èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ã€‚é€šå¸¸ï¼Œç¼–å†™å¹¶è¡Œä»£ç å¾ˆéš¾è€Œä¸”å®¹æ˜“å‡ºé”™, ä½†ä½¿ç”¨Stream APIæ— éœ€ç¼–å†™ä¸€è¡Œå¤šçº¿ç¨‹çš„ä»£ç ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å†™å‡ºé«˜æ€§èƒ½çš„å¹¶å‘ç¨‹åºã€‚</p><p>â€‹ æˆ‘è§‰å¾—æˆ‘ä»¬å¯ä»¥å°†æµçœ‹åšæµæ°´çº¿ï¼Œè¿™ä¸ªæµæ°´çº¿æ˜¯å¤„ç†æ•°æ®çš„æµæ°´çº¿ï¼Œä¸€ä¸ªäº§å“ç»è¿‡æµæ°´çº¿ä¼šæœ‰ä¸€é“é“çš„å·¥åºå°±å¦‚åŒå¯¹æ•°æ®çš„ä¸­é—´æ“ä½œï¼Œæ¯”å¦‚è¿‡æ»¤æˆ‘ä¸éœ€è¦çš„ï¼Œç»™æ•°æ®æ’åºèƒ½ï¼Œæœ€åçš„ç»ˆæ­¢æ“ä½œå°±æ˜¯äº§å“ä»æµæ°´çº¿ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»Ÿä¸€æ‰“åŒ…æ”¾å…¥ä»“åº“äº†ã€‚</p><p>â€‹ å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæµçš„æ—¶å€™ï¼Œé€šå¸¸åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤ï¼šè·å–ä¸€ä¸ªæ•°æ®æºï¼ˆsourceï¼‰â†’ æ•°æ®è½¬æ¢ â†’ æ‰§è¡Œæ“ä½œè·å–æƒ³è¦çš„ç»“æœã€‚<strong>æ¯æ¬¡è½¬æ¢åŸæœ‰Streamå¯¹è±¡ä¸æ”¹å˜ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Streamå¯¹è±¡ï¼ˆå¯ä»¥æœ‰å¤šæ¬¡è½¬æ¢ï¼‰</strong>ï¼Œè¿™å°±å…è®¸å¯¹å…¶æ“ä½œå¯ä»¥åƒé“¾æ¡ä¸€æ ·æ’åˆ—ï¼Œå˜æˆä¸€ä¸ªç®¡é“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:</p><p>Streamæœ‰å‡ ä¸ªç‰¹æ€§ï¼š</p><ol><li>Streamä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å¯¹æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œä¸€èˆ¬ä¼šè¾“å‡ºç»“æœã€‚</li><li>Streamä¸ä¼šæ”¹å˜æ•°æ®æºï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„é›†åˆæˆ–ä¸€ä¸ªå€¼ã€‚</li><li>Streamå…·æœ‰å»¶è¿Ÿæ‰§è¡Œç‰¹æ€§ï¼Œåªæœ‰è°ƒç”¨ç»ˆç«¯æ“ä½œæ—¶ï¼Œä¸­é—´æ“ä½œæ‰ä¼šæ‰§è¡Œã€‚</li></ol><figure><img class="lazy" alt="image-20210908180935125" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908180935125-49a6da24.png" tabindex="0"/><figcaption>image-20210908180935125</figcaption></figure><h3 id="_1ã€streamæµçš„åˆ›å»º" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1ã€streamæµçš„åˆ›å»º">#</a> 1ã€Streamæµçš„åˆ›å»º</h3><p>ï¼ˆ1ï¼‰Streamå¯ä»¥é€šè¿‡é›†åˆæ•°ç»„åˆ›å»ºã€‚</p><p>1ã€é€šè¿‡ java.util.Collection.stream() æ–¹æ³•ç”¨é›†åˆåˆ›å»ºæµï¼Œæˆ‘ä»¬å‘ç°</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">default</span> Stream&amp;lt;E&amp;gt; stream() &#123;<br>    <span class="hljs-keyword">return</span> StreamSupport.stream(spliterator(), <span class="hljs-literal">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">List&amp;lt;String&amp;gt; list = Arrays.asList(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>);<br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé¡ºåºæµ</span><br>Stream&amp;lt;String&amp;gt; stream = list.stream();<br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¹¶è¡Œæµ</span><br>Stream&amp;lt;String&amp;gt; parallelStream = list.parallelStream();<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰ä½¿ç”¨java.util.Arrays.stream(T[] array)æ–¹æ³•ç”¨æ•°ç»„åˆ›å»ºæµ</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] array=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>&#125;;<br><span class="hljs-type">IntStream</span> <span class="hljs-variable">stream</span> <span class="hljs-operator">=</span> Arrays.stream(array);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><p>ï¼ˆ3ï¼‰ä½¿ç”¨Streamçš„é™æ€æ–¹æ³•ï¼šof()ã€iterate()ã€generate()</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">Stream&amp;lt;Integer&amp;gt; stream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<br><br>Stream&amp;lt;Integer&amp;gt; stream2 = Stream.iterate(<span class="hljs-number">0</span>, (x) -&amp;gt; x + <span class="hljs-number">3</span>).limit(<span class="hljs-number">4</span>);<br>stream2.forEach(System.out::println);<br><br>Stream&amp;lt;Double&amp;gt; stream3 = Stream.generate(Math::random).limit(<span class="hljs-number">3</span>);<br>stream3.forEach(System.out::println);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€streamçš„ç»ˆæ­¢æ“ä½œ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2ã€streamçš„ç»ˆæ­¢æ“ä½œ">#</a> 2ã€Streamçš„ç»ˆæ­¢æ“ä½œ</h3><p>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬åç»­çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€éƒ¨åˆ†æ•°æ®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;  <span class="hljs-comment">// å§“å</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> salary; <span class="hljs-comment">// è–ªèµ„</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age; <span class="hljs-comment">// å¹´é¾„</span><br>    <span class="hljs-keyword">private</span> String sex; <span class="hljs-comment">//æ€§åˆ«</span><br>    <span class="hljs-keyword">private</span> String area;  <span class="hljs-comment">// åœ°åŒº</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> salary, <span class="hljs-type">int</span> age, String sex, String area)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.salary = salary;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.sex = sex;<br>        <span class="hljs-built_in">this</span>.area = area;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹åŒ–æ•°æ®ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç®€å•çš„é›†åˆå’Œä¸€ä¸ªå¤æ‚çš„é›†åˆã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaTest</span> &#123;<br><br>    List&amp;lt;Person&amp;gt; personList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&amp;lt;Person&amp;gt;();<br>    List&amp;lt;Integer&amp;gt; simpleList = Arrays.asList(<span class="hljs-number">15</span>, <span class="hljs-number">22</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>, <span class="hljs-number">33</span>, <span class="hljs-number">52</span>, <span class="hljs-number">14</span>);<br><br>    <span class="hljs-meta">@Before</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initData</span><span class="hljs-params">()</span>&#123;<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">3000</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&quot;ç”·&quot;</span>,<span class="hljs-string">&quot;å¤ªåŸ&quot;</span>));<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;æå››&quot;</span>,<span class="hljs-number">7000</span>,<span class="hljs-number">34</span>,<span class="hljs-string">&quot;ç”·&quot;</span>,<span class="hljs-string">&quot;è¥¿å®‰&quot;</span>));<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;ç‹äº”&quot;</span>,<span class="hljs-number">5200</span>,<span class="hljs-number">22</span>,<span class="hljs-string">&quot;å¥³&quot;</span>,<span class="hljs-string">&quot;å¤ªåŸ&quot;</span>));<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;å°é»‘&quot;</span>,<span class="hljs-number">1500</span>,<span class="hljs-number">33</span>,<span class="hljs-string">&quot;å¥³&quot;</span>,<span class="hljs-string">&quot;ä¸Šæµ·&quot;</span>));<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;ç‹—å­&quot;</span>,<span class="hljs-number">8000</span>,<span class="hljs-number">44</span>,<span class="hljs-string">&quot;å¥³&quot;</span>,<span class="hljs-string">&quot;åŒ—äº¬&quot;</span>));<br>        personList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;é“è›‹&quot;</span>,<span class="hljs-number">6200</span>,<span class="hljs-number">36</span>,<span class="hljs-string">&quot;å¥³&quot;</span>,<span class="hljs-string">&quot;å—äº¬&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-éå†-åŒ¹é…-foreach-find-match" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-éå†-åŒ¹é…-foreach-find-match">#</a> ï¼ˆ1ï¼‰éå†/åŒ¹é…ï¼ˆforeach/find/matchï¼‰</h4><p>å°†æ•°æ®æµæ¶ˆè´¹æ‰</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">foreachTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// æ‰“å°é›†åˆçš„å…ƒç´ </span><br>    simpleList.stream().forEach(System.out::println);<br>    <span class="hljs-comment">// å…¶å®å¯ä»¥ç®€åŒ–æ“ä½œçš„</span><br>    simpleList.forEach(System.out::println);<br>&#125;<br><br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">findTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ª</span><br>    Optional&amp;lt;Integer&amp;gt; first = simpleList.stream().findFirst();<br>    <span class="hljs-comment">// éšä¾¿æ‰¾ä¸€ä¸ª,å¯ä»¥çœ‹åˆ°findAny()æ“ä½œï¼Œè¿”å›çš„å…ƒç´ æ˜¯ä¸ç¡®å®šçš„ï¼Œ</span><br>    <span class="hljs-comment">// å¯¹äºåŒä¸€ä¸ªåˆ—è¡¨å¤šæ¬¡è°ƒç”¨findAny()æœ‰å¯èƒ½ä¼šè¿”å›ä¸åŒçš„å€¼ã€‚</span><br>    <span class="hljs-comment">// ä½¿ç”¨findAny()æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„æ€§èƒ½ã€‚å¦‚æœæ˜¯æ•°æ®è¾ƒå°‘ï¼Œä¸²è¡Œåœ°æƒ…å†µä¸‹ï¼Œä¸€èˆ¬ä¼šè¿”å›ç¬¬ä¸€ä¸ªç»“æœï¼Œ</span><br>    <span class="hljs-comment">// å¦‚æœæ˜¯å¹¶è¡Œçš„æƒ…å†µï¼Œé‚£å°±ä¸èƒ½ç¡®ä¿æ˜¯ç¬¬ä¸€ä¸ªã€‚</span><br>    Optional&amp;lt;Integer&amp;gt; any = simpleList.parallelStream().findAny();<br>    System.out.println(<span class="hljs-string">&quot;first = &quot;</span> + first.get());<br>    System.out.println(<span class="hljs-string">&quot;any = &quot;</span> + any.get());<br>&#125;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">matchTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æœ‰æ²¡æœ‰ä»»æ„ä¸€ä¸ªäººå¹´é¾„å¤§äº35å²</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> personList.stream().anyMatch(item -&amp;gt; item.getAge() &amp;gt; <span class="hljs-number">35</span>);<br>    System.out.println(<span class="hljs-string">&quot;flag = &quot;</span> + flag);<br><br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯æ‰€æœ‰äººå¹´é¾„éƒ½å¤§äº35å²</span><br>    flag = personList.stream().allMatch(item -&amp;gt; item.getAge() &amp;gt; <span class="hljs-number">35</span>);<br>    System.out.println(<span class="hljs-string">&quot;flag = &quot;</span> + flag);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å½’é›†-tolist-toset-tomap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-å½’é›†-tolist-toset-tomap">#</a> ï¼ˆ2ï¼‰å½’é›†(toList/toSet/toMap)</h4><p>â€‹ å› ä¸ºæµä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆåœ¨æµä¸­çš„æ•°æ®å®Œæˆå¤„ç†åï¼Œéœ€è¦å°†æµä¸­çš„æ•°æ®é‡æ–°å½’é›†åˆ°æ–°çš„é›†åˆé‡Œã€‚<code>toList</code>ã€<code>toSet</code>å’Œ<code>toMap</code>æ¯”è¾ƒå¸¸ç”¨ã€‚</p><p>ä¸‹é¢ç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º<code>toList</code>ã€<code>toSet</code>å’Œ<code>toMap</code>ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">collectTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æœ‰æ²¡æœ‰ä»»æ„ä¸€ä¸ªäººå¹´é¾„å¤§äº35å²</span><br>    List&amp;lt;Integer&amp;gt; collect = simpleList.stream().collect(Collectors.toList());<br>    System.out.println(collect);<br>    Set&amp;lt;Integer&amp;gt; collectSet = simpleList.stream().collect(Collectors.toSet());<br>    System.out.println(collectSet);<br>    Map&amp;lt;Integer,Integer&amp;gt; collectMap = simpleList.stream().collect(Collectors.toMap(item-&amp;gt;item,item-&amp;gt;item+<span class="hljs-number">1</span>));<br>    System.out.println(collectMap);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-ç»Ÿè®¡-count-averaging-sum-max-min" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-ç»Ÿè®¡-count-averaging-sum-max-min">#</a> ï¼ˆ3ï¼‰ ç»Ÿè®¡(count/averaging/sum/max/minï¼‰</h4><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">countTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æœ‰æ²¡æœ‰ä»»æ„ä¸€ä¸ªäººå¹´é¾„å¤§äº35å²</span><br>    <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().ints().limit(<span class="hljs-number">50</span>).count();<br>    System.out.println(<span class="hljs-string">&quot;count = &quot;</span> + count);<br>    <span class="hljs-type">OptionalDouble</span> <span class="hljs-variable">average</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().ints().limit(<span class="hljs-number">50</span>).average();<br>    average.ifPresent(System.out::println);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().ints().limit(<span class="hljs-number">50</span>).sum();<br>    System.out.println(sum);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ¡ˆä¾‹ï¼šè·å–å‘˜å·¥å·¥èµ„æœ€é«˜çš„äºº</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight text"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">Optional&amp;lt;Person&amp;gt; max = personList.stream().max((p1, p2) -&amp;gt; p1.getSalary() - p2.getSalary());<br>max.ifPresent(item -&amp;gt; System.out.println(item.getSalary()));<br><br>é‡Œè¾¹çš„æ¯”è¾ƒå™¨å¯ä»¥æ”¹ä¸ºï¼šComparator.comparingInt(Person::getSalary)<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-å½’çº¦-reduce" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-å½’çº¦-reduce">#</a> ï¼ˆ4ï¼‰å½’çº¦(reduce)</h4><p>å½’çº¦ï¼Œä¹Ÿç§°ç¼©å‡ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯æŠŠä¸€ä¸ªæµç¼©å‡æˆä¸€ä¸ªå€¼ï¼Œèƒ½å®ç°å¯¹é›†åˆæ±‚å’Œã€æ±‚ä¹˜ç§¯å’Œæ±‚æœ€å€¼æ“ä½œã€‚</p><blockquote><p>æ¡ˆä¾‹ï¼šæ±‚<code>Integer</code>é›†åˆçš„å…ƒç´ ä¹‹ä¹˜ç§¯ã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reduceTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> simpleList.stream().reduce(<span class="hljs-number">1</span>,(n1, n2) -&amp;gt; n1*n2);<br>    System.out.println(result);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-æ¥åˆ-joining" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5-æ¥åˆ-joining">#</a> ï¼ˆ5ï¼‰æ¥åˆ(joining)</h4><p><code>joining</code>å¯ä»¥å°†Streamä¸­çš„å…ƒç´ ç”¨ç‰¹å®šçš„è¿æ¥ç¬¦ï¼ˆæ²¡æœ‰çš„è¯ï¼Œåˆ™ç›´æ¥è¿æ¥ï¼‰è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">joiningTest</span><span class="hljs-params">()</span>&#123;<br>        List&amp;lt;String&amp;gt; list = Arrays.asList(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">string</span> <span class="hljs-operator">=</span> list.stream().collect(Collectors.joining(<span class="hljs-string">&quot;-&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;æ‹¼æ¥åçš„å­—ç¬¦ä¸²ï¼š&quot;</span> + string);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-åˆ†ç»„-partitioningby-groupingby" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_6-åˆ†ç»„-partitioningby-groupingby">#</a> ï¼ˆ6ï¼‰åˆ†ç»„(partitioningBy/groupingBy)</h4><ul><li>åˆ†åŒºï¼šå°†<code>stream</code>æŒ‰æ¡ä»¶åˆ†ä¸ºä¸¤ä¸ª<code>Map</code>ï¼Œæ¯”å¦‚å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦é«˜äº8000åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚</li><li>åˆ†ç»„ï¼šå°†é›†åˆåˆ†ä¸ºå¤šä¸ªMapï¼Œæ¯”å¦‚å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„ã€‚</li></ul><figure><img class="lazy" alt="image-20210908182643127" loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://upyun.thatcdn.cn/public/img/ydldoc/YDLImages/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/javase/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/image-20210908182643127-583f0fbb.png" tabindex="0"/><figcaption>image-20210908182643127</figcaption></figure><p><strong>æ¡ˆä¾‹ï¼šå°†å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦é«˜äº8000åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼›å°†å‘˜å·¥æŒ‰æ€§åˆ«å’Œåœ°åŒºåˆ†ç»„</strong></p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">groupingByTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// å°†å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦é«˜äº8000åˆ†ç»„</span><br>    Map&amp;lt;Boolean, List&amp;lt;Person&amp;gt;&amp;gt; part = personList.stream().collect(Collectors.partitioningBy(x -&amp;gt; x.getSalary() &amp;gt; <span class="hljs-number">8000</span>));<br>    <span class="hljs-comment">// å°†å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„</span><br>    Map&amp;lt;String, List&amp;lt;Person&amp;gt;&amp;gt; group = personList.stream().collect(Collectors.groupingBy(Person::getSex));<br>    <span class="hljs-comment">// å°†å‘˜å·¥å…ˆæŒ‰æ€§åˆ«åˆ†ç»„ï¼Œå†æŒ‰åœ°åŒºåˆ†ç»„</span><br>    Map&amp;lt;String, Map&amp;lt;String, List&amp;lt;Person&amp;gt;&amp;gt;&amp;gt; group2 = personList.stream().collect(Collectors.groupingBy(Person::getSex, Collectors.groupingBy(Person::getArea)));<br>    System.out.println(<span class="hljs-string">&quot;å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦å¤§äº8000åˆ†ç»„æƒ…å†µï¼š&quot;</span> + part);<br>    System.out.println(<span class="hljs-string">&quot;å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„æƒ…å†µï¼š&quot;</span> + group);<br>    System.out.println(<span class="hljs-string">&quot;å‘˜å·¥æŒ‰æ€§åˆ«ã€åœ°åŒºï¼š&quot;</span> + group2);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€streamä¸­é—´æ“ä½œ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3ã€streamä¸­é—´æ“ä½œ">#</a> 3ã€Streamä¸­é—´æ“ä½œ</h3><h4 id="_1-ç­›é€‰-filter" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_1-ç­›é€‰-filter">#</a> ï¼ˆ1ï¼‰ç­›é€‰ï¼ˆfilterï¼‰</h4><p>è¯¥æ“ä½œç¬¦éœ€è¦ä¼ å…¥ä¸€ä¸ªfunctionå‡½æ•°</p><blockquote><p>ç­›é€‰å‡º<code>simpleList</code>é›†åˆä¸­å¤§äº17çš„å…ƒç´ ï¼Œå¹¶æ‰“å°å‡ºæ¥</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">simpleList.stream().filter(item -&amp;gt; item &amp;gt; <span class="hljs-number">17</span>).forEach(System.out::println);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div></div></div><blockquote><p>ç­›é€‰å‘˜å·¥ä¸­å·¥èµ„é«˜äº8000çš„äººï¼Œå¹¶å½¢æˆæ–°çš„é›†åˆã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&amp;lt;Person&amp;gt; collect = personList.stream().filter(item -&amp;gt; item.getSalary() &amp;gt; <span class="hljs-number">8000</span>).collect(Collectors.toList());<br>System.out.println(<span class="hljs-string">&quot;collect = &quot;</span> + collect);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ˜ å°„-map-flatmap" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_2-æ˜ å°„-map-flatmap">#</a> ï¼ˆ2ï¼‰æ˜ å°„(map/flatMap)</h4><p>æ˜ å°„ï¼Œå¯ä»¥å°†ä¸€ä¸ªæµçš„å…ƒç´ æŒ‰ç…§ä¸€å®šçš„æ˜ å°„è§„åˆ™æ˜ å°„åˆ°å¦ä¸€ä¸ªæµä¸­ã€‚åˆ†ä¸º<code>map</code>å’Œ<code>flatMap</code>ï¼š</p><ul><li><code>map</code>ï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚</li><li><code>flatMap</code>ï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµã€‚</li></ul><blockquote><p>æ¡ˆä¾‹ï¼šå°†å‘˜å·¥çš„è–ªèµ„å…¨éƒ¨å¢åŠ 1000ã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">personList.stream().map(item -&amp;gt; &#123;<br>    item.setSalary(item.getSalary()+<span class="hljs-number">1000</span>);<br>    <span class="hljs-keyword">return</span> item;<br>&#125;).forEach(System.out::println);<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†simpleListè½¬åŒ–ä¸ºå­—ç¬¦ä¸²list</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&amp;lt;String&amp;gt; collect = simpleList.stream().map(num -&amp;gt; Integer.toString(num))<br>                .collect(Collectors.toList());<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ’åº-sorted" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_3-æ’åº-sorted">#</a> ï¼ˆ3ï¼‰æ’åº(sorted)</h4><p>sortedï¼Œä¸­é—´æ“ä½œã€‚æœ‰ä¸¤ç§æ’åºï¼š</p><ul><li>sorted()ï¼šè‡ªç„¶æ’åºï¼Œæµä¸­å…ƒç´ éœ€å®ç°Comparableæ¥å£</li><li>sorted(Comparator com)ï¼šComparatoræ’åºå™¨è‡ªå®šä¹‰æ’åº</li></ul><p><strong>æ¡ˆä¾‹ï¼šå°†å‘˜å·¥æŒ‰å·¥èµ„ç”±é«˜åˆ°ä½ï¼ˆå·¥èµ„ä¸€æ ·åˆ™æŒ‰å¹´é¾„ç”±å¤§åˆ°å°ï¼‰æ’åº</strong></p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// æŒ‰å·¥èµ„å‡åºæ’åºï¼ˆè‡ªç„¶æ’åºï¼‰</span><br>    List&amp;lt;String&amp;gt; newList = personList.stream().sorted(Comparator.comparing(Person::getSalary)).map(Person::getName)<br>        .collect(Collectors.toList());<br>    <span class="hljs-comment">// æŒ‰å·¥èµ„å€’åºæ’åº</span><br>    List&amp;lt;String&amp;gt; newList2 = personList.stream().sorted(Comparator.comparing(Person::getSalary).reversed())<br>        .map(Person::getName).collect(Collectors.toList());<br>    <span class="hljs-comment">// å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„å‡åºæ’åº</span><br>    List&amp;lt;String&amp;gt; newList3 = personList.stream()<br>        .sorted(Comparator.comparing(Person::getSalary).thenComparing(Person::getAge)).map(Person::getName)<br>        .collect(Collectors.toList());<br>    <span class="hljs-comment">// å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„è‡ªå®šä¹‰æ’åºï¼ˆé™åºï¼‰</span><br>    List&amp;lt;String&amp;gt; newList4 = personList.stream().sorted((p1, p2) -&amp;gt; &#123;<br>        <span class="hljs-keyword">if</span> (p1.getSalary() == p2.getSalary()) &#123;<br>            <span class="hljs-keyword">return</span> p2.getAge() - p1.getAge();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> p2.getSalary() - p1.getSalary();<br>        &#125;<br>    &#125;).map(Person::getName).collect(Collectors.toList());<br><br>    System.out.println(<span class="hljs-string">&quot;æŒ‰å·¥èµ„å‡åºæ’åºï¼š&quot;</span> + newList);<br>    System.out.println(<span class="hljs-string">&quot;æŒ‰å·¥èµ„é™åºæ’åºï¼š&quot;</span> + newList2);<br>    System.out.println(<span class="hljs-string">&quot;å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„å‡åºæ’åºï¼š&quot;</span> + newList3);<br>    System.out.println(<span class="hljs-string">&quot;å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„è‡ªå®šä¹‰é™åºæ’åºï¼š&quot;</span> + newList4);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-peekæ“ä½œ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_4-peekæ“ä½œ">#</a> ï¼ˆ4ï¼‰peekæ“ä½œ</h4><p>peekçš„è°ƒè¯•ä½œç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">peekTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// åœ¨streamä¸­é—´è¿›è¡Œè°ƒè¯•ï¼Œå› ä¸ºstreamä¸æ”¯æŒdebug</span><br>    List&amp;lt;Person&amp;gt; collect = personList.stream().filter(p -&amp;gt; p.getSalary() &amp;gt; <span class="hljs-number">5000</span>)<br>        .peek(System.out::println).collect(Collectors.toList());<br>    <span class="hljs-comment">// ä¿®æ”¹å…ƒç´ çš„ä¿¡æ¯ï¼Œç»™æ¯ä¸ªå‘˜å·¥æ¶¨å·¥èµ„ä¸€åƒ</span><br>    personList.stream().peek(p -&amp;gt; p.setSalary(p.getSalary() + <span class="hljs-number">1000</span>))<br>        .forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-å…¶ä»–æ“ä½œ" tabindex="-1"><a aria-hidden="true" class="header-anchor" href="#_5-å…¶ä»–æ“ä½œ">#</a> ï¼ˆ5ï¼‰å…¶ä»–æ“ä½œ</h4><p>æµä¹Ÿå¯ä»¥è¿›è¡Œåˆå¹¶ã€å»é‡ã€é™åˆ¶ã€è·³è¿‡ç­‰æ“ä½œã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><button aria-label="å¤åˆ¶ä»£ç " class="copy-code-button" data-copied="å·²å¤åˆ¶"><div class="copy-icon"></div></button>

<figure class="highlight java"><figcaption><span>From: å…ƒåŠ¨åŠ›</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">otherTest</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">// distinctå»æ‰é‡å¤æ•°æ®   </span><br>    <span class="hljs-comment">// skipè·³è¿‡å‡ ä¸ªæ•°æ®</span><br>    <span class="hljs-comment">// limité™åˆ¶ä½¿ç”¨å‡ ä¸ªæ•°æ®</span><br>    simpleList.stream().distinct().skip(<span class="hljs-number">2</span>).limit(<span class="hljs-number">3</span>).forEach(System.out::println);<br>&#125;<br><br><span class="hljs-comment">//  11,11,22,22,11,23,43,55,78</span><br><span class="hljs-comment">//  å»é‡  11ï¼Œ22,23,43,55,78</span><br><span class="hljs-comment">//  æ‰è¿‡ä¸¤ä¸ª  23ï¼Œ43,55,78</span><br><span class="hljs-comment">// ä½¿ç”¨3ä¸ª    23,43,55</span><br></code></pre></td></tr></table></figure>

<div aria-hidden="true" class="line-numbers"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">å›é¡¾ä¸Šä¸€ç¯‡</div><a href="/wiki/YDLDoc1/mysql%E5%AD%A6%E4%B9%A0/mysql%E8%BF%9B%E9%98%B6/mysql%E8%BF%9B%E9%98%B6.html">mysqlè¿›é˜¶</a></div><div class="item" id="next"><div class="note">æ¥ä¸‹æ¥é˜…è¯»</div><a href="/wiki/YDLDoc1/web/css/css.html">css</a></div></section></div>


  <div class="related-wrap md-text" id="comments">
    <section class='header cmt-title cap theme'>
      å¿«æ¥å‚ä¸è®¨è®ºå§
    </section>
    <section class='body cmt-body waline'>
      

<div id="waline_container" class="waline_thread"><svg class="loading" style="vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg></div>

    </section>
  </div>



<footer class="page-footer fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">åšå®¢</span><a href="/">è¿‘æœŸ</a><a href="/categories/">åˆ†ç±»</a><a href="/tags/">æ ‡ç­¾</a><a href="/archives/">å½’æ¡£</a></div><div class="sitemap-group"><span class="fs14">ç«™ç‚¹</span><a target="_blank" rel="noopener" href="https://status.thatcoder.cn/status/public/">å…¬å…±æœåŠ¡</a><a target="_blank" rel="noopener" href="https://ai.thatcoder.cn/">ChatGPT</a><a target="_blank" rel="noopener" href="https://alist.thatcoder.cn/">æ–‡ä»¶èµ„æº</a><a target="_blank" rel="noopener" href="https://docs.thatapi.cn/">å…¬å…±æ¥å£</a></div><div class="sitemap-group"><span class="fs14">ç¤¾äº¤</span><a href="/links/">å‹äººå¸</a><a href="/links/#comments">ç•™è¨€æ¿</a><a href="/animes/">åœ¨è¿½ç•ª</a><a href="/cinemas/">è¿˜è¿½å‰§</a></div><div class="sitemap-group"><span class="fs14">æ›´å¤š</span><a href="/about/#tab_1-1/">æœ¬ç«™åŠ¨æ€</a><a target="_blank" rel="noopener" href="https://muselink.cc/naive">è”ç³»åšä¸»</a><a target="_blank" rel="noopener" href="https://github.com/ThatCoders">GitHub</a><a target="_blank" rel="noopener" href="https://gitee.com/thatcoder">Gitee</a></div></div><div class="text"><p style="text-align:center" >
æœ¬ç«™ç”± <a style="font-weight: bold;" href="/author/ThatCoder/">é’Ÿæ„</a> ä½¿ç”¨ <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0">Stellar 1.25.0</a> ä¸»é¢˜åˆ›å»ºã€‚
<br>
ç”± <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral">åˆæ‹äº‘</a> æä¾›CDNåŠ é€Ÿ/äº‘å­˜å‚¨æœåŠ¡
<br>
ç”± <a style="font-weight: bold;" target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral">vercel</a> æä¾›æ‰˜ç®¡æœåŠ¡
<br>
<a href="https://beian.miit.gov.cn/" target="_blank">æ¹˜ICPå¤‡2023019799å·-1</a>
<br>
<!--ä¸è’œå­è®¡æ•°å™¨-->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!--æ·»åŠ ä¸€ä¸ªè®¿é—®é‡-->
<span>æ€»è®¿é—® <span id="busuanzi_value_site_pv" style="font-weight: bold;"></span> æ¬¡ | æœ¬é¡µè®¿é—® <span id="busuanzi_value_page_pv" style="font-weight: bold;"></span> æ¬¡</span> 
<div id="siteruntime"></div>
</p>
<script>
function siteTime(){
    window.setTimeout("siteTime()", 1000);
    var seconds = 1000
    var minutes = seconds * 60
    var hours = minutes * 60
    var days = hours * 24
    var years = days * 365
    var today = new Date()
    var todayYear = today.getFullYear()
    var todayMonth = today.getMonth()
    var todayDate = today.getDate()
    var todayHour = today.getHours()
    var todayMinute = today.getMinutes()
    var todaySecond = today.getSeconds()
    var t1 = Date.UTC(2020,4,30,08,00,00)
    var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond)
    var diff = t2-t1
    var diffYears = Math.floor(diff/years)
    var diffDays = Math.floor((diff/days)-diffYears*365)
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours)
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes)
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds)
    document.getElementById("siteruntime").innerHTML="<p style=\"text-align:center\">å°ç ´ç«™å·²é¢ æ²›æµç¦» "+diffYears+" å¹´ "+diffDays+" å¤© "+diffHours+" å°æ—¶ "+diffMinutes+" åˆ†é’Ÿ "+diffSeconds+" ç§’</p>"
}
siteTime();
</script>
</div></footer>
<div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg t="1705412886951" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8331" width="200" height="200"><path d="M638.72 970.666667h-256c-118.186667 0-198.272-25.002667-251.946667-78.72S52.053333 758.186667 52.053333 640V384c0-118.186667 25.002667-198.272 78.72-251.946667S264.533333 53.333333 382.72 53.333333h256c118.186667 0 198.272 25.002667 251.946667 78.72S969.386667 265.813333 969.386667 384v256c0 118.186667-25.002667 198.272-78.72 251.946667S756.906667 970.666667 638.72 970.666667z m-256-853.333334c-100.096 0-165.802667 19.2-206.72 59.946667S116.053333 283.904 116.053333 384v256c0 100.096 19.072 165.802667 59.946667 206.72S282.624 906.666667 382.72 906.666667h256c100.096 0 165.802667-19.072 206.72-59.946667S905.386667 740.096 905.386667 640V384c0-100.096-19.072-165.802667-59.946667-206.72S738.816 117.333333 638.72 117.333333z" p-id="8332"></path><path d="M638.72 970.666667a32 32 0 0 1-32-32V85.333333a32 32 0 0 1 32-32 32 32 0 0 1 32 32v853.333334a32 32 0 0 1-32 32zM340.053333 653.226667a31.914667 31.914667 0 0 1-22.613333-9.386667 32 32 0 0 1 0-45.269333L404.053333 512 317.44 425.386667a32 32 0 0 1 0-45.226667 32 32 0 0 1 45.226667 0l109.226666 109.226667a32 32 0 0 1 0 45.269333L362.666667 643.84a31.914667 31.914667 0 0 1-22.613334 9.386667z" p-id="8333"></path></svg>
  </button>
</div>
<div class="main-mask" onclick="sidebar.toggle()"></div></div></div><div class="scripts">
<script type="text/javascript">
  const stellar = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // ä» butterfly å’Œ volantis è·å¾—çµæ„Ÿ
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.25.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.25.0';
  stellar.config = {
    date_suffix: {
      just: 'åˆšåˆš',
      min: 'åˆ†é’Ÿå‰',
      hour: 'å°æ—¶å‰',
      day: 'å¤©å‰',
      month: 'ä¸ªæœˆå‰',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"post, page, docs","path":"/search.json","content":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js","memos":"/js/plugins/memos.js","marked":"/js/plugins/marked.js","timetmpl":"/js/plugins/timetmpl.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@10.3/swiper-bundle.min.css","js":"https://unpkg.com/swiper@10.3/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://cdn.bootcdn.net/ajax/libs/scrollReveal.js/4.0.9/scrollreveal.min.js","distance":"16px","duration":800,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img, .md-text.content p>img, .md-text.content li img , .wl-content img, waline_container .vcontent img, .timeline .body .image img,  .timeline .gallery img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('false' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":false,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied","toast":"å¤åˆ¶æˆåŠŸ"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script type="module" defer="defer">
    import { init } from 'https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js';
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    stellar.loadCSS('https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.css');
    stellar.loadScript('https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js', {defer:true, type:"module"}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
        init(Object.assign({"js":"https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.js","css":"https://upyun.thatcdn.cn/public/web/waline/v3/client/dist/waline.css","serverURL":"https://waline.thatapi.cn/","commentCount":true,"pageview":false,"custom":{"css":"/custom/css/ZYWaline.css"},"search":false,"locale":{"placeholder":"  é‡äº‹ä¸å†³, å¯é—®æ˜¥é£..."},"emoji":["https://upyun.thatcdn.cn/public/web/emojis/bilibili","https://upyun.thatcdn.cn/public/web/emojis/qq","https://upyun.thatcdn.cn/public/web/emojis/tieba","https://upyun.thatcdn.cn/public/web/emojis/weibo"],"reaction":["https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_cute.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_chuckle.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_sunglasses.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_crazy.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_pick_nose.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_not_care.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_trollface.png","https://upyun.thatcdn.cn/public/web/emojis/bilibili/bb_thumbsup.png"],"meta":["nick","mail","link"],"imageUploader":{"fileName":"file","tokenName":"Authorization","api":"https://lsky.thatcoder.cn/api/v1/upload","token":"Bearer 6|x9vHGJGHAnjqbO0PGEE5vM7r9S9hdqFA9bmdESdm","resp":"data.links.url"}}, {
        el: '#waline_container',
        path: path,
        
          imageUploader: function(file) {
            let headers = new Headers();
            headers.set('Accept', 'application/json');
            
              headers.set('Authorization', 'Bearer 6|x9vHGJGHAnjqbO0PGEE5vM7r9S9hdqFA9bmdESdm')
            
            let formData = new FormData();
            formData.append('file', file);
            return fetch('https://lsky.thatcoder.cn/api/v1/upload',{
              method: 'POST',
              body: formData,
              headers: headers
              }).then((resp) => resp.json())
                .then((resp) => resp.data.links.url)
          },
        
      }));
    });
  }
  stellar.loadCSS('/custom/css/ZYWaline.css');
  window.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOM fully loaded and parsed');
    load_comment();
  });

</script>







<!-- inject -->
<script type="text/javascript" src="/custom/js/ZYUtil.js"></script><script type="text/javascript" src="/custom/js/ZYDark.js"></script><script type="text/javascript" src="/custom/js/ZYCategory.js"></script><script type="text/javascript" src="/custom/js/ZYCode.js"></script><script type="text/javascript" src="/custom/js/timetmpl.js"></script>
</div></body></html>
